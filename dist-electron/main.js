"use strict";const ft=require("electron"),dt=require("fs"),Ku=require("constants"),cr=require("stream"),Wi=require("util"),_l=require("assert"),Pe=require("path"),xr=require("child_process"),Sl=require("events"),fr=require("crypto"),Al=require("tty"),Lr=require("os"),Ct=require("url"),Ju=require("string_decoder"),Tl=require("zlib"),Cl=require("http");var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var va={},wt={},Wr={},_r={},Ea;function Ve(){return Ea||(Ea=1,_r.fromCallback=function(r){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")r.apply(this,d);else return new Promise((h,u)=>{d.push((c,l)=>c!=null?u(c):h(l)),r.apply(this,d)})},"name",{value:r.name})},_r.fromPromise=function(r){return Object.defineProperty(function(...d){const h=d[d.length-1];if(typeof h!="function")return r.apply(this,d);d.pop(),r.apply(this,d).then(u=>h(null,u),h)},"name",{value:r.name})}),_r}var Vr,ya;function Zu(){if(ya)return Vr;ya=1;var r=Ku,d=process.cwd,h=null,u=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return h||(h=d.call(process)),h};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var c=process.chdir;process.chdir=function(a){h=null,c.call(process,a)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,c)}Vr=l;function l(a){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&f(a),a.lutimes||i(a),a.chown=o(a.chown),a.fchown=o(a.fchown),a.lchown=o(a.lchown),a.chmod=s(a.chmod),a.fchmod=s(a.fchmod),a.lchmod=s(a.lchmod),a.chownSync=t(a.chownSync),a.fchownSync=t(a.fchownSync),a.lchownSync=t(a.lchownSync),a.chmodSync=n(a.chmodSync),a.fchmodSync=n(a.fchmodSync),a.lchmodSync=n(a.lchmodSync),a.stat=m(a.stat),a.fstat=m(a.fstat),a.lstat=m(a.lstat),a.statSync=v(a.statSync),a.fstatSync=v(a.fstatSync),a.lstatSync=v(a.lstatSync),a.chmod&&!a.lchmod&&(a.lchmod=function(p,T,R){R&&process.nextTick(R)},a.lchmodSync=function(){}),a.chown&&!a.lchown&&(a.lchown=function(p,T,R,O){O&&process.nextTick(O)},a.lchownSync=function(){}),u==="win32"&&(a.rename=typeof a.rename!="function"?a.rename:(function(p){function T(R,O,P){var M=Date.now(),C=0;p(R,O,function w(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-M<6e4){setTimeout(function(){a.stat(O,function(E,$){E&&E.code==="ENOENT"?p(R,O,w):P(S)})},C),C<100&&(C+=10);return}P&&P(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(T,p),T})(a.rename)),a.read=typeof a.read!="function"?a.read:(function(p){function T(R,O,P,M,C,w){var S;if(w&&typeof w=="function"){var E=0;S=function($,U,L){if($&&$.code==="EAGAIN"&&E<10)return E++,p.call(a,R,O,P,M,C,S);w.apply(this,arguments)}}return p.call(a,R,O,P,M,C,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(T,p),T})(a.read),a.readSync=typeof a.readSync!="function"?a.readSync:(function(p){return function(T,R,O,P,M){for(var C=0;;)try{return p.call(a,T,R,O,P,M)}catch(w){if(w.code==="EAGAIN"&&C<10){C++;continue}throw w}}})(a.readSync);function f(p){p.lchmod=function(T,R,O){p.open(T,r.O_WRONLY|r.O_SYMLINK,R,function(P,M){if(P){O&&O(P);return}p.fchmod(M,R,function(C){p.close(M,function(w){O&&O(C||w)})})})},p.lchmodSync=function(T,R){var O=p.openSync(T,r.O_WRONLY|r.O_SYMLINK,R),P=!0,M;try{M=p.fchmodSync(O,R),P=!1}finally{if(P)try{p.closeSync(O)}catch{}else p.closeSync(O)}return M}}function i(p){r.hasOwnProperty("O_SYMLINK")&&p.futimes?(p.lutimes=function(T,R,O,P){p.open(T,r.O_SYMLINK,function(M,C){if(M){P&&P(M);return}p.futimes(C,R,O,function(w){p.close(C,function(S){P&&P(w||S)})})})},p.lutimesSync=function(T,R,O){var P=p.openSync(T,r.O_SYMLINK),M,C=!0;try{M=p.futimesSync(P,R,O),C=!1}finally{if(C)try{p.closeSync(P)}catch{}else p.closeSync(P)}return M}):p.futimes&&(p.lutimes=function(T,R,O,P){P&&process.nextTick(P)},p.lutimesSync=function(){})}function s(p){return p&&function(T,R,O){return p.call(a,T,R,function(P){y(P)&&(P=null),O&&O.apply(this,arguments)})}}function n(p){return p&&function(T,R){try{return p.call(a,T,R)}catch(O){if(!y(O))throw O}}}function o(p){return p&&function(T,R,O,P){return p.call(a,T,R,O,function(M){y(M)&&(M=null),P&&P.apply(this,arguments)})}}function t(p){return p&&function(T,R,O){try{return p.call(a,T,R,O)}catch(P){if(!y(P))throw P}}}function m(p){return p&&function(T,R,O){typeof R=="function"&&(O=R,R=null);function P(M,C){C&&(C.uid<0&&(C.uid+=4294967296),C.gid<0&&(C.gid+=4294967296)),O&&O.apply(this,arguments)}return R?p.call(a,T,R,P):p.call(a,T,P)}}function v(p){return p&&function(T,R){var O=R?p.call(a,T,R):p.call(a,T);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function y(p){if(!p||p.code==="ENOSYS")return!0;var T=!process.getuid||process.getuid()!==0;return!!(T&&(p.code==="EINVAL"||p.code==="EPERM"))}}return Vr}var Yr,wa;function ec(){if(wa)return Yr;wa=1;var r=cr.Stream;Yr=d;function d(h){return{ReadStream:u,WriteStream:c};function u(l,a){if(!(this instanceof u))return new u(l,a);r.call(this);var f=this;this.path=l,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,a=a||{};for(var i=Object.keys(a),s=0,n=i.length;s<n;s++){var o=i[s];this[o]=a[o]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){f._read()});return}h.open(this.path,this.flags,this.mode,function(t,m){if(t){f.emit("error",t),f.readable=!1;return}f.fd=m,f.emit("open",m),f._read()})}function c(l,a){if(!(this instanceof c))return new c(l,a);r.call(this),this.path=l,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,a=a||{};for(var f=Object.keys(a),i=0,s=f.length;i<s;i++){var n=f[i];this[n]=a[n]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=h.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return Yr}var zr,_a;function tc(){if(_a)return zr;_a=1,zr=d;var r=Object.getPrototypeOf||function(h){return h.__proto__};function d(h){if(h===null||typeof h!="object")return h;if(h instanceof Object)var u={__proto__:r(h)};else var u=Object.create(null);return Object.getOwnPropertyNames(h).forEach(function(c){Object.defineProperty(u,c,Object.getOwnPropertyDescriptor(h,c))}),u}return zr}var Sr,Sa;function Ge(){if(Sa)return Sr;Sa=1;var r=dt,d=Zu(),h=ec(),u=tc(),c=Wi,l,a;typeof Symbol=="function"&&typeof Symbol.for=="function"?(l=Symbol.for("graceful-fs.queue"),a=Symbol.for("graceful-fs.previous")):(l="___graceful-fs.queue",a="___graceful-fs.previous");function f(){}function i(p,T){Object.defineProperty(p,l,{get:function(){return T}})}var s=f;if(c.debuglog?s=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var p=c.format.apply(c,arguments);p="GFS4: "+p.split(/\n/).join(`
GFS4: `),console.error(p)}),!r[l]){var n=Qe[l]||[];i(r,n),r.close=(function(p){function T(R,O){return p.call(r,R,function(P){P||v(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(T,a,{value:p}),T})(r.close),r.closeSync=(function(p){function T(R){p.apply(r,arguments),v()}return Object.defineProperty(T,a,{value:p}),T})(r.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(r[l]),_l.equal(r[l].length,0)})}Qe[l]||i(Qe,r[l]),Sr=o(u(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(Sr=o(r),r.__patched=!0);function o(p){d(p),p.gracefulify=o,p.createReadStream=ce,p.createWriteStream=ue;var T=p.readFile;p.readFile=R;function R(K,Ee,A){return typeof Ee=="function"&&(A=Ee,Ee=null),g(K,Ee,A);function g(H,N,le,me){return T(H,N,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?t([g,[H,N,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var O=p.writeFile;p.writeFile=P;function P(K,Ee,A,g){return typeof A=="function"&&(g=A,A=null),H(K,Ee,A,g);function H(N,le,me,pe,_e){return O(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?t([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var M=p.appendFile;M&&(p.appendFile=C);function C(K,Ee,A,g){return typeof A=="function"&&(g=A,A=null),H(K,Ee,A,g);function H(N,le,me,pe,_e){return M(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?t([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var w=p.copyFile;w&&(p.copyFile=S);function S(K,Ee,A,g){return typeof A=="function"&&(g=A,A=0),H(K,Ee,A,g);function H(N,le,me,pe,_e){return w(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?t([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var E=p.readdir;p.readdir=U;var $=/^v[0-5]\./;function U(K,Ee,A){typeof Ee=="function"&&(A=Ee,Ee=null);var g=$.test(process.version)?function(le,me,pe,_e){return E(le,H(le,me,pe,_e))}:function(le,me,pe,_e){return E(le,me,H(le,me,pe,_e))};return g(K,Ee,A);function H(N,le,me,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?t([g,[N,le,me],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof me=="function"&&me.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var L=h(p);k=L.ReadStream,W=L.WriteStream}var q=p.ReadStream;q&&(k.prototype=Object.create(q.prototype),k.prototype.open=J);var D=p.WriteStream;D&&(W.prototype=Object.create(D.prototype),W.prototype.open=ne),Object.defineProperty(p,"ReadStream",{get:function(){return k},set:function(K){k=K},enumerable:!0,configurable:!0}),Object.defineProperty(p,"WriteStream",{get:function(){return W},set:function(K){W=K},enumerable:!0,configurable:!0});var I=k;Object.defineProperty(p,"FileReadStream",{get:function(){return I},set:function(K){I=K},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(p,"FileWriteStream",{get:function(){return F},set:function(K){F=K},enumerable:!0,configurable:!0});function k(K,Ee){return this instanceof k?(q.apply(this,arguments),this):k.apply(Object.create(k.prototype),arguments)}function J(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,A){Ee?(K.autoClose&&K.destroy(),K.emit("error",Ee)):(K.fd=A,K.emit("open",A),K.read())})}function W(K,Ee){return this instanceof W?(D.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,A){Ee?(K.destroy(),K.emit("error",Ee)):(K.fd=A,K.emit("open",A))})}function ce(K,Ee){return new p.ReadStream(K,Ee)}function ue(K,Ee){return new p.WriteStream(K,Ee)}var ie=p.open;p.open=Ae;function Ae(K,Ee,A,g){return typeof A=="function"&&(g=A,A=null),H(K,Ee,A,g);function H(N,le,me,pe,_e){return ie(N,le,me,function(ye,Fe){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?t([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return p}function t(p){s("ENQUEUE",p[0].name,p[1]),r[l].push(p),y()}var m;function v(){for(var p=Date.now(),T=0;T<r[l].length;++T)r[l][T].length>2&&(r[l][T][3]=p,r[l][T][4]=p);y()}function y(){if(clearTimeout(m),m=void 0,r[l].length!==0){var p=r[l].shift(),T=p[0],R=p[1],O=p[2],P=p[3],M=p[4];if(P===void 0)s("RETRY",T.name,R),T.apply(null,R);else if(Date.now()-P>=6e4){s("TIMEOUT",T.name,R);var C=R.pop();typeof C=="function"&&C.call(null,O)}else{var w=Date.now()-M,S=Math.max(M-P,1),E=Math.min(S*1.2,100);w>=E?(s("RETRY",T.name,R),T.apply(null,R.concat([P]))):r[l].push(p)}m===void 0&&(m=setTimeout(y,0))}}return Sr}var Aa;function Lt(){return Aa||(Aa=1,(function(r){const d=Ve().fromCallback,h=Ge(),u=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(c=>typeof h[c]=="function");Object.assign(r,h),u.forEach(c=>{r[c]=d(h[c])}),r.exists=function(c,l){return typeof l=="function"?h.exists(c,l):new Promise(a=>h.exists(c,a))},r.read=function(c,l,a,f,i,s){return typeof s=="function"?h.read(c,l,a,f,i,s):new Promise((n,o)=>{h.read(c,l,a,f,i,(t,m,v)=>{if(t)return o(t);n({bytesRead:m,buffer:v})})})},r.write=function(c,l,...a){return typeof a[a.length-1]=="function"?h.write(c,l,...a):new Promise((f,i)=>{h.write(c,l,...a,(s,n,o)=>{if(s)return i(s);f({bytesWritten:n,buffer:o})})})},typeof h.writev=="function"&&(r.writev=function(c,l,...a){return typeof a[a.length-1]=="function"?h.writev(c,l,...a):new Promise((f,i)=>{h.writev(c,l,...a,(s,n,o)=>{if(s)return i(s);f({bytesWritten:n,buffers:o})})})}),typeof h.realpath.native=="function"?r.realpath.native=d(h.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Wr)),Wr}var Ar={},Xr={},Ta;function rc(){if(Ta)return Xr;Ta=1;const r=Pe;return Xr.checkPath=function(h){if(process.platform==="win32"&&/[<>:"|?*]/.test(h.replace(r.parse(h).root,""))){const c=new Error(`Path contains invalid characters: ${h}`);throw c.code="EINVAL",c}},Xr}var Ca;function nc(){if(Ca)return Ar;Ca=1;const r=Lt(),{checkPath:d}=rc(),h=u=>{const c={mode:511};return typeof u=="number"?u:{...c,...u}.mode};return Ar.makeDir=async(u,c)=>(d(u),r.mkdir(u,{mode:h(c),recursive:!0})),Ar.makeDirSync=(u,c)=>(d(u),r.mkdirSync(u,{mode:h(c),recursive:!0})),Ar}var Kr,Ra;function tt(){if(Ra)return Kr;Ra=1;const r=Ve().fromPromise,{makeDir:d,makeDirSync:h}=nc(),u=r(d);return Kr={mkdirs:u,mkdirsSync:h,mkdirp:u,mkdirpSync:h,ensureDir:u,ensureDirSync:h},Kr}var Jr,ba;function Rt(){if(ba)return Jr;ba=1;const r=Ve().fromPromise,d=Lt();function h(u){return d.access(u).then(()=>!0).catch(()=>!1)}return Jr={pathExists:r(h),pathExistsSync:d.existsSync},Jr}var Qr,Oa;function Rl(){if(Oa)return Qr;Oa=1;const r=Ge();function d(u,c,l,a){r.open(u,"r+",(f,i)=>{if(f)return a(f);r.futimes(i,c,l,s=>{r.close(i,n=>{a&&a(s||n)})})})}function h(u,c,l){const a=r.openSync(u,"r+");return r.futimesSync(a,c,l),r.closeSync(a)}return Qr={utimesMillis:d,utimesMillisSync:h},Qr}var Zr,Pa;function Ut(){if(Pa)return Zr;Pa=1;const r=Lt(),d=Pe,h=Wi;function u(t,m,v){const y=v.dereference?p=>r.stat(p,{bigint:!0}):p=>r.lstat(p,{bigint:!0});return Promise.all([y(t),y(m).catch(p=>{if(p.code==="ENOENT")return null;throw p})]).then(([p,T])=>({srcStat:p,destStat:T}))}function c(t,m,v){let y;const p=v.dereference?R=>r.statSync(R,{bigint:!0}):R=>r.lstatSync(R,{bigint:!0}),T=p(t);try{y=p(m)}catch(R){if(R.code==="ENOENT")return{srcStat:T,destStat:null};throw R}return{srcStat:T,destStat:y}}function l(t,m,v,y,p){h.callbackify(u)(t,m,y,(T,R)=>{if(T)return p(T);const{srcStat:O,destStat:P}=R;if(P){if(s(O,P)){const M=d.basename(t),C=d.basename(m);return v==="move"&&M!==C&&M.toLowerCase()===C.toLowerCase()?p(null,{srcStat:O,destStat:P,isChangingCase:!0}):p(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!P.isDirectory())return p(new Error(`Cannot overwrite non-directory '${m}' with directory '${t}'.`));if(!O.isDirectory()&&P.isDirectory())return p(new Error(`Cannot overwrite directory '${m}' with non-directory '${t}'.`))}return O.isDirectory()&&n(t,m)?p(new Error(o(t,m,v))):p(null,{srcStat:O,destStat:P})})}function a(t,m,v,y){const{srcStat:p,destStat:T}=c(t,m,y);if(T){if(s(p,T)){const R=d.basename(t),O=d.basename(m);if(v==="move"&&R!==O&&R.toLowerCase()===O.toLowerCase())return{srcStat:p,destStat:T,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(p.isDirectory()&&!T.isDirectory())throw new Error(`Cannot overwrite non-directory '${m}' with directory '${t}'.`);if(!p.isDirectory()&&T.isDirectory())throw new Error(`Cannot overwrite directory '${m}' with non-directory '${t}'.`)}if(p.isDirectory()&&n(t,m))throw new Error(o(t,m,v));return{srcStat:p,destStat:T}}function f(t,m,v,y,p){const T=d.resolve(d.dirname(t)),R=d.resolve(d.dirname(v));if(R===T||R===d.parse(R).root)return p();r.stat(R,{bigint:!0},(O,P)=>O?O.code==="ENOENT"?p():p(O):s(m,P)?p(new Error(o(t,v,y))):f(t,m,R,y,p))}function i(t,m,v,y){const p=d.resolve(d.dirname(t)),T=d.resolve(d.dirname(v));if(T===p||T===d.parse(T).root)return;let R;try{R=r.statSync(T,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(s(m,R))throw new Error(o(t,v,y));return i(t,m,T,y)}function s(t,m){return m.ino&&m.dev&&m.ino===t.ino&&m.dev===t.dev}function n(t,m){const v=d.resolve(t).split(d.sep).filter(p=>p),y=d.resolve(m).split(d.sep).filter(p=>p);return v.reduce((p,T,R)=>p&&y[R]===T,!0)}function o(t,m,v){return`Cannot ${v} '${t}' to a subdirectory of itself, '${m}'.`}return Zr={checkPaths:l,checkPathsSync:a,checkParentPaths:f,checkParentPathsSync:i,isSrcSubdir:n,areIdentical:s},Zr}var en,Ia;function ic(){if(Ia)return en;Ia=1;const r=Ge(),d=Pe,h=tt().mkdirs,u=Rt().pathExists,c=Rl().utimesMillis,l=Ut();function a(U,L,q,D){typeof q=="function"&&!D?(D=q,q={}):typeof q=="function"&&(q={filter:q}),D=D||function(){},q=q||{},q.clobber="clobber"in q?!!q.clobber:!0,q.overwrite="overwrite"in q?!!q.overwrite:q.clobber,q.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),l.checkPaths(U,L,"copy",q,(I,F)=>{if(I)return D(I);const{srcStat:k,destStat:J}=F;l.checkParentPaths(U,k,L,"copy",W=>W?D(W):q.filter?i(f,J,U,L,q,D):f(J,U,L,q,D))})}function f(U,L,q,D,I){const F=d.dirname(q);u(F,(k,J)=>{if(k)return I(k);if(J)return n(U,L,q,D,I);h(F,W=>W?I(W):n(U,L,q,D,I))})}function i(U,L,q,D,I,F){Promise.resolve(I.filter(q,D)).then(k=>k?U(L,q,D,I,F):F(),k=>F(k))}function s(U,L,q,D,I){return D.filter?i(n,U,L,q,D,I):n(U,L,q,D,I)}function n(U,L,q,D,I){(D.dereference?r.stat:r.lstat)(L,(k,J)=>k?I(k):J.isDirectory()?P(J,U,L,q,D,I):J.isFile()||J.isCharacterDevice()||J.isBlockDevice()?o(J,U,L,q,D,I):J.isSymbolicLink()?E(U,L,q,D,I):J.isSocket()?I(new Error(`Cannot copy a socket file: ${L}`)):J.isFIFO()?I(new Error(`Cannot copy a FIFO pipe: ${L}`)):I(new Error(`Unknown file: ${L}`)))}function o(U,L,q,D,I,F){return L?t(U,q,D,I,F):m(U,q,D,I,F)}function t(U,L,q,D,I){if(D.overwrite)r.unlink(q,F=>F?I(F):m(U,L,q,D,I));else return D.errorOnExist?I(new Error(`'${q}' already exists`)):I()}function m(U,L,q,D,I){r.copyFile(L,q,F=>F?I(F):D.preserveTimestamps?v(U.mode,L,q,I):R(q,U.mode,I))}function v(U,L,q,D){return y(U)?p(q,U,I=>I?D(I):T(U,L,q,D)):T(U,L,q,D)}function y(U){return(U&128)===0}function p(U,L,q){return R(U,L|128,q)}function T(U,L,q,D){O(L,q,I=>I?D(I):R(q,U,D))}function R(U,L,q){return r.chmod(U,L,q)}function O(U,L,q){r.stat(U,(D,I)=>D?q(D):c(L,I.atime,I.mtime,q))}function P(U,L,q,D,I,F){return L?C(q,D,I,F):M(U.mode,q,D,I,F)}function M(U,L,q,D,I){r.mkdir(q,F=>{if(F)return I(F);C(L,q,D,k=>k?I(k):R(q,U,I))})}function C(U,L,q,D){r.readdir(U,(I,F)=>I?D(I):w(F,U,L,q,D))}function w(U,L,q,D,I){const F=U.pop();return F?S(U,F,L,q,D,I):I()}function S(U,L,q,D,I,F){const k=d.join(q,L),J=d.join(D,L);l.checkPaths(k,J,"copy",I,(W,ne)=>{if(W)return F(W);const{destStat:ce}=ne;s(ce,k,J,I,ue=>ue?F(ue):w(U,q,D,I,F))})}function E(U,L,q,D,I){r.readlink(L,(F,k)=>{if(F)return I(F);if(D.dereference&&(k=d.resolve(process.cwd(),k)),U)r.readlink(q,(J,W)=>J?J.code==="EINVAL"||J.code==="UNKNOWN"?r.symlink(k,q,I):I(J):(D.dereference&&(W=d.resolve(process.cwd(),W)),l.isSrcSubdir(k,W)?I(new Error(`Cannot copy '${k}' to a subdirectory of itself, '${W}'.`)):U.isDirectory()&&l.isSrcSubdir(W,k)?I(new Error(`Cannot overwrite '${W}' with '${k}'.`)):$(k,q,I)));else return r.symlink(k,q,I)})}function $(U,L,q){r.unlink(L,D=>D?q(D):r.symlink(U,L,q))}return en=a,en}var tn,Da;function ac(){if(Da)return tn;Da=1;const r=Ge(),d=Pe,h=tt().mkdirsSync,u=Rl().utimesMillisSync,c=Ut();function l(w,S,E){typeof E=="function"&&(E={filter:E}),E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:$,destStat:U}=c.checkPathsSync(w,S,"copy",E);return c.checkParentPathsSync(w,$,S,"copy"),a(U,w,S,E)}function a(w,S,E,$){if($.filter&&!$.filter(S,E))return;const U=d.dirname(E);return r.existsSync(U)||h(U),i(w,S,E,$)}function f(w,S,E,$){if(!($.filter&&!$.filter(S,E)))return i(w,S,E,$)}function i(w,S,E,$){const L=($.dereference?r.statSync:r.lstatSync)(S);if(L.isDirectory())return T(L,w,S,E,$);if(L.isFile()||L.isCharacterDevice()||L.isBlockDevice())return s(L,w,S,E,$);if(L.isSymbolicLink())return M(w,S,E,$);throw L.isSocket()?new Error(`Cannot copy a socket file: ${S}`):L.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${S}`):new Error(`Unknown file: ${S}`)}function s(w,S,E,$,U){return S?n(w,E,$,U):o(w,E,$,U)}function n(w,S,E,$){if($.overwrite)return r.unlinkSync(E),o(w,S,E,$);if($.errorOnExist)throw new Error(`'${E}' already exists`)}function o(w,S,E,$){return r.copyFileSync(S,E),$.preserveTimestamps&&t(w.mode,S,E),y(E,w.mode)}function t(w,S,E){return m(w)&&v(E,w),p(S,E)}function m(w){return(w&128)===0}function v(w,S){return y(w,S|128)}function y(w,S){return r.chmodSync(w,S)}function p(w,S){const E=r.statSync(w);return u(S,E.atime,E.mtime)}function T(w,S,E,$,U){return S?O(E,$,U):R(w.mode,E,$,U)}function R(w,S,E,$){return r.mkdirSync(E),O(S,E,$),y(E,w)}function O(w,S,E){r.readdirSync(w).forEach($=>P($,w,S,E))}function P(w,S,E,$){const U=d.join(S,w),L=d.join(E,w),{destStat:q}=c.checkPathsSync(U,L,"copy",$);return f(q,U,L,$)}function M(w,S,E,$){let U=r.readlinkSync(S);if($.dereference&&(U=d.resolve(process.cwd(),U)),w){let L;try{L=r.readlinkSync(E)}catch(q){if(q.code==="EINVAL"||q.code==="UNKNOWN")return r.symlinkSync(U,E);throw q}if($.dereference&&(L=d.resolve(process.cwd(),L)),c.isSrcSubdir(U,L))throw new Error(`Cannot copy '${U}' to a subdirectory of itself, '${L}'.`);if(r.statSync(E).isDirectory()&&c.isSrcSubdir(L,U))throw new Error(`Cannot overwrite '${L}' with '${U}'.`);return C(U,E)}else return r.symlinkSync(U,E)}function C(w,S){return r.unlinkSync(S),r.symlinkSync(w,S)}return tn=l,tn}var rn,Na;function Vi(){if(Na)return rn;Na=1;const r=Ve().fromCallback;return rn={copy:r(ic()),copySync:ac()},rn}var nn,Fa;function oc(){if(Fa)return nn;Fa=1;const r=Ge(),d=Pe,h=_l,u=process.platform==="win32";function c(v){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(p=>{v[p]=v[p]||r[p],p=p+"Sync",v[p]=v[p]||r[p]}),v.maxBusyTries=v.maxBusyTries||3}function l(v,y,p){let T=0;typeof y=="function"&&(p=y,y={}),h(v,"rimraf: missing path"),h.strictEqual(typeof v,"string","rimraf: path should be a string"),h.strictEqual(typeof p,"function","rimraf: callback function required"),h(y,"rimraf: invalid options argument provided"),h.strictEqual(typeof y,"object","rimraf: options should be object"),c(y),a(v,y,function R(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&T<y.maxBusyTries){T++;const P=T*100;return setTimeout(()=>a(v,y,R),P)}O.code==="ENOENT"&&(O=null)}p(O)})}function a(v,y,p){h(v),h(y),h(typeof p=="function"),y.lstat(v,(T,R)=>{if(T&&T.code==="ENOENT")return p(null);if(T&&T.code==="EPERM"&&u)return f(v,y,T,p);if(R&&R.isDirectory())return s(v,y,T,p);y.unlink(v,O=>{if(O){if(O.code==="ENOENT")return p(null);if(O.code==="EPERM")return u?f(v,y,O,p):s(v,y,O,p);if(O.code==="EISDIR")return s(v,y,O,p)}return p(O)})})}function f(v,y,p,T){h(v),h(y),h(typeof T=="function"),y.chmod(v,438,R=>{R?T(R.code==="ENOENT"?null:p):y.stat(v,(O,P)=>{O?T(O.code==="ENOENT"?null:p):P.isDirectory()?s(v,y,p,T):y.unlink(v,T)})})}function i(v,y,p){let T;h(v),h(y);try{y.chmodSync(v,438)}catch(R){if(R.code==="ENOENT")return;throw p}try{T=y.statSync(v)}catch(R){if(R.code==="ENOENT")return;throw p}T.isDirectory()?t(v,y,p):y.unlinkSync(v)}function s(v,y,p,T){h(v),h(y),h(typeof T=="function"),y.rmdir(v,R=>{R&&(R.code==="ENOTEMPTY"||R.code==="EEXIST"||R.code==="EPERM")?n(v,y,T):R&&R.code==="ENOTDIR"?T(p):T(R)})}function n(v,y,p){h(v),h(y),h(typeof p=="function"),y.readdir(v,(T,R)=>{if(T)return p(T);let O=R.length,P;if(O===0)return y.rmdir(v,p);R.forEach(M=>{l(d.join(v,M),y,C=>{if(!P){if(C)return p(P=C);--O===0&&y.rmdir(v,p)}})})})}function o(v,y){let p;y=y||{},c(y),h(v,"rimraf: missing path"),h.strictEqual(typeof v,"string","rimraf: path should be a string"),h(y,"rimraf: missing options"),h.strictEqual(typeof y,"object","rimraf: options should be object");try{p=y.lstatSync(v)}catch(T){if(T.code==="ENOENT")return;T.code==="EPERM"&&u&&i(v,y,T)}try{p&&p.isDirectory()?t(v,y,null):y.unlinkSync(v)}catch(T){if(T.code==="ENOENT")return;if(T.code==="EPERM")return u?i(v,y,T):t(v,y,T);if(T.code!=="EISDIR")throw T;t(v,y,T)}}function t(v,y,p){h(v),h(y);try{y.rmdirSync(v)}catch(T){if(T.code==="ENOTDIR")throw p;if(T.code==="ENOTEMPTY"||T.code==="EEXIST"||T.code==="EPERM")m(v,y);else if(T.code!=="ENOENT")throw T}}function m(v,y){if(h(v),h(y),y.readdirSync(v).forEach(p=>o(d.join(v,p),y)),u){const p=Date.now();do try{return y.rmdirSync(v,y)}catch{}while(Date.now()-p<500)}else return y.rmdirSync(v,y)}return nn=l,l.sync=o,nn}var an,xa;function Ur(){if(xa)return an;xa=1;const r=Ge(),d=Ve().fromCallback,h=oc();function u(l,a){if(r.rm)return r.rm(l,{recursive:!0,force:!0},a);h(l,a)}function c(l){if(r.rmSync)return r.rmSync(l,{recursive:!0,force:!0});h.sync(l)}return an={remove:d(u),removeSync:c},an}var on,La;function sc(){if(La)return on;La=1;const r=Ve().fromPromise,d=Lt(),h=Pe,u=tt(),c=Ur(),l=r(async function(i){let s;try{s=await d.readdir(i)}catch{return u.mkdirs(i)}return Promise.all(s.map(n=>c.remove(h.join(i,n))))});function a(f){let i;try{i=d.readdirSync(f)}catch{return u.mkdirsSync(f)}i.forEach(s=>{s=h.join(f,s),c.removeSync(s)})}return on={emptyDirSync:a,emptydirSync:a,emptyDir:l,emptydir:l},on}var sn,Ua;function lc(){if(Ua)return sn;Ua=1;const r=Ve().fromCallback,d=Pe,h=Ge(),u=tt();function c(a,f){function i(){h.writeFile(a,"",s=>{if(s)return f(s);f()})}h.stat(a,(s,n)=>{if(!s&&n.isFile())return f();const o=d.dirname(a);h.stat(o,(t,m)=>{if(t)return t.code==="ENOENT"?u.mkdirs(o,v=>{if(v)return f(v);i()}):f(t);m.isDirectory()?i():h.readdir(o,v=>{if(v)return f(v)})})})}function l(a){let f;try{f=h.statSync(a)}catch{}if(f&&f.isFile())return;const i=d.dirname(a);try{h.statSync(i).isDirectory()||h.readdirSync(i)}catch(s){if(s&&s.code==="ENOENT")u.mkdirsSync(i);else throw s}h.writeFileSync(a,"")}return sn={createFile:r(c),createFileSync:l},sn}var ln,$a;function uc(){if($a)return ln;$a=1;const r=Ve().fromCallback,d=Pe,h=Ge(),u=tt(),c=Rt().pathExists,{areIdentical:l}=Ut();function a(i,s,n){function o(t,m){h.link(t,m,v=>{if(v)return n(v);n(null)})}h.lstat(s,(t,m)=>{h.lstat(i,(v,y)=>{if(v)return v.message=v.message.replace("lstat","ensureLink"),n(v);if(m&&l(y,m))return n(null);const p=d.dirname(s);c(p,(T,R)=>{if(T)return n(T);if(R)return o(i,s);u.mkdirs(p,O=>{if(O)return n(O);o(i,s)})})})})}function f(i,s){let n;try{n=h.lstatSync(s)}catch{}try{const m=h.lstatSync(i);if(n&&l(m,n))return}catch(m){throw m.message=m.message.replace("lstat","ensureLink"),m}const o=d.dirname(s);return h.existsSync(o)||u.mkdirsSync(o),h.linkSync(i,s)}return ln={createLink:r(a),createLinkSync:f},ln}var un,ka;function cc(){if(ka)return un;ka=1;const r=Pe,d=Ge(),h=Rt().pathExists;function u(l,a,f){if(r.isAbsolute(l))return d.lstat(l,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),f(i)):f(null,{toCwd:l,toDst:l}));{const i=r.dirname(a),s=r.join(i,l);return h(s,(n,o)=>n?f(n):o?f(null,{toCwd:s,toDst:l}):d.lstat(l,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),f(t)):f(null,{toCwd:l,toDst:r.relative(i,l)})))}}function c(l,a){let f;if(r.isAbsolute(l)){if(f=d.existsSync(l),!f)throw new Error("absolute srcpath does not exist");return{toCwd:l,toDst:l}}else{const i=r.dirname(a),s=r.join(i,l);if(f=d.existsSync(s),f)return{toCwd:s,toDst:l};if(f=d.existsSync(l),!f)throw new Error("relative srcpath does not exist");return{toCwd:l,toDst:r.relative(i,l)}}}return un={symlinkPaths:u,symlinkPathsSync:c},un}var cn,qa;function fc(){if(qa)return cn;qa=1;const r=Ge();function d(u,c,l){if(l=typeof c=="function"?c:l,c=typeof c=="function"?!1:c,c)return l(null,c);r.lstat(u,(a,f)=>{if(a)return l(null,"file");c=f&&f.isDirectory()?"dir":"file",l(null,c)})}function h(u,c){let l;if(c)return c;try{l=r.lstatSync(u)}catch{return"file"}return l&&l.isDirectory()?"dir":"file"}return cn={symlinkType:d,symlinkTypeSync:h},cn}var fn,Ma;function dc(){if(Ma)return fn;Ma=1;const r=Ve().fromCallback,d=Pe,h=Lt(),u=tt(),c=u.mkdirs,l=u.mkdirsSync,a=cc(),f=a.symlinkPaths,i=a.symlinkPathsSync,s=fc(),n=s.symlinkType,o=s.symlinkTypeSync,t=Rt().pathExists,{areIdentical:m}=Ut();function v(T,R,O,P){P=typeof O=="function"?O:P,O=typeof O=="function"?!1:O,h.lstat(R,(M,C)=>{!M&&C.isSymbolicLink()?Promise.all([h.stat(T),h.stat(R)]).then(([w,S])=>{if(m(w,S))return P(null);y(T,R,O,P)}):y(T,R,O,P)})}function y(T,R,O,P){f(T,R,(M,C)=>{if(M)return P(M);T=C.toDst,n(C.toCwd,O,(w,S)=>{if(w)return P(w);const E=d.dirname(R);t(E,($,U)=>{if($)return P($);if(U)return h.symlink(T,R,S,P);c(E,L=>{if(L)return P(L);h.symlink(T,R,S,P)})})})})}function p(T,R,O){let P;try{P=h.lstatSync(R)}catch{}if(P&&P.isSymbolicLink()){const S=h.statSync(T),E=h.statSync(R);if(m(S,E))return}const M=i(T,R);T=M.toDst,O=o(M.toCwd,O);const C=d.dirname(R);return h.existsSync(C)||l(C),h.symlinkSync(T,R,O)}return fn={createSymlink:r(v),createSymlinkSync:p},fn}var dn,Ba;function hc(){if(Ba)return dn;Ba=1;const{createFile:r,createFileSync:d}=lc(),{createLink:h,createLinkSync:u}=uc(),{createSymlink:c,createSymlinkSync:l}=dc();return dn={createFile:r,createFileSync:d,ensureFile:r,ensureFileSync:d,createLink:h,createLinkSync:u,ensureLink:h,ensureLinkSync:u,createSymlink:c,createSymlinkSync:l,ensureSymlink:c,ensureSymlinkSync:l},dn}var hn,Ha;function Yi(){if(Ha)return hn;Ha=1;function r(h,{EOL:u=`
`,finalEOL:c=!0,replacer:l=null,spaces:a}={}){const f=c?u:"";return JSON.stringify(h,l,a).replace(/\n/g,u)+f}function d(h){return Buffer.isBuffer(h)&&(h=h.toString("utf8")),h.replace(/^\uFEFF/,"")}return hn={stringify:r,stripBom:d},hn}var pn,ja;function pc(){if(ja)return pn;ja=1;let r;try{r=Ge()}catch{r=dt}const d=Ve(),{stringify:h,stripBom:u}=Yi();async function c(n,o={}){typeof o=="string"&&(o={encoding:o});const t=o.fs||r,m="throws"in o?o.throws:!0;let v=await d.fromCallback(t.readFile)(n,o);v=u(v);let y;try{y=JSON.parse(v,o?o.reviver:null)}catch(p){if(m)throw p.message=`${n}: ${p.message}`,p;return null}return y}const l=d.fromPromise(c);function a(n,o={}){typeof o=="string"&&(o={encoding:o});const t=o.fs||r,m="throws"in o?o.throws:!0;try{let v=t.readFileSync(n,o);return v=u(v),JSON.parse(v,o.reviver)}catch(v){if(m)throw v.message=`${n}: ${v.message}`,v;return null}}async function f(n,o,t={}){const m=t.fs||r,v=h(o,t);await d.fromCallback(m.writeFile)(n,v,t)}const i=d.fromPromise(f);function s(n,o,t={}){const m=t.fs||r,v=h(o,t);return m.writeFileSync(n,v,t)}return pn={readFile:l,readFileSync:a,writeFile:i,writeFileSync:s},pn}var mn,Ga;function mc(){if(Ga)return mn;Ga=1;const r=pc();return mn={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync},mn}var gn,Wa;function zi(){if(Wa)return gn;Wa=1;const r=Ve().fromCallback,d=Ge(),h=Pe,u=tt(),c=Rt().pathExists;function l(f,i,s,n){typeof s=="function"&&(n=s,s="utf8");const o=h.dirname(f);c(o,(t,m)=>{if(t)return n(t);if(m)return d.writeFile(f,i,s,n);u.mkdirs(o,v=>{if(v)return n(v);d.writeFile(f,i,s,n)})})}function a(f,...i){const s=h.dirname(f);if(d.existsSync(s))return d.writeFileSync(f,...i);u.mkdirsSync(s),d.writeFileSync(f,...i)}return gn={outputFile:r(l),outputFileSync:a},gn}var vn,Va;function gc(){if(Va)return vn;Va=1;const{stringify:r}=Yi(),{outputFile:d}=zi();async function h(u,c,l={}){const a=r(c,l);await d(u,a,l)}return vn=h,vn}var En,Ya;function vc(){if(Ya)return En;Ya=1;const{stringify:r}=Yi(),{outputFileSync:d}=zi();function h(u,c,l){const a=r(c,l);d(u,a,l)}return En=h,En}var yn,za;function Ec(){if(za)return yn;za=1;const r=Ve().fromPromise,d=mc();return d.outputJson=r(gc()),d.outputJsonSync=vc(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,yn=d,yn}var wn,Xa;function yc(){if(Xa)return wn;Xa=1;const r=Ge(),d=Pe,h=Vi().copy,u=Ur().remove,c=tt().mkdirp,l=Rt().pathExists,a=Ut();function f(t,m,v,y){typeof v=="function"&&(y=v,v={}),v=v||{};const p=v.overwrite||v.clobber||!1;a.checkPaths(t,m,"move",v,(T,R)=>{if(T)return y(T);const{srcStat:O,isChangingCase:P=!1}=R;a.checkParentPaths(t,O,m,"move",M=>{if(M)return y(M);if(i(m))return s(t,m,p,P,y);c(d.dirname(m),C=>C?y(C):s(t,m,p,P,y))})})}function i(t){const m=d.dirname(t);return d.parse(m).root===m}function s(t,m,v,y,p){if(y)return n(t,m,v,p);if(v)return u(m,T=>T?p(T):n(t,m,v,p));l(m,(T,R)=>T?p(T):R?p(new Error("dest already exists.")):n(t,m,v,p))}function n(t,m,v,y){r.rename(t,m,p=>p?p.code!=="EXDEV"?y(p):o(t,m,v,y):y())}function o(t,m,v,y){h(t,m,{overwrite:v,errorOnExist:!0},T=>T?y(T):u(t,y))}return wn=f,wn}var _n,Ka;function wc(){if(Ka)return _n;Ka=1;const r=Ge(),d=Pe,h=Vi().copySync,u=Ur().removeSync,c=tt().mkdirpSync,l=Ut();function a(o,t,m){m=m||{};const v=m.overwrite||m.clobber||!1,{srcStat:y,isChangingCase:p=!1}=l.checkPathsSync(o,t,"move",m);return l.checkParentPathsSync(o,y,t,"move"),f(t)||c(d.dirname(t)),i(o,t,v,p)}function f(o){const t=d.dirname(o);return d.parse(t).root===t}function i(o,t,m,v){if(v)return s(o,t,m);if(m)return u(t),s(o,t,m);if(r.existsSync(t))throw new Error("dest already exists.");return s(o,t,m)}function s(o,t,m){try{r.renameSync(o,t)}catch(v){if(v.code!=="EXDEV")throw v;return n(o,t,m)}}function n(o,t,m){return h(o,t,{overwrite:m,errorOnExist:!0}),u(o)}return _n=a,_n}var Sn,Ja;function _c(){if(Ja)return Sn;Ja=1;const r=Ve().fromCallback;return Sn={move:r(yc()),moveSync:wc()},Sn}var An,Qa;function ht(){return Qa||(Qa=1,An={...Lt(),...Vi(),...sc(),...hc(),...Ec(),...tt(),..._c(),...zi(),...Rt(),...Ur()}),An}var Bt={},_t={},Tn={},St={},Za;function Xi(){if(Za)return St;Za=1,Object.defineProperty(St,"__esModule",{value:!0}),St.CancellationError=St.CancellationToken=void 0;const r=Sl;let d=class extends r.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(c){this.removeParentCancelHandler(),this._parent=c,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(c){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,c!=null&&(this.parent=c)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(c){this.cancelled?c():this.once("cancel",c)}createPromise(c){if(this.cancelled)return Promise.reject(new h);const l=()=>{if(a!=null)try{this.removeListener("cancel",a),a=null}catch{}};let a=null;return new Promise((f,i)=>{let s=null;if(a=()=>{try{s!=null&&(s(),s=null)}finally{i(new h)}},this.cancelled){a();return}this.onCancel(a),c(f,i,n=>{s=n})}).then(f=>(l(),f)).catch(f=>{throw l(),f})}removeParentCancelHandler(){const c=this._parent;c!=null&&this.parentCancelHandler!=null&&(c.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};St.CancellationToken=d;class h extends Error{constructor(){super("cancelled")}}return St.CancellationError=h,St}var Tr={},eo;function $r(){if(eo)return Tr;eo=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.newError=r;function r(d,h){const u=new Error(d);return u.code=h,u}return Tr}var Me={},Cr={exports:{}},Rr={exports:{}},Cn,to;function Sc(){if(to)return Cn;to=1;var r=1e3,d=r*60,h=d*60,u=h*24,c=u*7,l=u*365.25;Cn=function(n,o){o=o||{};var t=typeof n;if(t==="string"&&n.length>0)return a(n);if(t==="number"&&isFinite(n))return o.long?i(n):f(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function a(n){if(n=String(n),!(n.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(o){var t=parseFloat(o[1]),m=(o[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return t*l;case"weeks":case"week":case"w":return t*c;case"days":case"day":case"d":return t*u;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h;case"minutes":case"minute":case"mins":case"min":case"m":return t*d;case"seconds":case"second":case"secs":case"sec":case"s":return t*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function f(n){var o=Math.abs(n);return o>=u?Math.round(n/u)+"d":o>=h?Math.round(n/h)+"h":o>=d?Math.round(n/d)+"m":o>=r?Math.round(n/r)+"s":n+"ms"}function i(n){var o=Math.abs(n);return o>=u?s(n,o,u,"day"):o>=h?s(n,o,h,"hour"):o>=d?s(n,o,d,"minute"):o>=r?s(n,o,r,"second"):n+" ms"}function s(n,o,t,m){var v=o>=t*1.5;return Math.round(n/t)+" "+m+(v?"s":"")}return Cn}var Rn,ro;function bl(){if(ro)return Rn;ro=1;function r(d){u.debug=u,u.default=u,u.coerce=s,u.disable=f,u.enable=l,u.enabled=i,u.humanize=Sc(),u.destroy=n,Object.keys(d).forEach(o=>{u[o]=d[o]}),u.names=[],u.skips=[],u.formatters={};function h(o){let t=0;for(let m=0;m<o.length;m++)t=(t<<5)-t+o.charCodeAt(m),t|=0;return u.colors[Math.abs(t)%u.colors.length]}u.selectColor=h;function u(o){let t,m=null,v,y;function p(...T){if(!p.enabled)return;const R=p,O=Number(new Date),P=O-(t||O);R.diff=P,R.prev=t,R.curr=O,t=O,T[0]=u.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let M=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(w,S)=>{if(w==="%%")return"%";M++;const E=u.formatters[S];if(typeof E=="function"){const $=T[M];w=E.call(R,$),T.splice(M,1),M--}return w}),u.formatArgs.call(R,T),(R.log||u.log).apply(R,T)}return p.namespace=o,p.useColors=u.useColors(),p.color=u.selectColor(o),p.extend=c,p.destroy=u.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(v!==u.namespaces&&(v=u.namespaces,y=u.enabled(o)),y),set:T=>{m=T}}),typeof u.init=="function"&&u.init(p),p}function c(o,t){const m=u(this.namespace+(typeof t>"u"?":":t)+o);return m.log=this.log,m}function l(o){u.save(o),u.namespaces=o,u.names=[],u.skips=[];const t=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of t)m[0]==="-"?u.skips.push(m.slice(1)):u.names.push(m)}function a(o,t){let m=0,v=0,y=-1,p=0;for(;m<o.length;)if(v<t.length&&(t[v]===o[m]||t[v]==="*"))t[v]==="*"?(y=v,p=m,v++):(m++,v++);else if(y!==-1)v=y+1,p++,m=p;else return!1;for(;v<t.length&&t[v]==="*";)v++;return v===t.length}function f(){const o=[...u.names,...u.skips.map(t=>"-"+t)].join(",");return u.enable(""),o}function i(o){for(const t of u.skips)if(a(o,t))return!1;for(const t of u.names)if(a(o,t))return!0;return!1}function s(o){return o instanceof Error?o.stack||o.message:o}function n(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}return Rn=r,Rn}var no;function Ac(){return no||(no=1,(function(r,d){d.formatArgs=u,d.save=c,d.load=l,d.useColors=h,d.storage=a(),d.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;i.splice(1,0,s,"color: inherit");let n=0,o=0;i[0].replace(/%[a-zA-Z%]/g,t=>{t!=="%%"&&(n++,t==="%c"&&(o=n))}),i.splice(o,0,s)}d.log=console.debug||console.log||(()=>{});function c(i){try{i?d.storage.setItem("debug",i):d.storage.removeItem("debug")}catch{}}function l(){let i;try{i=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function a(){try{return localStorage}catch{}}r.exports=bl()(d);const{formatters:f}=r.exports;f.j=function(i){try{return JSON.stringify(i)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Rr,Rr.exports)),Rr.exports}var br={exports:{}},bn,io;function Tc(){return io||(io=1,bn=(r,d=process.argv)=>{const h=r.startsWith("-")?"":r.length===1?"-":"--",u=d.indexOf(h+r),c=d.indexOf("--");return u!==-1&&(c===-1||u<c)}),bn}var On,ao;function Cc(){if(ao)return On;ao=1;const r=Lr,d=Al,h=Tc(),{env:u}=process;let c;h("no-color")||h("no-colors")||h("color=false")||h("color=never")?c=0:(h("color")||h("colors")||h("color=true")||h("color=always"))&&(c=1),"FORCE_COLOR"in u&&(u.FORCE_COLOR==="true"?c=1:u.FORCE_COLOR==="false"?c=0:c=u.FORCE_COLOR.length===0?1:Math.min(parseInt(u.FORCE_COLOR,10),3));function l(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function a(i,s){if(c===0)return 0;if(h("color=16m")||h("color=full")||h("color=truecolor"))return 3;if(h("color=256"))return 2;if(i&&!s&&c===void 0)return 0;const n=c||0;if(u.TERM==="dumb")return n;if(process.platform==="win32"){const o=r.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in u)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in u)||u.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in u)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(u.TEAMCITY_VERSION)?1:0;if(u.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in u){const o=parseInt((u.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(u.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(u.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(u.TERM)||"COLORTERM"in u?1:n}function f(i){const s=a(i,i&&i.isTTY);return l(s)}return On={supportsColor:f,stdout:l(a(!0,d.isatty(1))),stderr:l(a(!0,d.isatty(2)))},On}var oo;function Rc(){return oo||(oo=1,(function(r,d){const h=Al,u=Wi;d.init=n,d.log=f,d.formatArgs=l,d.save=i,d.load=s,d.useColors=c,d.destroy=u.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const t=Cc();t&&(t.stderr||t).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,m)=>{const v=m.substring(6).toLowerCase().replace(/_([a-z])/g,(p,T)=>T.toUpperCase());let y=process.env[m];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),t[v]=y,t},{});function c(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:h.isatty(process.stderr.fd)}function l(t){const{namespace:m,useColors:v}=this;if(v){const y=this.color,p="\x1B[3"+(y<8?y:"8;5;"+y),T=`  ${p};1m${m} \x1B[0m`;t[0]=T+t[0].split(`
`).join(`
`+T),t.push(p+"m+"+r.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=a()+m+" "+t[0]}function a(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function f(...t){return process.stderr.write(u.formatWithOptions(d.inspectOpts,...t)+`
`)}function i(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function s(){return process.env.DEBUG}function n(t){t.inspectOpts={};const m=Object.keys(d.inspectOpts);for(let v=0;v<m.length;v++)t.inspectOpts[m[v]]=d.inspectOpts[m[v]]}r.exports=bl()(d);const{formatters:o}=r.exports;o.o=function(t){return this.inspectOpts.colors=this.useColors,u.inspect(t,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},o.O=function(t){return this.inspectOpts.colors=this.useColors,u.inspect(t,this.inspectOpts)}})(br,br.exports)),br.exports}var so;function bc(){return so||(so=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Cr.exports=Ac():Cr.exports=Rc()),Cr.exports}var Ht={},lo;function Ol(){if(lo)return Ht;lo=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.ProgressCallbackTransform=void 0;const r=cr;let d=class extends r.Transform{constructor(u,c,l){super(),this.total=u,this.cancellationToken=c,this.onProgress=l,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(u,c,l){if(this.cancellationToken.cancelled){l(new Error("cancelled"),null);return}this.transferred+=u.length,this.delta+=u.length;const a=Date.now();a>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=a+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((a-this.start)/1e3))}),this.delta=0),l(null,u)}_flush(u){if(this.cancellationToken.cancelled){u(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,u(null)}};return Ht.ProgressCallbackTransform=d,Ht}var uo;function Oc(){if(uo)return Me;uo=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.DigestTransform=Me.HttpExecutor=Me.HttpError=void 0,Me.createHttpError=s,Me.parseJson=t,Me.configureRequestOptionsFromUrl=v,Me.configureRequestUrl=y,Me.safeGetHeader=R,Me.configureRequestOptions=P,Me.safeStringifyJson=M;const r=fr,d=bc(),h=dt,u=cr,c=Ct,l=Xi(),a=$r(),f=Ol(),i=(0,d.default)("electron-builder");function s(C,w=null){return new o(C.statusCode||-1,`${C.statusCode} ${C.statusMessage}`+(w==null?"":`
`+JSON.stringify(w,null,"  "))+`
Headers: `+M(C.headers),w)}const n=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class o extends Error{constructor(w,S=`HTTP error: ${n.get(w)||w}`,E=null){super(S),this.statusCode=w,this.description=E,this.name="HttpError",this.code=`HTTP_ERROR_${w}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Me.HttpError=o;function t(C){return C.then(w=>w==null||w.length===0?null:JSON.parse(w))}class m{constructor(){this.maxRedirects=10}request(w,S=new l.CancellationToken,E){P(w);const $=E==null?void 0:JSON.stringify(E),U=$?Buffer.from($):void 0;if(U!=null){i($);const{headers:L,...q}=w;w={method:"post",headers:{"Content-Type":"application/json","Content-Length":U.length,...L},...q}}return this.doApiRequest(w,S,L=>L.end(U))}doApiRequest(w,S,E,$=0){return i.enabled&&i(`Request: ${M(w)}`),S.createPromise((U,L,q)=>{const D=this.createRequest(w,I=>{try{this.handleResponse(I,w,S,U,L,$,E)}catch(F){L(F)}});this.addErrorAndTimeoutHandlers(D,L,w.timeout),this.addRedirectHandlers(D,w,L,$,I=>{this.doApiRequest(I,S,E,$).then(U).catch(L)}),E(D,L),q(()=>D.abort())})}addRedirectHandlers(w,S,E,$,U){}addErrorAndTimeoutHandlers(w,S,E=60*1e3){this.addTimeOutHandler(w,S,E),w.on("error",S),w.on("aborted",()=>{S(new Error("Request has been aborted by the server"))})}handleResponse(w,S,E,$,U,L,q){var D;if(i.enabled&&i(`Response: ${w.statusCode} ${w.statusMessage}, request options: ${M(S)}`),w.statusCode===404){U(s(w,`method: ${S.method||"GET"} url: ${S.protocol||"https:"}//${S.hostname}${S.port?`:${S.port}`:""}${S.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(w.statusCode===204){$();return}const I=(D=w.statusCode)!==null&&D!==void 0?D:0,F=I>=300&&I<400,k=R(w,"location");if(F&&k!=null){if(L>this.maxRedirects){U(this.createMaxRedirectError());return}this.doApiRequest(m.prepareRedirectUrlOptions(k,S),E,q,L).then($).catch(U);return}w.setEncoding("utf8");let J="";w.on("error",U),w.on("data",W=>J+=W),w.on("end",()=>{try{if(w.statusCode!=null&&w.statusCode>=400){const W=R(w,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(ce=>ce.includes("json"))!=null:W.includes("json"));U(s(w,`method: ${S.method||"GET"} url: ${S.protocol||"https:"}//${S.hostname}${S.port?`:${S.port}`:""}${S.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(J)):J}
          `))}else $(J.length===0?null:J)}catch(W){U(W)}})}async downloadToBuffer(w,S){return await S.cancellationToken.createPromise((E,$,U)=>{const L=[],q={headers:S.headers||void 0,redirect:"manual"};y(w,q),P(q),this.doDownload(q,{destination:null,options:S,onCancel:U,callback:D=>{D==null?E(Buffer.concat(L)):$(D)},responseHandler:(D,I)=>{let F=0;D.on("data",k=>{if(F+=k.length,F>524288e3){I(new Error("Maximum allowed size is 500 MB"));return}L.push(k)}),D.on("end",()=>{I(null)})}},0)})}doDownload(w,S,E){const $=this.createRequest(w,U=>{if(U.statusCode>=400){S.callback(new Error(`Cannot download "${w.protocol||"https:"}//${w.hostname}${w.path}", status ${U.statusCode}: ${U.statusMessage}`));return}U.on("error",S.callback);const L=R(U,"location");if(L!=null){E<this.maxRedirects?this.doDownload(m.prepareRedirectUrlOptions(L,w),S,E++):S.callback(this.createMaxRedirectError());return}S.responseHandler==null?O(S,U):S.responseHandler(U,S.callback)});this.addErrorAndTimeoutHandlers($,S.callback,w.timeout),this.addRedirectHandlers($,w,S.callback,E,U=>{this.doDownload(U,S,E++)}),$.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(w,S,E){w.on("socket",$=>{$.setTimeout(E,()=>{w.abort(),S(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(w,S){const E=v(w,{...S}),$=E.headers;if($?.authorization){const U=new c.URL(w);(U.hostname.endsWith(".amazonaws.com")||U.searchParams.has("X-Amz-Credential"))&&delete $.authorization}return E}static retryOnServerError(w,S=3){for(let E=0;;E++)try{return w()}catch($){if(E<S&&($ instanceof o&&$.isServerError()||$.code==="EPIPE"))continue;throw $}}}Me.HttpExecutor=m;function v(C,w){const S=P(w);return y(new c.URL(C),S),S}function y(C,w){w.protocol=C.protocol,w.hostname=C.hostname,C.port?w.port=C.port:w.port&&delete w.port,w.path=C.pathname+C.search}class p extends u.Transform{get actual(){return this._actual}constructor(w,S="sha512",E="base64"){super(),this.expected=w,this.algorithm=S,this.encoding=E,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,r.createHash)(S)}_transform(w,S,E){this.digester.update(w),E(null,w)}_flush(w){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(S){w(S);return}w(null)}validate(){if(this._actual==null)throw(0,a.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,a.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Me.DigestTransform=p;function T(C,w,S){return C!=null&&w!=null&&C!==w?(S(new Error(`checksum mismatch: expected ${w} but got ${C} (X-Checksum-Sha2 header)`)),!1):!0}function R(C,w){const S=C.headers[w];return S==null?null:Array.isArray(S)?S.length===0?null:S[S.length-1]:S}function O(C,w){if(!T(R(w,"X-Checksum-Sha2"),C.options.sha2,C.callback))return;const S=[];if(C.options.onProgress!=null){const L=R(w,"content-length");L!=null&&S.push(new f.ProgressCallbackTransform(parseInt(L,10),C.options.cancellationToken,C.options.onProgress))}const E=C.options.sha512;E!=null?S.push(new p(E,"sha512",E.length===128&&!E.includes("+")&&!E.includes("Z")&&!E.includes("=")?"hex":"base64")):C.options.sha2!=null&&S.push(new p(C.options.sha2,"sha256","hex"));const $=(0,h.createWriteStream)(C.destination);S.push($);let U=w;for(const L of S)L.on("error",q=>{$.close(),C.options.cancellationToken.cancelled||C.callback(q)}),U=U.pipe(L);$.on("finish",()=>{$.close(C.callback)})}function P(C,w,S){S!=null&&(C.method=S),C.headers={...C.headers};const E=C.headers;return w!=null&&(E.authorization=w.startsWith("Basic")||w.startsWith("Bearer")?w:`token ${w}`),E["User-Agent"]==null&&(E["User-Agent"]="electron-builder"),(S==null||S==="GET"||E["Cache-Control"]==null)&&(E["Cache-Control"]="no-cache"),C.protocol==null&&process.versions.electron!=null&&(C.protocol="https:"),C}function M(C,w){return JSON.stringify(C,(S,E)=>S.endsWith("Authorization")||S.endsWith("authorization")||S.endsWith("Password")||S.endsWith("PASSWORD")||S.endsWith("Token")||S.includes("password")||S.includes("token")||w!=null&&w.has(S)?"<stripped sensitive data>":E,2)}return Me}var jt={},co;function Pc(){if(co)return jt;co=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.MemoLazy=void 0;let r=class{constructor(u,c){this.selector=u,this.creator=c,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const u=this.selector();if(this._value!==void 0&&d(this.selected,u))return this._value;this.selected=u;const c=this.creator(u);return this.value=c,c}set value(u){this._value=u}};jt.MemoLazy=r;function d(h,u){if(typeof h=="object"&&h!==null&&(typeof u=="object"&&u!==null)){const a=Object.keys(h),f=Object.keys(u);return a.length===f.length&&a.every(i=>d(h[i],u[i]))}return h===u}return jt}var Gt={},fo;function Ic(){if(fo)return Gt;fo=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.githubUrl=r,Gt.getS3LikeProviderBaseUrl=d;function r(l,a="github.com"){return`${l.protocol||"https"}://${l.host||a}`}function d(l){const a=l.provider;if(a==="s3")return h(l);if(a==="spaces")return c(l);throw new Error(`Not supported provider: ${a}`)}function h(l){let a;if(l.accelerate==!0)a=`https://${l.bucket}.s3-accelerate.amazonaws.com`;else if(l.endpoint!=null)a=`${l.endpoint}/${l.bucket}`;else if(l.bucket.includes(".")){if(l.region==null)throw new Error(`Bucket name "${l.bucket}" includes a dot, but S3 region is missing`);l.region==="us-east-1"?a=`https://s3.amazonaws.com/${l.bucket}`:a=`https://s3-${l.region}.amazonaws.com/${l.bucket}`}else l.region==="cn-north-1"?a=`https://${l.bucket}.s3.${l.region}.amazonaws.com.cn`:a=`https://${l.bucket}.s3.amazonaws.com`;return u(a,l.path)}function u(l,a){return a!=null&&a.length>0&&(a.startsWith("/")||(l+="/"),l+=a),l}function c(l){if(l.name==null)throw new Error("name is missing");if(l.region==null)throw new Error("region is missing");return u(`https://${l.name}.${l.region}.digitaloceanspaces.com`,l.path)}return Gt}var Or={},ho;function Dc(){if(ho)return Or;ho=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.retry=d;const r=Xi();async function d(h,u,c,l=0,a=0,f){var i;const s=new r.CancellationToken;try{return await h()}catch(n){if((!((i=f?.(n))!==null&&i!==void 0)||i)&&u>0&&!s.cancelled)return await new Promise(o=>setTimeout(o,c+l*a)),await d(h,u-1,c,l,a+1,f);throw n}}return Or}var Pr={},po;function Nc(){if(po)return Pr;po=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.parseDn=r;function r(d){let h=!1,u=null,c="",l=0;d=d.trim();const a=new Map;for(let f=0;f<=d.length;f++){if(f===d.length){u!==null&&a.set(u,c);break}const i=d[f];if(h){if(i==='"'){h=!1;continue}}else{if(i==='"'){h=!0;continue}if(i==="\\"){f++;const s=parseInt(d.slice(f,f+2),16);Number.isNaN(s)?c+=d[f]:(f++,c+=String.fromCharCode(s));continue}if(u===null&&i==="="){u=c,c="";continue}if(i===","||i===";"||i==="+"){u!==null&&a.set(u,c),u=null,c="";continue}}if(i===" "&&!h){if(c.length===0)continue;if(f>l){let s=f;for(;d[s]===" ";)s++;l=s}if(l>=d.length||d[l]===","||d[l]===";"||u===null&&d[l]==="="||u!==null&&d[l]==="+"){f=l-1;continue}}c+=i}return a}return Pr}var At={},mo;function Fc(){if(mo)return At;mo=1,Object.defineProperty(At,"__esModule",{value:!0}),At.nil=At.UUID=void 0;const r=fr,d=$r(),h="options.name must be either a string or a Buffer",u=(0,r.randomBytes)(16);u[0]=u[0]|1;const c={},l=[];for(let o=0;o<256;o++){const t=(o+256).toString(16).substr(1);c[t]=o,l[o]=t}class a{constructor(t){this.ascii=null,this.binary=null;const m=a.check(t);if(!m)throw new Error("not a UUID");this.version=m.version,m.format==="ascii"?this.ascii=t:this.binary=t}static v5(t,m){return s(t,"sha1",80,m)}toString(){return this.ascii==null&&(this.ascii=n(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(t,m=0){if(typeof t=="string")return t=t.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(t)?t==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(c[t[14]+t[15]]&240)>>4,variant:f((c[t[19]+t[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(t)){if(t.length<m+16)return!1;let v=0;for(;v<16&&t[m+v]===0;v++);return v===16?{version:void 0,variant:"nil",format:"binary"}:{version:(t[m+6]&240)>>4,variant:f((t[m+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(t){const m=Buffer.allocUnsafe(16);let v=0;for(let y=0;y<16;y++)m[y]=c[t[v++]+t[v++]],(y===3||y===5||y===7||y===9)&&(v+=1);return m}}At.UUID=a,a.OID=a.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function f(o){switch(o){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var i;(function(o){o[o.ASCII=0]="ASCII",o[o.BINARY=1]="BINARY",o[o.OBJECT=2]="OBJECT"})(i||(i={}));function s(o,t,m,v,y=i.ASCII){const p=(0,r.createHash)(t);if(typeof o!="string"&&!Buffer.isBuffer(o))throw(0,d.newError)(h,"ERR_INVALID_UUID_NAME");p.update(v),p.update(o);const R=p.digest();let O;switch(y){case i.BINARY:R[6]=R[6]&15|m,R[8]=R[8]&63|128,O=R;break;case i.OBJECT:R[6]=R[6]&15|m,R[8]=R[8]&63|128,O=new a(R);break;default:O=l[R[0]]+l[R[1]]+l[R[2]]+l[R[3]]+"-"+l[R[4]]+l[R[5]]+"-"+l[R[6]&15|m]+l[R[7]]+"-"+l[R[8]&63|128]+l[R[9]]+"-"+l[R[10]]+l[R[11]]+l[R[12]]+l[R[13]]+l[R[14]]+l[R[15]];break}return O}function n(o){return l[o[0]]+l[o[1]]+l[o[2]]+l[o[3]]+"-"+l[o[4]]+l[o[5]]+"-"+l[o[6]]+l[o[7]]+"-"+l[o[8]]+l[o[9]]+"-"+l[o[10]]+l[o[11]]+l[o[12]]+l[o[13]]+l[o[14]]+l[o[15]]}return At.nil=new a("00000000-0000-0000-0000-000000000000"),At}var Dt={},Pn={},go;function xc(){return go||(go=1,(function(r){(function(d){d.parser=function(A,g){return new u(A,g)},d.SAXParser=u,d.SAXStream=n,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function u(A,g){if(!(this instanceof u))return new u(A,g);var H=this;l(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=g||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!A,H.noscript=!!(A||H.opt.noscript),H.state=E.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!A),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),U(H,"onready")}Object.create||(Object.create=function(A){function g(){}g.prototype=A;var H=new g;return H}),Object.keys||(Object.keys=function(A){var g=[];for(var H in A)A.hasOwnProperty(H)&&g.push(H);return g});function c(A){for(var g=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,N=0,le=h.length;N<le;N++){var me=A[h[N]].length;if(me>g)switch(h[N]){case"textNode":q(A);break;case"cdata":L(A,"oncdata",A.cdata),A.cdata="";break;case"script":L(A,"onscript",A.script),A.script="";break;default:I(A,"Max buffer length exceeded: "+h[N])}H=Math.max(H,me)}var pe=d.MAX_BUFFER_LENGTH-H;A.bufferCheckPosition=pe+A.position}function l(A){for(var g=0,H=h.length;g<H;g++)A[h[g]]=""}function a(A){q(A),A.cdata!==""&&(L(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(L(A,"onscript",A.script),A.script="")}u.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var f;try{f=require("stream").Stream}catch{f=function(){}}f||(f=function(){});var i=d.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function s(A,g){return new n(A,g)}function n(A,g){if(!(this instanceof n))return new n(A,g);f.apply(this),this._parser=new u(A,g),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(N){H.emit("error",N),H._parser.error=null},this._decoder=null,i.forEach(function(N){Object.defineProperty(H,"on"+N,{get:function(){return H._parser["on"+N]},set:function(le){if(!le)return H.removeAllListeners(N),H._parser["on"+N]=le,le;H.on(N,le)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(f.prototype,{constructor:{value:n}}),n.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var g=Ju.StringDecoder;this._decoder=new g("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},n.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},n.prototype.on=function(A,g){var H=this;return!H._parser["on"+A]&&i.indexOf(A)!==-1&&(H._parser["on"+A]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,A),H.emit.apply(H,N)}),f.prototype.on.call(H,A,g)};var o="[CDATA[",t="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:v},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function P(A){return A===" "||A===`
`||A==="\r"||A==="	"}function M(A){return A==='"'||A==="'"}function C(A){return A===">"||P(A)}function w(A,g){return A.test(g)}function S(A,g){return!w(A,g)}var E=0;d.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(A){var g=d.ENTITIES[A],H=typeof g=="number"?String.fromCharCode(g):g;d.ENTITIES[A]=H});for(var $ in d.STATE)d.STATE[d.STATE[$]]=$;E=d.STATE;function U(A,g,H){A[g]&&A[g](H)}function L(A,g,H){A.textNode&&q(A),U(A,g,H)}function q(A){A.textNode=D(A.opt,A.textNode),A.textNode&&U(A,"ontext",A.textNode),A.textNode=""}function D(A,g){return A.trim&&(g=g.trim()),A.normalize&&(g=g.replace(/\s+/g," ")),g}function I(A,g){return q(A),A.trackPosition&&(g+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),g=new Error(g),A.error=g,U(A,"onerror",g),A}function F(A){return A.sawRoot&&!A.closedRoot&&k(A,"Unclosed root tag"),A.state!==E.BEGIN&&A.state!==E.BEGIN_WHITESPACE&&A.state!==E.TEXT&&I(A,"Unexpected end"),q(A),A.c="",A.closed=!0,U(A,"onend"),u.call(A,A.strict,A.opt),A}function k(A,g){if(typeof A!="object"||!(A instanceof u))throw new Error("bad call to strictFail");A.strict&&I(A,g)}function J(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var g=A.tags[A.tags.length-1]||A,H=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(H.ns=g.ns),A.attribList.length=0,L(A,"onopentagstart",H)}function W(A,g){var H=A.indexOf(":"),N=H<0?["",A]:A.split(":"),le=N[0],me=N[1];return g&&A==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var g=W(A.attribName,!0),H=g.prefix,N=g.local;if(H==="xmlns")if(N==="xml"&&A.attribValue!==m)k(A,"xml: prefix must be bound to "+m+`
Actual: `+A.attribValue);else if(N==="xmlns"&&A.attribValue!==v)k(A,"xmlns: prefix must be bound to "+v+`
Actual: `+A.attribValue);else{var le=A.tag,me=A.tags[A.tags.length-1]||A;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[N]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,L(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function ce(A,g){if(A.opt.xmlns){var H=A.tag,N=W(A.tagName);H.prefix=N.prefix,H.local=N.local,H.uri=H.ns[N.prefix]||"",H.prefix&&!H.uri&&(k(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),H.uri=N.prefix);var le=A.tags[A.tags.length-1]||A;H.ns&&le.ns!==H.ns&&Object.keys(H.ns).forEach(function(B){L(A,"onopennamespace",{prefix:B,uri:H.ns[B]})});for(var me=0,pe=A.attribList.length;me<pe;me++){var _e=A.attribList[me],ye=_e[0],Fe=_e[1],Re=W(ye,!0),ke=Re.prefix,pt=Re.local,rt=ke===""?"":H.ns[ke]||"",e={name:ye,value:Fe,prefix:ke,local:pt,uri:rt};ke&&ke!=="xmlns"&&!rt&&(k(A,"Unbound namespace prefix: "+JSON.stringify(ke)),e.uri=ke),A.tag.attributes[ye]=e,L(A,"onattribute",e)}A.attribList.length=0}A.tag.isSelfClosing=!!g,A.sawRoot=!0,A.tags.push(A.tag),L(A,"onopentag",A.tag),g||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=E.SCRIPT:A.state=E.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function ue(A){if(!A.tagName){k(A,"Weird empty close tag."),A.textNode+="</>",A.state=E.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=E.SCRIPT;return}L(A,"onscript",A.script),A.script=""}var g=A.tags.length,H=A.tagName;A.strict||(H=H[A.looseCase]());for(var N=H;g--;){var le=A.tags[g];if(le.name!==N)k(A,"Unexpected close tag");else break}if(g<0){k(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=E.TEXT;return}A.tagName=H;for(var me=A.tags.length;me-- >g;){var pe=A.tag=A.tags.pop();A.tagName=A.tag.name,L(A,"onclosetag",A.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var Fe=A.tags[A.tags.length-1]||A;A.opt.xmlns&&pe.ns!==Fe.ns&&Object.keys(pe.ns).forEach(function(Re){var ke=pe.ns[Re];L(A,"onclosenamespace",{prefix:Re,uri:ke})})}g===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=E.TEXT}function ie(A){var g=A.entity,H=g.toLowerCase(),N,le="";return A.ENTITIES[g]?A.ENTITIES[g]:A.ENTITIES[H]?A.ENTITIES[H]:(g=H,g.charAt(0)==="#"&&(g.charAt(1)==="x"?(g=g.slice(2),N=parseInt(g,16),le=N.toString(16)):(g=g.slice(1),N=parseInt(g,10),le=N.toString(10))),g=g.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==g?(k(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(N))}function Ae(A,g){g==="<"?(A.state=E.OPEN_WAKA,A.startTagPosition=A.position):P(g)||(k(A,"Non-whitespace before first tag."),A.textNode=g,A.state=E.TEXT)}function K(A,g){var H="";return g<A.length&&(H=A.charAt(g)),H}function Ee(A){var g=this;if(this.error)throw this.error;if(g.closed)return I(g,"Cannot write after close. Assign an onready handler.");if(A===null)return F(g);typeof A=="object"&&(A=A.toString());for(var H=0,N="";N=K(A,H++),g.c=N,!!N;)switch(g.trackPosition&&(g.position++,N===`
`?(g.line++,g.column=0):g.column++),g.state){case E.BEGIN:if(g.state=E.BEGIN_WHITESPACE,N==="\uFEFF")continue;Ae(g,N);continue;case E.BEGIN_WHITESPACE:Ae(g,N);continue;case E.TEXT:if(g.sawRoot&&!g.closedRoot){for(var le=H-1;N&&N!=="<"&&N!=="&";)N=K(A,H++),N&&g.trackPosition&&(g.position++,N===`
`?(g.line++,g.column=0):g.column++);g.textNode+=A.substring(le,H-1)}N==="<"&&!(g.sawRoot&&g.closedRoot&&!g.strict)?(g.state=E.OPEN_WAKA,g.startTagPosition=g.position):(!P(N)&&(!g.sawRoot||g.closedRoot)&&k(g,"Text data outside of root node."),N==="&"?g.state=E.TEXT_ENTITY:g.textNode+=N);continue;case E.SCRIPT:N==="<"?g.state=E.SCRIPT_ENDING:g.script+=N;continue;case E.SCRIPT_ENDING:N==="/"?g.state=E.CLOSE_TAG:(g.script+="<"+N,g.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(N==="!")g.state=E.SGML_DECL,g.sgmlDecl="";else if(!P(N))if(w(p,N))g.state=E.OPEN_TAG,g.tagName=N;else if(N==="/")g.state=E.CLOSE_TAG,g.tagName="";else if(N==="?")g.state=E.PROC_INST,g.procInstName=g.procInstBody="";else{if(k(g,"Unencoded <"),g.startTagPosition+1<g.position){var me=g.position-g.startTagPosition;N=new Array(me).join(" ")+N}g.textNode+="<"+N,g.state=E.TEXT}continue;case E.SGML_DECL:if(g.sgmlDecl+N==="--"){g.state=E.COMMENT,g.comment="",g.sgmlDecl="";continue}g.doctype&&g.doctype!==!0&&g.sgmlDecl?(g.state=E.DOCTYPE_DTD,g.doctype+="<!"+g.sgmlDecl+N,g.sgmlDecl=""):(g.sgmlDecl+N).toUpperCase()===o?(L(g,"onopencdata"),g.state=E.CDATA,g.sgmlDecl="",g.cdata=""):(g.sgmlDecl+N).toUpperCase()===t?(g.state=E.DOCTYPE,(g.doctype||g.sawRoot)&&k(g,"Inappropriately located doctype declaration"),g.doctype="",g.sgmlDecl=""):N===">"?(L(g,"onsgmldeclaration",g.sgmlDecl),g.sgmlDecl="",g.state=E.TEXT):(M(N)&&(g.state=E.SGML_DECL_QUOTED),g.sgmlDecl+=N);continue;case E.SGML_DECL_QUOTED:N===g.q&&(g.state=E.SGML_DECL,g.q=""),g.sgmlDecl+=N;continue;case E.DOCTYPE:N===">"?(g.state=E.TEXT,L(g,"ondoctype",g.doctype),g.doctype=!0):(g.doctype+=N,N==="["?g.state=E.DOCTYPE_DTD:M(N)&&(g.state=E.DOCTYPE_QUOTED,g.q=N));continue;case E.DOCTYPE_QUOTED:g.doctype+=N,N===g.q&&(g.q="",g.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:N==="]"?(g.doctype+=N,g.state=E.DOCTYPE):N==="<"?(g.state=E.OPEN_WAKA,g.startTagPosition=g.position):M(N)?(g.doctype+=N,g.state=E.DOCTYPE_DTD_QUOTED,g.q=N):g.doctype+=N;continue;case E.DOCTYPE_DTD_QUOTED:g.doctype+=N,N===g.q&&(g.state=E.DOCTYPE_DTD,g.q="");continue;case E.COMMENT:N==="-"?g.state=E.COMMENT_ENDING:g.comment+=N;continue;case E.COMMENT_ENDING:N==="-"?(g.state=E.COMMENT_ENDED,g.comment=D(g.opt,g.comment),g.comment&&L(g,"oncomment",g.comment),g.comment=""):(g.comment+="-"+N,g.state=E.COMMENT);continue;case E.COMMENT_ENDED:N!==">"?(k(g,"Malformed comment"),g.comment+="--"+N,g.state=E.COMMENT):g.doctype&&g.doctype!==!0?g.state=E.DOCTYPE_DTD:g.state=E.TEXT;continue;case E.CDATA:N==="]"?g.state=E.CDATA_ENDING:g.cdata+=N;continue;case E.CDATA_ENDING:N==="]"?g.state=E.CDATA_ENDING_2:(g.cdata+="]"+N,g.state=E.CDATA);continue;case E.CDATA_ENDING_2:N===">"?(g.cdata&&L(g,"oncdata",g.cdata),L(g,"onclosecdata"),g.cdata="",g.state=E.TEXT):N==="]"?g.cdata+="]":(g.cdata+="]]"+N,g.state=E.CDATA);continue;case E.PROC_INST:N==="?"?g.state=E.PROC_INST_ENDING:P(N)?g.state=E.PROC_INST_BODY:g.procInstName+=N;continue;case E.PROC_INST_BODY:if(!g.procInstBody&&P(N))continue;N==="?"?g.state=E.PROC_INST_ENDING:g.procInstBody+=N;continue;case E.PROC_INST_ENDING:N===">"?(L(g,"onprocessinginstruction",{name:g.procInstName,body:g.procInstBody}),g.procInstName=g.procInstBody="",g.state=E.TEXT):(g.procInstBody+="?"+N,g.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:w(T,N)?g.tagName+=N:(J(g),N===">"?ce(g):N==="/"?g.state=E.OPEN_TAG_SLASH:(P(N)||k(g,"Invalid character in tag name"),g.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:N===">"?(ce(g,!0),ue(g)):(k(g,"Forward-slash in opening tag not followed by >"),g.state=E.ATTRIB);continue;case E.ATTRIB:if(P(N))continue;N===">"?ce(g):N==="/"?g.state=E.OPEN_TAG_SLASH:w(p,N)?(g.attribName=N,g.attribValue="",g.state=E.ATTRIB_NAME):k(g,"Invalid attribute name");continue;case E.ATTRIB_NAME:N==="="?g.state=E.ATTRIB_VALUE:N===">"?(k(g,"Attribute without value"),g.attribValue=g.attribName,ne(g),ce(g)):P(N)?g.state=E.ATTRIB_NAME_SAW_WHITE:w(T,N)?g.attribName+=N:k(g,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(N==="=")g.state=E.ATTRIB_VALUE;else{if(P(N))continue;k(g,"Attribute without value"),g.tag.attributes[g.attribName]="",g.attribValue="",L(g,"onattribute",{name:g.attribName,value:""}),g.attribName="",N===">"?ce(g):w(p,N)?(g.attribName=N,g.state=E.ATTRIB_NAME):(k(g,"Invalid attribute name"),g.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(P(N))continue;M(N)?(g.q=N,g.state=E.ATTRIB_VALUE_QUOTED):(g.opt.unquotedAttributeValues||I(g,"Unquoted attribute value"),g.state=E.ATTRIB_VALUE_UNQUOTED,g.attribValue=N);continue;case E.ATTRIB_VALUE_QUOTED:if(N!==g.q){N==="&"?g.state=E.ATTRIB_VALUE_ENTITY_Q:g.attribValue+=N;continue}ne(g),g.q="",g.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:P(N)?g.state=E.ATTRIB:N===">"?ce(g):N==="/"?g.state=E.OPEN_TAG_SLASH:w(p,N)?(k(g,"No whitespace between attributes"),g.attribName=N,g.attribValue="",g.state=E.ATTRIB_NAME):k(g,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!C(N)){N==="&"?g.state=E.ATTRIB_VALUE_ENTITY_U:g.attribValue+=N;continue}ne(g),N===">"?ce(g):g.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(g.tagName)N===">"?ue(g):w(T,N)?g.tagName+=N:g.script?(g.script+="</"+g.tagName,g.tagName="",g.state=E.SCRIPT):(P(N)||k(g,"Invalid tagname in closing tag"),g.state=E.CLOSE_TAG_SAW_WHITE);else{if(P(N))continue;S(p,N)?g.script?(g.script+="</"+N,g.state=E.SCRIPT):k(g,"Invalid tagname in closing tag."):g.tagName=N}continue;case E.CLOSE_TAG_SAW_WHITE:if(P(N))continue;N===">"?ue(g):k(g,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(g.state){case E.TEXT_ENTITY:pe=E.TEXT,_e="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:pe=E.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:pe=E.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(N===";"){var ye=ie(g);g.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(ye)?(g.entity="",g.state=pe,g.write(ye)):(g[_e]+=ye,g.entity="",g.state=pe)}else w(g.entity.length?O:R,N)?g.entity+=N:(k(g,"Invalid character in entity name"),g[_e]+="&"+g.entity+N,g.entity="",g.state=pe);continue;default:throw new Error(g,"Unknown state: "+g.state)}return g.position>=g.bufferCheckPosition&&c(g),g}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var A=String.fromCharCode,g=Math.floor,H=function(){var N=16384,le=[],me,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var Fe="";++_e<ye;){var Re=Number(arguments[_e]);if(!isFinite(Re)||Re<0||Re>1114111||g(Re)!==Re)throw RangeError("Invalid code point: "+Re);Re<=65535?le.push(Re):(Re-=65536,me=(Re>>10)+55296,pe=Re%1024+56320,le.push(me,pe)),(_e+1===ye||le.length>N)&&(Fe+=A.apply(null,le),le.length=0)}return Fe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(r)})(Pn)),Pn}var vo;function Lc(){if(vo)return Dt;vo=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.XElement=void 0,Dt.parseXml=a;const r=xc(),d=$r();class h{constructor(i){if(this.name=i,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!i)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!c(i))throw(0,d.newError)(`Invalid element name: ${i}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(i){const s=this.attributes===null?null:this.attributes[i];if(s==null)throw(0,d.newError)(`No attribute "${i}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(i){this.attributes!==null&&delete this.attributes[i]}element(i,s=!1,n=null){const o=this.elementOrNull(i,s);if(o===null)throw(0,d.newError)(n||`No element "${i}"`,"ERR_XML_MISSED_ELEMENT");return o}elementOrNull(i,s=!1){if(this.elements===null)return null;for(const n of this.elements)if(l(n,i,s))return n;return null}getElements(i,s=!1){return this.elements===null?[]:this.elements.filter(n=>l(n,i,s))}elementValueOrEmpty(i,s=!1){const n=this.elementOrNull(i,s);return n===null?"":n.value}}Dt.XElement=h;const u=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function c(f){return u.test(f)}function l(f,i,s){const n=f.name;return n===i||s===!0&&n.length===i.length&&n.toLowerCase()===i.toLowerCase()}function a(f){let i=null;const s=r.parser(!0,{}),n=[];return s.onopentag=o=>{const t=new h(o.name);if(t.attributes=o.attributes,i===null)i=t;else{const m=n[n.length-1];m.elements==null&&(m.elements=[]),m.elements.push(t)}n.push(t)},s.onclosetag=()=>{n.pop()},s.ontext=o=>{n.length>0&&(n[n.length-1].value=o)},s.oncdata=o=>{const t=n[n.length-1];t.value=o,t.isCData=!0},s.onerror=o=>{throw o},s.write(f),i}return Dt}var Eo;function $e(){return Eo||(Eo=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CURRENT_APP_PACKAGE_FILE_NAME=r.CURRENT_APP_INSTALLER_FILE_NAME=r.XElement=r.parseXml=r.UUID=r.parseDn=r.retry=r.githubUrl=r.getS3LikeProviderBaseUrl=r.ProgressCallbackTransform=r.MemoLazy=r.safeStringifyJson=r.safeGetHeader=r.parseJson=r.HttpExecutor=r.HttpError=r.DigestTransform=r.createHttpError=r.configureRequestUrl=r.configureRequestOptionsFromUrl=r.configureRequestOptions=r.newError=r.CancellationToken=r.CancellationError=void 0,r.asArray=o;var d=Xi();Object.defineProperty(r,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var h=$r();Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return h.newError}});var u=Oc();Object.defineProperty(r,"configureRequestOptions",{enumerable:!0,get:function(){return u.configureRequestOptions}}),Object.defineProperty(r,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return u.configureRequestOptionsFromUrl}}),Object.defineProperty(r,"configureRequestUrl",{enumerable:!0,get:function(){return u.configureRequestUrl}}),Object.defineProperty(r,"createHttpError",{enumerable:!0,get:function(){return u.createHttpError}}),Object.defineProperty(r,"DigestTransform",{enumerable:!0,get:function(){return u.DigestTransform}}),Object.defineProperty(r,"HttpError",{enumerable:!0,get:function(){return u.HttpError}}),Object.defineProperty(r,"HttpExecutor",{enumerable:!0,get:function(){return u.HttpExecutor}}),Object.defineProperty(r,"parseJson",{enumerable:!0,get:function(){return u.parseJson}}),Object.defineProperty(r,"safeGetHeader",{enumerable:!0,get:function(){return u.safeGetHeader}}),Object.defineProperty(r,"safeStringifyJson",{enumerable:!0,get:function(){return u.safeStringifyJson}});var c=Pc();Object.defineProperty(r,"MemoLazy",{enumerable:!0,get:function(){return c.MemoLazy}});var l=Ol();Object.defineProperty(r,"ProgressCallbackTransform",{enumerable:!0,get:function(){return l.ProgressCallbackTransform}});var a=Ic();Object.defineProperty(r,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return a.getS3LikeProviderBaseUrl}}),Object.defineProperty(r,"githubUrl",{enumerable:!0,get:function(){return a.githubUrl}});var f=Dc();Object.defineProperty(r,"retry",{enumerable:!0,get:function(){return f.retry}});var i=Nc();Object.defineProperty(r,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var s=Fc();Object.defineProperty(r,"UUID",{enumerable:!0,get:function(){return s.UUID}});var n=Lc();Object.defineProperty(r,"parseXml",{enumerable:!0,get:function(){return n.parseXml}}),Object.defineProperty(r,"XElement",{enumerable:!0,get:function(){return n.XElement}}),r.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",r.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function o(t){return t==null?[]:Array.isArray(t)?t:[t]}})(Tn)),Tn}var Be={},Ir={},ut={},yo;function dr(){if(yo)return ut;yo=1;function r(a){return typeof a>"u"||a===null}function d(a){return typeof a=="object"&&a!==null}function h(a){return Array.isArray(a)?a:r(a)?[]:[a]}function u(a,f){var i,s,n,o;if(f)for(o=Object.keys(f),i=0,s=o.length;i<s;i+=1)n=o[i],a[n]=f[n];return a}function c(a,f){var i="",s;for(s=0;s<f;s+=1)i+=a;return i}function l(a){return a===0&&Number.NEGATIVE_INFINITY===1/a}return ut.isNothing=r,ut.isObject=d,ut.toArray=h,ut.repeat=c,ut.isNegativeZero=l,ut.extend=u,ut}var In,wo;function hr(){if(wo)return In;wo=1;function r(h,u){var c="",l=h.reason||"(unknown reason)";return h.mark?(h.mark.name&&(c+='in "'+h.mark.name+'" '),c+="("+(h.mark.line+1)+":"+(h.mark.column+1)+")",!u&&h.mark.snippet&&(c+=`

`+h.mark.snippet),l+" "+c):l}function d(h,u){Error.call(this),this.name="YAMLException",this.reason=h,this.mark=u,this.message=r(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(u){return this.name+": "+r(this,u)},In=d,In}var Dn,_o;function Uc(){if(_o)return Dn;_o=1;var r=dr();function d(c,l,a,f,i){var s="",n="",o=Math.floor(i/2)-1;return f-l>o&&(s=" ... ",l=f-o+s.length),a-f>o&&(n=" ...",a=f+o-n.length),{str:s+c.slice(l,a).replace(/\t/g,"")+n,pos:f-l+s.length}}function h(c,l){return r.repeat(" ",l-c.length)+c}function u(c,l){if(l=Object.create(l||null),!c.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var a=/\r?\n|\r|\0/g,f=[0],i=[],s,n=-1;s=a.exec(c.buffer);)i.push(s.index),f.push(s.index+s[0].length),c.position<=s.index&&n<0&&(n=f.length-2);n<0&&(n=f.length-1);var o="",t,m,v=Math.min(c.line+l.linesAfter,i.length).toString().length,y=l.maxLength-(l.indent+v+3);for(t=1;t<=l.linesBefore&&!(n-t<0);t++)m=d(c.buffer,f[n-t],i[n-t],c.position-(f[n]-f[n-t]),y),o=r.repeat(" ",l.indent)+h((c.line-t+1).toString(),v)+" | "+m.str+`
`+o;for(m=d(c.buffer,f[n],i[n],c.position,y),o+=r.repeat(" ",l.indent)+h((c.line+1).toString(),v)+" | "+m.str+`
`,o+=r.repeat("-",l.indent+v+3+m.pos)+`^
`,t=1;t<=l.linesAfter&&!(n+t>=i.length);t++)m=d(c.buffer,f[n+t],i[n+t],c.position-(f[n]-f[n+t]),y),o+=r.repeat(" ",l.indent)+h((c.line+t+1).toString(),v)+" | "+m.str+`
`;return o.replace(/\n$/,"")}return Dn=u,Dn}var Nn,So;function He(){if(So)return Nn;So=1;var r=hr(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h=["scalar","sequence","mapping"];function u(l){var a={};return l!==null&&Object.keys(l).forEach(function(f){l[f].forEach(function(i){a[String(i)]=f})}),a}function c(l,a){if(a=a||{},Object.keys(a).forEach(function(f){if(d.indexOf(f)===-1)throw new r('Unknown option "'+f+'" is met in definition of "'+l+'" YAML type.')}),this.options=a,this.tag=l,this.kind=a.kind||null,this.resolve=a.resolve||function(){return!0},this.construct=a.construct||function(f){return f},this.instanceOf=a.instanceOf||null,this.predicate=a.predicate||null,this.represent=a.represent||null,this.representName=a.representName||null,this.defaultStyle=a.defaultStyle||null,this.multi=a.multi||!1,this.styleAliases=u(a.styleAliases||null),h.indexOf(this.kind)===-1)throw new r('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}return Nn=c,Nn}var Fn,Ao;function Pl(){if(Ao)return Fn;Ao=1;var r=hr(),d=He();function h(l,a){var f=[];return l[a].forEach(function(i){var s=f.length;f.forEach(function(n,o){n.tag===i.tag&&n.kind===i.kind&&n.multi===i.multi&&(s=o)}),f[s]=i}),f}function u(){var l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},a,f;function i(s){s.multi?(l.multi[s.kind].push(s),l.multi.fallback.push(s)):l[s.kind][s.tag]=l.fallback[s.tag]=s}for(a=0,f=arguments.length;a<f;a+=1)arguments[a].forEach(i);return l}function c(l){return this.extend(l)}return c.prototype.extend=function(a){var f=[],i=[];if(a instanceof d)i.push(a);else if(Array.isArray(a))i=i.concat(a);else if(a&&(Array.isArray(a.implicit)||Array.isArray(a.explicit)))a.implicit&&(f=f.concat(a.implicit)),a.explicit&&(i=i.concat(a.explicit));else throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");f.forEach(function(n){if(!(n instanceof d))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(n){if(!(n instanceof d))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(c.prototype);return s.implicit=(this.implicit||[]).concat(f),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=h(s,"implicit"),s.compiledExplicit=h(s,"explicit"),s.compiledTypeMap=u(s.compiledImplicit,s.compiledExplicit),s},Fn=c,Fn}var xn,To;function Il(){if(To)return xn;To=1;var r=He();return xn=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),xn}var Ln,Co;function Dl(){if(Co)return Ln;Co=1;var r=He();return Ln=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),Ln}var Un,Ro;function Nl(){if(Ro)return Un;Ro=1;var r=He();return Un=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),Un}var $n,bo;function Fl(){if(bo)return $n;bo=1;var r=Pl();return $n=new r({explicit:[Il(),Dl(),Nl()]}),$n}var kn,Oo;function xl(){if(Oo)return kn;Oo=1;var r=He();function d(c){if(c===null)return!0;var l=c.length;return l===1&&c==="~"||l===4&&(c==="null"||c==="Null"||c==="NULL")}function h(){return null}function u(c){return c===null}return kn=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),kn}var qn,Po;function Ll(){if(Po)return qn;Po=1;var r=He();function d(c){if(c===null)return!1;var l=c.length;return l===4&&(c==="true"||c==="True"||c==="TRUE")||l===5&&(c==="false"||c==="False"||c==="FALSE")}function h(c){return c==="true"||c==="True"||c==="TRUE"}function u(c){return Object.prototype.toString.call(c)==="[object Boolean]"}return qn=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{lowercase:function(c){return c?"true":"false"},uppercase:function(c){return c?"TRUE":"FALSE"},camelcase:function(c){return c?"True":"False"}},defaultStyle:"lowercase"}),qn}var Mn,Io;function Ul(){if(Io)return Mn;Io=1;var r=dr(),d=He();function h(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function u(i){return 48<=i&&i<=55}function c(i){return 48<=i&&i<=57}function l(i){if(i===null)return!1;var s=i.length,n=0,o=!1,t;if(!s)return!1;if(t=i[n],(t==="-"||t==="+")&&(t=i[++n]),t==="0"){if(n+1===s)return!0;if(t=i[++n],t==="b"){for(n++;n<s;n++)if(t=i[n],t!=="_"){if(t!=="0"&&t!=="1")return!1;o=!0}return o&&t!=="_"}if(t==="x"){for(n++;n<s;n++)if(t=i[n],t!=="_"){if(!h(i.charCodeAt(n)))return!1;o=!0}return o&&t!=="_"}if(t==="o"){for(n++;n<s;n++)if(t=i[n],t!=="_"){if(!u(i.charCodeAt(n)))return!1;o=!0}return o&&t!=="_"}}if(t==="_")return!1;for(;n<s;n++)if(t=i[n],t!=="_"){if(!c(i.charCodeAt(n)))return!1;o=!0}return!(!o||t==="_")}function a(i){var s=i,n=1,o;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),o=s[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),s=s.slice(1),o=s[0]),s==="0")return 0;if(o==="0"){if(s[1]==="b")return n*parseInt(s.slice(2),2);if(s[1]==="x")return n*parseInt(s.slice(2),16);if(s[1]==="o")return n*parseInt(s.slice(2),8)}return n*parseInt(s,10)}function f(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!r.isNegativeZero(i)}return Mn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:l,construct:a,predicate:f,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Mn}var Bn,Do;function $l(){if(Do)return Bn;Do=1;var r=dr(),d=He(),h=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function u(i){return!(i===null||!h.test(i)||i[i.length-1]==="_")}function c(i){var s,n;return s=i.replace(/_/g,"").toLowerCase(),n=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:n*parseFloat(s,10)}var l=/^[-+]?[0-9]+e/;function a(i,s){var n;if(isNaN(i))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(i))return"-0.0";return n=i.toString(10),l.test(n)?n.replace("e",".e"):n}function f(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||r.isNegativeZero(i))}return Bn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:u,construct:c,predicate:f,represent:a,defaultStyle:"lowercase"}),Bn}var Hn,No;function kl(){return No||(No=1,Hn=Fl().extend({implicit:[xl(),Ll(),Ul(),$l()]})),Hn}var jn,Fo;function ql(){return Fo||(Fo=1,jn=kl()),jn}var Gn,xo;function Ml(){if(xo)return Gn;xo=1;var r=He(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function u(a){return a===null?!1:d.exec(a)!==null||h.exec(a)!==null}function c(a){var f,i,s,n,o,t,m,v=0,y=null,p,T,R;if(f=d.exec(a),f===null&&(f=h.exec(a)),f===null)throw new Error("Date resolve error");if(i=+f[1],s=+f[2]-1,n=+f[3],!f[4])return new Date(Date.UTC(i,s,n));if(o=+f[4],t=+f[5],m=+f[6],f[7]){for(v=f[7].slice(0,3);v.length<3;)v+="0";v=+v}return f[9]&&(p=+f[10],T=+(f[11]||0),y=(p*60+T)*6e4,f[9]==="-"&&(y=-y)),R=new Date(Date.UTC(i,s,n,o,t,m,v)),y&&R.setTime(R.getTime()-y),R}function l(a){return a.toISOString()}return Gn=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:u,construct:c,instanceOf:Date,represent:l}),Gn}var Wn,Lo;function Bl(){if(Lo)return Wn;Lo=1;var r=He();function d(h){return h==="<<"||h===null}return Wn=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),Wn}var Vn,Uo;function Hl(){if(Uo)return Vn;Uo=1;var r=He(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function h(a){if(a===null)return!1;var f,i,s=0,n=a.length,o=d;for(i=0;i<n;i++)if(f=o.indexOf(a.charAt(i)),!(f>64)){if(f<0)return!1;s+=6}return s%8===0}function u(a){var f,i,s=a.replace(/[\r\n=]/g,""),n=s.length,o=d,t=0,m=[];for(f=0;f<n;f++)f%4===0&&f&&(m.push(t>>16&255),m.push(t>>8&255),m.push(t&255)),t=t<<6|o.indexOf(s.charAt(f));return i=n%4*6,i===0?(m.push(t>>16&255),m.push(t>>8&255),m.push(t&255)):i===18?(m.push(t>>10&255),m.push(t>>2&255)):i===12&&m.push(t>>4&255),new Uint8Array(m)}function c(a){var f="",i=0,s,n,o=a.length,t=d;for(s=0;s<o;s++)s%3===0&&s&&(f+=t[i>>18&63],f+=t[i>>12&63],f+=t[i>>6&63],f+=t[i&63]),i=(i<<8)+a[s];return n=o%3,n===0?(f+=t[i>>18&63],f+=t[i>>12&63],f+=t[i>>6&63],f+=t[i&63]):n===2?(f+=t[i>>10&63],f+=t[i>>4&63],f+=t[i<<2&63],f+=t[64]):n===1&&(f+=t[i>>2&63],f+=t[i<<4&63],f+=t[64],f+=t[64]),f}function l(a){return Object.prototype.toString.call(a)==="[object Uint8Array]"}return Vn=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:h,construct:u,predicate:l,represent:c}),Vn}var Yn,$o;function jl(){if($o)return Yn;$o=1;var r=He(),d=Object.prototype.hasOwnProperty,h=Object.prototype.toString;function u(l){if(l===null)return!0;var a=[],f,i,s,n,o,t=l;for(f=0,i=t.length;f<i;f+=1){if(s=t[f],o=!1,h.call(s)!=="[object Object]")return!1;for(n in s)if(d.call(s,n))if(!o)o=!0;else return!1;if(!o)return!1;if(a.indexOf(n)===-1)a.push(n);else return!1}return!0}function c(l){return l!==null?l:[]}return Yn=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:u,construct:c}),Yn}var zn,ko;function Gl(){if(ko)return zn;ko=1;var r=He(),d=Object.prototype.toString;function h(c){if(c===null)return!0;var l,a,f,i,s,n=c;for(s=new Array(n.length),l=0,a=n.length;l<a;l+=1){if(f=n[l],d.call(f)!=="[object Object]"||(i=Object.keys(f),i.length!==1))return!1;s[l]=[i[0],f[i[0]]]}return!0}function u(c){if(c===null)return[];var l,a,f,i,s,n=c;for(s=new Array(n.length),l=0,a=n.length;l<a;l+=1)f=n[l],i=Object.keys(f),s[l]=[i[0],f[i[0]]];return s}return zn=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h,construct:u}),zn}var Xn,qo;function Wl(){if(qo)return Xn;qo=1;var r=He(),d=Object.prototype.hasOwnProperty;function h(c){if(c===null)return!0;var l,a=c;for(l in a)if(d.call(a,l)&&a[l]!==null)return!1;return!0}function u(c){return c!==null?c:{}}return Xn=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:h,construct:u}),Xn}var Kn,Mo;function Ki(){return Mo||(Mo=1,Kn=ql().extend({implicit:[Ml(),Bl()],explicit:[Hl(),jl(),Gl(),Wl()]})),Kn}var Bo;function $c(){if(Bo)return Ir;Bo=1;var r=dr(),d=hr(),h=Uc(),u=Ki(),c=Object.prototype.hasOwnProperty,l=1,a=2,f=3,i=4,s=1,n=2,o=3,t=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[\x85\u2028\u2029]/,v=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,p=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function T(e){return Object.prototype.toString.call(e)}function R(e){return e===10||e===13}function O(e){return e===9||e===32}function P(e){return e===9||e===32||e===10||e===13}function M(e){return e===44||e===91||e===93||e===123||e===125}function C(e){var B;return 48<=e&&e<=57?e-48:(B=e|32,97<=B&&B<=102?B-97+10:-1)}function w(e){return e===120?2:e===117?4:e===85?8:0}function S(e){return 48<=e&&e<=57?e-48:-1}function E(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function $(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var U=new Array(256),L=new Array(256),q=0;q<256;q++)U[q]=E(q)?1:0,L[q]=E(q);function D(e,B){this.input=e,this.filename=B.filename||null,this.schema=B.schema||u,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function I(e,B){var G={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return G.snippet=h(G),new d(B,G)}function F(e,B){throw I(e,B)}function k(e,B){e.onWarning&&e.onWarning.call(null,I(e,B))}var J={YAML:function(B,G,re){var V,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),V=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),V===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(V[1],10),Z=parseInt(V[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&k(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var V,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),V=re[0],te=re[1],y.test(V)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),c.call(B.tagMap,V)&&F(B,'there is a previously declared suffix for "'+V+'" tag handle'),p.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[V]=te}};function W(e,B,G,re){var V,te,Z,ae;if(B<G){if(ae=e.input.slice(B,G),re)for(V=0,te=ae.length;V<te;V+=1)Z=ae.charCodeAt(V),Z===9||32<=Z&&Z<=1114111||F(e,"expected valid JSON character");else t.test(ae)&&F(e,"the stream contains non-printable characters");e.result+=ae}}function ne(e,B,G,re){var V,te,Z,ae;for(r.isObject(G)||F(e,"cannot merge mappings; the provided source object is unacceptable"),V=Object.keys(G),Z=0,ae=V.length;Z<ae;Z+=1)te=V[Z],c.call(B,te)||(B[te]=G[te],re[te]=!0)}function ce(e,B,G,re,V,te,Z,ae,ge){var ve,Te;if(Array.isArray(V))for(V=Array.prototype.slice.call(V),ve=0,Te=V.length;ve<Te;ve+=1)Array.isArray(V[ve])&&F(e,"nested arrays are not supported inside keys"),typeof V=="object"&&T(V[ve])==="[object Object]"&&(V[ve]="[object Object]");if(typeof V=="object"&&T(V)==="[object Object]"&&(V="[object Object]"),V=String(V),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ve=0,Te=te.length;ve<Te;ve+=1)ne(e,B,te[ve],G);else ne(e,B,te,G);else!e.json&&!c.call(G,V)&&c.call(B,V)&&(e.line=Z||e.line,e.lineStart=ae||e.lineStart,e.position=ge||e.position,F(e,"duplicated mapping key")),V==="__proto__"?Object.defineProperty(B,V,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[V]=te,delete G[V];return B}function ue(e){var B;B=e.input.charCodeAt(e.position),B===10?e.position++:B===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ie(e,B,G){for(var re=0,V=e.input.charCodeAt(e.position);V!==0;){for(;O(V);)V===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),V=e.input.charCodeAt(++e.position);if(B&&V===35)do V=e.input.charCodeAt(++e.position);while(V!==10&&V!==13&&V!==0);if(R(V))for(ue(e),V=e.input.charCodeAt(e.position),re++,e.lineIndent=0;V===32;)e.lineIndent++,V=e.input.charCodeAt(++e.position);else break}return G!==-1&&re!==0&&e.lineIndent<G&&k(e,"deficient indentation"),re}function Ae(e){var B=e.position,G;return G=e.input.charCodeAt(B),!!((G===45||G===46)&&G===e.input.charCodeAt(B+1)&&G===e.input.charCodeAt(B+2)&&(B+=3,G=e.input.charCodeAt(B),G===0||P(G)))}function K(e,B){B===1?e.result+=" ":B>1&&(e.result+=r.repeat(`
`,B-1))}function Ee(e,B,G){var re,V,te,Z,ae,ge,ve,Te,de=e.kind,xe=e.result,_;if(_=e.input.charCodeAt(e.position),P(_)||M(_)||_===35||_===38||_===42||_===33||_===124||_===62||_===39||_===34||_===37||_===64||_===96||(_===63||_===45)&&(V=e.input.charCodeAt(e.position+1),P(V)||G&&M(V)))return!1;for(e.kind="scalar",e.result="",te=Z=e.position,ae=!1;_!==0;){if(_===58){if(V=e.input.charCodeAt(e.position+1),P(V)||G&&M(V))break}else if(_===35){if(re=e.input.charCodeAt(e.position-1),P(re))break}else{if(e.position===e.lineStart&&Ae(e)||G&&M(_))break;if(R(_))if(ge=e.line,ve=e.lineStart,Te=e.lineIndent,ie(e,!1,-1),e.lineIndent>=B){ae=!0,_=e.input.charCodeAt(e.position);continue}else{e.position=Z,e.line=ge,e.lineStart=ve,e.lineIndent=Te;break}}ae&&(W(e,te,Z,!1),K(e,e.line-ge),te=Z=e.position,ae=!1),O(_)||(Z=e.position+1),_=e.input.charCodeAt(++e.position)}return W(e,te,Z,!1),e.result?!0:(e.kind=de,e.result=xe,!1)}function A(e,B){var G,re,V;if(G=e.input.charCodeAt(e.position),G!==39)return!1;for(e.kind="scalar",e.result="",e.position++,re=V=e.position;(G=e.input.charCodeAt(e.position))!==0;)if(G===39)if(W(e,re,e.position,!0),G=e.input.charCodeAt(++e.position),G===39)re=e.position,e.position++,V=e.position;else return!0;else R(G)?(W(e,re,V,!0),K(e,ie(e,!1,B)),re=V=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,V=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function g(e,B){var G,re,V,te,Z,ae;if(ae=e.input.charCodeAt(e.position),ae!==34)return!1;for(e.kind="scalar",e.result="",e.position++,G=re=e.position;(ae=e.input.charCodeAt(e.position))!==0;){if(ae===34)return W(e,G,e.position,!0),e.position++,!0;if(ae===92){if(W(e,G,e.position,!0),ae=e.input.charCodeAt(++e.position),R(ae))ie(e,!1,B);else if(ae<256&&U[ae])e.result+=L[ae],e.position++;else if((Z=w(ae))>0){for(V=Z,te=0;V>0;V--)ae=e.input.charCodeAt(++e.position),(Z=C(ae))>=0?te=(te<<4)+Z:F(e,"expected hexadecimal character");e.result+=$(te),e.position++}else F(e,"unknown escape sequence");G=re=e.position}else R(ae)?(W(e,G,re,!0),K(e,ie(e,!1,B)),G=re=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,re=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function H(e,B){var G=!0,re,V,te,Z=e.tag,ae,ge=e.anchor,ve,Te,de,xe,_,j=Object.create(null),X,Y,Q,ee;if(ee=e.input.charCodeAt(e.position),ee===91)Te=93,_=!1,ae=[];else if(ee===123)Te=125,_=!0,ae={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=ae),ee=e.input.charCodeAt(++e.position);ee!==0;){if(ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===Te)return e.position++,e.tag=Z,e.anchor=ge,e.kind=_?"mapping":"sequence",e.result=ae,!0;G?ee===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),Y=X=Q=null,de=xe=!1,ee===63&&(ve=e.input.charCodeAt(e.position+1),P(ve)&&(de=xe=!0,e.position++,ie(e,!0,B))),re=e.line,V=e.lineStart,te=e.position,Fe(e,B,l,!1,!0),Y=e.tag,X=e.result,ie(e,!0,B),ee=e.input.charCodeAt(e.position),(xe||e.line===re)&&ee===58&&(de=!0,ee=e.input.charCodeAt(++e.position),ie(e,!0,B),Fe(e,B,l,!1,!0),Q=e.result),_?ce(e,ae,j,Y,X,Q,re,V,te):de?ae.push(ce(e,null,j,Y,X,Q,re,V,te)):ae.push(X),ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===44?(G=!0,ee=e.input.charCodeAt(++e.position)):G=!1}F(e,"unexpected end of the stream within a flow collection")}function N(e,B){var G,re,V=s,te=!1,Z=!1,ae=B,ge=0,ve=!1,Te,de;if(de=e.input.charCodeAt(e.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(e.kind="scalar",e.result="";de!==0;)if(de=e.input.charCodeAt(++e.position),de===43||de===45)s===V?V=de===43?o:n:F(e,"repeat of a chomping mode identifier");else if((Te=S(de))>=0)Te===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(e,"repeat of an indentation width identifier"):(ae=B+Te-1,Z=!0);else break;if(O(de)){do de=e.input.charCodeAt(++e.position);while(O(de));if(de===35)do de=e.input.charCodeAt(++e.position);while(!R(de)&&de!==0)}for(;de!==0;){for(ue(e),e.lineIndent=0,de=e.input.charCodeAt(e.position);(!Z||e.lineIndent<ae)&&de===32;)e.lineIndent++,de=e.input.charCodeAt(++e.position);if(!Z&&e.lineIndent>ae&&(ae=e.lineIndent),R(de)){ge++;continue}if(e.lineIndent<ae){V===o?e.result+=r.repeat(`
`,te?1+ge:ge):V===s&&te&&(e.result+=`
`);break}for(re?O(de)?(ve=!0,e.result+=r.repeat(`
`,te?1+ge:ge)):ve?(ve=!1,e.result+=r.repeat(`
`,ge+1)):ge===0?te&&(e.result+=" "):e.result+=r.repeat(`
`,ge):e.result+=r.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=e.position;!R(de)&&de!==0;)de=e.input.charCodeAt(++e.position);W(e,G,e.position,!1)}return!0}function le(e,B){var G,re=e.tag,V=e.anchor,te=[],Z,ae=!1,ge;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=te),ge=e.input.charCodeAt(e.position);ge!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(ge!==45||(Z=e.input.charCodeAt(e.position+1),!P(Z))));){if(ae=!0,e.position++,ie(e,!0,-1)&&e.lineIndent<=B){te.push(null),ge=e.input.charCodeAt(e.position);continue}if(G=e.line,Fe(e,B,f,!1,!0),te.push(e.result),ie(e,!0,-1),ge=e.input.charCodeAt(e.position),(e.line===G||e.lineIndent>B)&&ge!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<B)break}return ae?(e.tag=re,e.anchor=V,e.kind="sequence",e.result=te,!0):!1}function me(e,B,G){var re,V,te,Z,ae,ge,ve=e.tag,Te=e.anchor,de={},xe=Object.create(null),_=null,j=null,X=null,Y=!1,Q=!1,ee;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=de),ee=e.input.charCodeAt(e.position);ee!==0;){if(!Y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),re=e.input.charCodeAt(e.position+1),te=e.line,(ee===63||ee===58)&&P(re))ee===63?(Y&&(ce(e,de,xe,_,j,null,Z,ae,ge),_=j=X=null),Q=!0,Y=!0,V=!0):Y?(Y=!1,V=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,ee=re;else{if(Z=e.line,ae=e.lineStart,ge=e.position,!Fe(e,G,a,!1,!0))break;if(e.line===te){for(ee=e.input.charCodeAt(e.position);O(ee);)ee=e.input.charCodeAt(++e.position);if(ee===58)ee=e.input.charCodeAt(++e.position),P(ee)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),Y&&(ce(e,de,xe,_,j,null,Z,ae,ge),_=j=X=null),Q=!0,Y=!1,V=!1,_=e.tag,j=e.result;else if(Q)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=ve,e.anchor=Te,!0}else if(Q)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=ve,e.anchor=Te,!0}if((e.line===te||e.lineIndent>B)&&(Y&&(Z=e.line,ae=e.lineStart,ge=e.position),Fe(e,B,i,!0,V)&&(Y?j=e.result:X=e.result),Y||(ce(e,de,xe,_,j,X,Z,ae,ge),_=j=X=null),ie(e,!0,-1),ee=e.input.charCodeAt(e.position)),(e.line===te||e.lineIndent>B)&&ee!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<B)break}return Y&&ce(e,de,xe,_,j,null,Z,ae,ge),Q&&(e.tag=ve,e.anchor=Te,e.kind="mapping",e.result=de),Q}function pe(e){var B,G=!1,re=!1,V,te,Z;if(Z=e.input.charCodeAt(e.position),Z!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),Z=e.input.charCodeAt(++e.position),Z===60?(G=!0,Z=e.input.charCodeAt(++e.position)):Z===33?(re=!0,V="!!",Z=e.input.charCodeAt(++e.position)):V="!",B=e.position,G){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&Z!==62);e.position<e.length?(te=e.input.slice(B,e.position),Z=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!P(Z);)Z===33&&(re?F(e,"tag suffix cannot contain exclamation marks"):(V=e.input.slice(B-1,e.position+1),y.test(V)||F(e,"named tag handle cannot contain such characters"),re=!0,B=e.position+1)),Z=e.input.charCodeAt(++e.position);te=e.input.slice(B,e.position),v.test(te)&&F(e,"tag suffix cannot contain flow indicator characters")}te&&!p.test(te)&&F(e,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(e,"tag name is malformed: "+te)}return G?e.tag=te:c.call(e.tagMap,V)?e.tag=e.tagMap[V]+te:V==="!"?e.tag="!"+te:V==="!!"?e.tag="tag:yaml.org,2002:"+te:F(e,'undeclared tag handle "'+V+'"'),!0}function _e(e){var B,G;if(G=e.input.charCodeAt(e.position),G!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),G=e.input.charCodeAt(++e.position),B=e.position;G!==0&&!P(G)&&!M(G);)G=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(B,e.position),!0}function ye(e){var B,G,re;if(re=e.input.charCodeAt(e.position),re!==42)return!1;for(re=e.input.charCodeAt(++e.position),B=e.position;re!==0&&!P(re)&&!M(re);)re=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an alias node must contain at least one character"),G=e.input.slice(B,e.position),c.call(e.anchorMap,G)||F(e,'unidentified alias "'+G+'"'),e.result=e.anchorMap[G],ie(e,!0,-1),!0}function Fe(e,B,G,re,V){var te,Z,ae,ge=1,ve=!1,Te=!1,de,xe,_,j,X,Y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,te=Z=ae=i===G||f===G,re&&ie(e,!0,-1)&&(ve=!0,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)),ge===1)for(;pe(e)||_e(e);)ie(e,!0,-1)?(ve=!0,ae=te,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)):ae=!1;if(ae&&(ae=ve||V),(ge===1||i===G)&&(l===G||a===G?X=B:X=B+1,Y=e.position-e.lineStart,ge===1?ae&&(le(e,Y)||me(e,Y,X))||H(e,X)?Te=!0:(Z&&N(e,X)||A(e,X)||g(e,X)?Te=!0:ye(e)?(Te=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):Ee(e,X,l===G)&&(Te=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ge===0&&(Te=ae&&le(e,Y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),de=0,xe=e.implicitTypes.length;de<xe;de+=1)if(j=e.implicitTypes[de],j.resolve(e.result)){e.result=j.construct(e.result),e.tag=j.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(c.call(e.typeMap[e.kind||"fallback"],e.tag))j=e.typeMap[e.kind||"fallback"][e.tag];else for(j=null,_=e.typeMap.multi[e.kind||"fallback"],de=0,xe=_.length;de<xe;de+=1)if(e.tag.slice(0,_[de].tag.length)===_[de].tag){j=_[de];break}j||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&j.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+j.kind+'", not "'+e.kind+'"'),j.resolve(e.result,e.tag)?(e.result=j.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||Te}function Re(e){var B=e.position,G,re,V,te=!1,Z;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(Z=e.input.charCodeAt(e.position))!==0&&(ie(e,!0,-1),Z=e.input.charCodeAt(e.position),!(e.lineIndent>0||Z!==37));){for(te=!0,Z=e.input.charCodeAt(++e.position),G=e.position;Z!==0&&!P(Z);)Z=e.input.charCodeAt(++e.position);for(re=e.input.slice(G,e.position),V=[],re.length<1&&F(e,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=e.input.charCodeAt(++e.position);if(Z===35){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&!R(Z));break}if(R(Z))break;for(G=e.position;Z!==0&&!P(Z);)Z=e.input.charCodeAt(++e.position);V.push(e.input.slice(G,e.position))}Z!==0&&ue(e),c.call(J,re)?J[re](e,re,V):k(e,'unknown document directive "'+re+'"')}if(ie(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ie(e,!0,-1)):te&&F(e,"directives end mark is expected"),Fe(e,e.lineIndent-1,i,!1,!0),ie(e,!0,-1),e.checkLineBreaks&&m.test(e.input.slice(B,e.position))&&k(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ae(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ie(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function ke(e,B){e=String(e),B=B||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var G=new D(e,B),re=e.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)Re(G);return G.documents}function pt(e,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=ke(e,G);if(typeof B!="function")return re;for(var V=0,te=re.length;V<te;V+=1)B(re[V])}function rt(e,B){var G=ke(e,B);if(G.length!==0){if(G.length===1)return G[0];throw new d("expected a single document in the stream, but found more")}}return Ir.loadAll=pt,Ir.load=rt,Ir}var Jn={},Ho;function kc(){if(Ho)return Jn;Ho=1;var r=dr(),d=hr(),h=Ki(),u=Object.prototype.toString,c=Object.prototype.hasOwnProperty,l=65279,a=9,f=10,i=13,s=32,n=33,o=34,t=35,m=37,v=38,y=39,p=42,T=44,R=45,O=58,P=61,M=62,C=63,w=64,S=91,E=93,$=96,U=123,L=124,q=125,D={};D[0]="\\0",D[7]="\\a",D[8]="\\b",D[9]="\\t",D[10]="\\n",D[11]="\\v",D[12]="\\f",D[13]="\\r",D[27]="\\e",D[34]='\\"',D[92]="\\\\",D[133]="\\N",D[160]="\\_",D[8232]="\\L",D[8233]="\\P";var I=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function k(_,j){var X,Y,Q,ee,fe,oe,he;if(j===null)return{};for(X={},Y=Object.keys(j),Q=0,ee=Y.length;Q<ee;Q+=1)fe=Y[Q],oe=String(j[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=_.compiledTypeMap.fallback[fe],he&&c.call(he.styleAliases,oe)&&(oe=he.styleAliases[oe]),X[fe]=oe;return X}function J(_){var j,X,Y;if(j=_.toString(16).toUpperCase(),_<=255)X="x",Y=2;else if(_<=65535)X="u",Y=4;else if(_<=4294967295)X="U",Y=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+r.repeat("0",Y-j.length)+j}var W=1,ne=2;function ce(_){this.schema=_.schema||h,this.indent=Math.max(1,_.indent||2),this.noArrayIndent=_.noArrayIndent||!1,this.skipInvalid=_.skipInvalid||!1,this.flowLevel=r.isNothing(_.flowLevel)?-1:_.flowLevel,this.styleMap=k(this.schema,_.styles||null),this.sortKeys=_.sortKeys||!1,this.lineWidth=_.lineWidth||80,this.noRefs=_.noRefs||!1,this.noCompatMode=_.noCompatMode||!1,this.condenseFlow=_.condenseFlow||!1,this.quotingType=_.quotingType==='"'?ne:W,this.forceQuotes=_.forceQuotes||!1,this.replacer=typeof _.replacer=="function"?_.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(_,j){for(var X=r.repeat(" ",j),Y=0,Q=-1,ee="",fe,oe=_.length;Y<oe;)Q=_.indexOf(`
`,Y),Q===-1?(fe=_.slice(Y),Y=oe):(fe=_.slice(Y,Q+1),Y=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ie(_,j){return`
`+r.repeat(" ",_.indent*j)}function Ae(_,j){var X,Y,Q;for(X=0,Y=_.implicitTypes.length;X<Y;X+=1)if(Q=_.implicitTypes[X],Q.resolve(j))return!0;return!1}function K(_){return _===s||_===a}function Ee(_){return 32<=_&&_<=126||161<=_&&_<=55295&&_!==8232&&_!==8233||57344<=_&&_<=65533&&_!==l||65536<=_&&_<=1114111}function A(_){return Ee(_)&&_!==l&&_!==i&&_!==f}function g(_,j,X){var Y=A(_),Q=Y&&!K(_);return(X?Y:Y&&_!==T&&_!==S&&_!==E&&_!==U&&_!==q)&&_!==t&&!(j===O&&!Q)||A(j)&&!K(j)&&_===t||j===O&&Q}function H(_){return Ee(_)&&_!==l&&!K(_)&&_!==R&&_!==C&&_!==O&&_!==T&&_!==S&&_!==E&&_!==U&&_!==q&&_!==t&&_!==v&&_!==p&&_!==n&&_!==L&&_!==P&&_!==M&&_!==y&&_!==o&&_!==m&&_!==w&&_!==$}function N(_){return!K(_)&&_!==O}function le(_,j){var X=_.charCodeAt(j),Y;return X>=55296&&X<=56319&&j+1<_.length&&(Y=_.charCodeAt(j+1),Y>=56320&&Y<=57343)?(X-55296)*1024+Y-56320+65536:X}function me(_){var j=/^\n* /;return j.test(_)}var pe=1,_e=2,ye=3,Fe=4,Re=5;function ke(_,j,X,Y,Q,ee,fe,oe){var he,we=0,be=null,De=!1,Ce=!1,Pt=Y!==-1,Ke=-1,mt=H(le(_,0))&&N(le(_,_.length-1));if(j||fe)for(he=0;he<_.length;we>=65536?he+=2:he++){if(we=le(_,he),!Ee(we))return Re;mt=mt&&g(we,be,oe),be=we}else{for(he=0;he<_.length;we>=65536?he+=2:he++){if(we=le(_,he),we===f)De=!0,Pt&&(Ce=Ce||he-Ke-1>Y&&_[Ke+1]!==" ",Ke=he);else if(!Ee(we))return Re;mt=mt&&g(we,be,oe),be=we}Ce=Ce||Pt&&he-Ke-1>Y&&_[Ke+1]!==" "}return!De&&!Ce?mt&&!fe&&!Q(_)?pe:ee===ne?Re:_e:X>9&&me(_)?Re:fe?ee===ne?Re:_e:Ce?Fe:ye}function pt(_,j,X,Y,Q){_.dump=(function(){if(j.length===0)return _.quotingType===ne?'""':"''";if(!_.noCompatMode&&(I.indexOf(j)!==-1||F.test(j)))return _.quotingType===ne?'"'+j+'"':"'"+j+"'";var ee=_.indent*Math.max(1,X),fe=_.lineWidth===-1?-1:Math.max(Math.min(_.lineWidth,40),_.lineWidth-ee),oe=Y||_.flowLevel>-1&&X>=_.flowLevel;function he(we){return Ae(_,we)}switch(ke(j,oe,_.indent,fe,he,_.quotingType,_.forceQuotes&&!Y,Q)){case pe:return j;case _e:return"'"+j.replace(/'/g,"''")+"'";case ye:return"|"+rt(j,_.indent)+e(ue(j,ee));case Fe:return">"+rt(j,_.indent)+e(ue(B(j,fe),ee));case Re:return'"'+re(j)+'"';default:throw new d("impossible error: invalid scalar style")}})()}function rt(_,j){var X=me(_)?String(j):"",Y=_[_.length-1]===`
`,Q=Y&&(_[_.length-2]===`
`||_===`
`),ee=Q?"+":Y?"":"-";return X+ee+`
`}function e(_){return _[_.length-1]===`
`?_.slice(0,-1):_}function B(_,j){for(var X=/(\n+)([^\n]*)/g,Y=(function(){var we=_.indexOf(`
`);return we=we!==-1?we:_.length,X.lastIndex=we,G(_.slice(0,we),j)})(),Q=_[0]===`
`||_[0]===" ",ee,fe;fe=X.exec(_);){var oe=fe[1],he=fe[2];ee=he[0]===" ",Y+=oe+(!Q&&!ee&&he!==""?`
`:"")+G(he,j),Q=ee}return Y}function G(_,j){if(_===""||_[0]===" ")return _;for(var X=/ [^ ]/g,Y,Q=0,ee,fe=0,oe=0,he="";Y=X.exec(_);)oe=Y.index,oe-Q>j&&(ee=fe>Q?fe:oe,he+=`
`+_.slice(Q,ee),Q=ee+1),fe=oe;return he+=`
`,_.length-Q>j&&fe>Q?he+=_.slice(Q,fe)+`
`+_.slice(fe+1):he+=_.slice(Q),he.slice(1)}function re(_){for(var j="",X=0,Y,Q=0;Q<_.length;X>=65536?Q+=2:Q++)X=le(_,Q),Y=D[X],!Y&&Ee(X)?(j+=_[Q],X>=65536&&(j+=_[Q+1])):j+=Y||J(X);return j}function V(_,j,X){var Y="",Q=_.tag,ee,fe,oe;for(ee=0,fe=X.length;ee<fe;ee+=1)oe=X[ee],_.replacer&&(oe=_.replacer.call(X,String(ee),oe)),(ve(_,j,oe,!1,!1)||typeof oe>"u"&&ve(_,j,null,!1,!1))&&(Y!==""&&(Y+=","+(_.condenseFlow?"":" ")),Y+=_.dump);_.tag=Q,_.dump="["+Y+"]"}function te(_,j,X,Y){var Q="",ee=_.tag,fe,oe,he;for(fe=0,oe=X.length;fe<oe;fe+=1)he=X[fe],_.replacer&&(he=_.replacer.call(X,String(fe),he)),(ve(_,j+1,he,!0,!0,!1,!0)||typeof he>"u"&&ve(_,j+1,null,!0,!0,!1,!0))&&((!Y||Q!=="")&&(Q+=ie(_,j)),_.dump&&f===_.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=_.dump);_.tag=ee,_.dump=Q||"[]"}function Z(_,j,X){var Y="",Q=_.tag,ee=Object.keys(X),fe,oe,he,we,be;for(fe=0,oe=ee.length;fe<oe;fe+=1)be="",Y!==""&&(be+=", "),_.condenseFlow&&(be+='"'),he=ee[fe],we=X[he],_.replacer&&(we=_.replacer.call(X,he,we)),ve(_,j,he,!1,!1)&&(_.dump.length>1024&&(be+="? "),be+=_.dump+(_.condenseFlow?'"':"")+":"+(_.condenseFlow?"":" "),ve(_,j,we,!1,!1)&&(be+=_.dump,Y+=be));_.tag=Q,_.dump="{"+Y+"}"}function ae(_,j,X,Y){var Q="",ee=_.tag,fe=Object.keys(X),oe,he,we,be,De,Ce;if(_.sortKeys===!0)fe.sort();else if(typeof _.sortKeys=="function")fe.sort(_.sortKeys);else if(_.sortKeys)throw new d("sortKeys must be a boolean or a function");for(oe=0,he=fe.length;oe<he;oe+=1)Ce="",(!Y||Q!=="")&&(Ce+=ie(_,j)),we=fe[oe],be=X[we],_.replacer&&(be=_.replacer.call(X,we,be)),ve(_,j+1,we,!0,!0,!0)&&(De=_.tag!==null&&_.tag!=="?"||_.dump&&_.dump.length>1024,De&&(_.dump&&f===_.dump.charCodeAt(0)?Ce+="?":Ce+="? "),Ce+=_.dump,De&&(Ce+=ie(_,j)),ve(_,j+1,be,!0,De)&&(_.dump&&f===_.dump.charCodeAt(0)?Ce+=":":Ce+=": ",Ce+=_.dump,Q+=Ce));_.tag=ee,_.dump=Q||"{}"}function ge(_,j,X){var Y,Q,ee,fe,oe,he;for(Q=X?_.explicitTypes:_.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(oe=Q[ee],(oe.instanceOf||oe.predicate)&&(!oe.instanceOf||typeof j=="object"&&j instanceof oe.instanceOf)&&(!oe.predicate||oe.predicate(j))){if(X?oe.multi&&oe.representName?_.tag=oe.representName(j):_.tag=oe.tag:_.tag="?",oe.represent){if(he=_.styleMap[oe.tag]||oe.defaultStyle,u.call(oe.represent)==="[object Function]")Y=oe.represent(j,he);else if(c.call(oe.represent,he))Y=oe.represent[he](j,he);else throw new d("!<"+oe.tag+'> tag resolver accepts not "'+he+'" style');_.dump=Y}return!0}return!1}function ve(_,j,X,Y,Q,ee,fe){_.tag=null,_.dump=X,ge(_,X,!1)||ge(_,X,!0);var oe=u.call(_.dump),he=Y,we;Y&&(Y=_.flowLevel<0||_.flowLevel>j);var be=oe==="[object Object]"||oe==="[object Array]",De,Ce;if(be&&(De=_.duplicates.indexOf(X),Ce=De!==-1),(_.tag!==null&&_.tag!=="?"||Ce||_.indent!==2&&j>0)&&(Q=!1),Ce&&_.usedDuplicates[De])_.dump="*ref_"+De;else{if(be&&Ce&&!_.usedDuplicates[De]&&(_.usedDuplicates[De]=!0),oe==="[object Object]")Y&&Object.keys(_.dump).length!==0?(ae(_,j,_.dump,Q),Ce&&(_.dump="&ref_"+De+_.dump)):(Z(_,j,_.dump),Ce&&(_.dump="&ref_"+De+" "+_.dump));else if(oe==="[object Array]")Y&&_.dump.length!==0?(_.noArrayIndent&&!fe&&j>0?te(_,j-1,_.dump,Q):te(_,j,_.dump,Q),Ce&&(_.dump="&ref_"+De+_.dump)):(V(_,j,_.dump),Ce&&(_.dump="&ref_"+De+" "+_.dump));else if(oe==="[object String]")_.tag!=="?"&&pt(_,_.dump,j,ee,he);else{if(oe==="[object Undefined]")return!1;if(_.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+oe)}_.tag!==null&&_.tag!=="?"&&(we=encodeURI(_.tag[0]==="!"?_.tag.slice(1):_.tag).replace(/!/g,"%21"),_.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",_.dump=we+" "+_.dump)}return!0}function Te(_,j){var X=[],Y=[],Q,ee;for(de(_,X,Y),Q=0,ee=Y.length;Q<ee;Q+=1)j.duplicates.push(X[Y[Q]]);j.usedDuplicates=new Array(ee)}function de(_,j,X){var Y,Q,ee;if(_!==null&&typeof _=="object")if(Q=j.indexOf(_),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(j.push(_),Array.isArray(_))for(Q=0,ee=_.length;Q<ee;Q+=1)de(_[Q],j,X);else for(Y=Object.keys(_),Q=0,ee=Y.length;Q<ee;Q+=1)de(_[Y[Q]],j,X)}function xe(_,j){j=j||{};var X=new ce(j);X.noRefs||Te(_,X);var Y=_;return X.replacer&&(Y=X.replacer.call({"":Y},"",Y)),ve(X,0,Y,!0,!0)?X.dump+`
`:""}return Jn.dump=xe,Jn}var jo;function Ji(){if(jo)return Be;jo=1;var r=$c(),d=kc();function h(u,c){return function(){throw new Error("Function yaml."+u+" is removed in js-yaml 4. Use yaml."+c+" instead, which is now safe by default.")}}return Be.Type=He(),Be.Schema=Pl(),Be.FAILSAFE_SCHEMA=Fl(),Be.JSON_SCHEMA=kl(),Be.CORE_SCHEMA=ql(),Be.DEFAULT_SCHEMA=Ki(),Be.load=r.load,Be.loadAll=r.loadAll,Be.dump=d.dump,Be.YAMLException=hr(),Be.types={binary:Hl(),float:$l(),map:Nl(),null:xl(),pairs:Gl(),set:Wl(),timestamp:Ml(),bool:Ll(),int:Ul(),merge:Bl(),omap:jl(),seq:Dl(),str:Il()},Be.safeLoad=h("safeLoad","load"),Be.safeLoadAll=h("safeLoadAll","loadAll"),Be.safeDump=h("safeDump","dump"),Be}var Wt={},Go;function qc(){if(Go)return Wt;Go=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.Lazy=void 0;class r{constructor(h){this._value=null,this.creator=h}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const h=this.creator();return this.value=h,h}set value(h){this._value=h,this.creator=null}}return Wt.Lazy=r,Wt}var Dr={exports:{}},Qn,Wo;function kr(){if(Wo)return Qn;Wo=1;const r="2.0.0",d=256,h=Number.MAX_SAFE_INTEGER||9007199254740991,u=16,c=d-6;return Qn={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:u,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:h,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Qn}var Zn,Vo;function qr(){return Vo||(Vo=1,Zn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),Zn}var Yo;function pr(){return Yo||(Yo=1,(function(r,d){const{MAX_SAFE_COMPONENT_LENGTH:h,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:c}=kr(),l=qr();d=r.exports={};const a=d.re=[],f=d.safeRe=[],i=d.src=[],s=d.safeSrc=[],n=d.t={};let o=0;const t="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",c],[t,u]],v=p=>{for(const[T,R]of m)p=p.split(`${T}*`).join(`${T}{0,${R}}`).split(`${T}+`).join(`${T}{1,${R}}`);return p},y=(p,T,R)=>{const O=v(T),P=o++;l(p,P,T),n[p]=P,i[P]=T,s[P]=O,a[P]=new RegExp(T,R?"g":void 0),f[P]=new RegExp(O,R?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),y("MAINVERSION",`(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})\\.(${i[n.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})\\.(${i[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${i[n.NONNUMERICIDENTIFIER]}|${i[n.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${i[n.NONNUMERICIDENTIFIER]}|${i[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${i[n.PRERELEASEIDENTIFIER]}(?:\\.${i[n.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${i[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[n.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${t}+`),y("BUILD",`(?:\\+(${i[n.BUILDIDENTIFIER]}(?:\\.${i[n.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${i[n.MAINVERSION]}${i[n.PRERELEASE]}?${i[n.BUILD]}?`),y("FULL",`^${i[n.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${i[n.MAINVERSIONLOOSE]}${i[n.PRERELEASELOOSE]}?${i[n.BUILD]}?`),y("LOOSE",`^${i[n.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${i[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${i[n.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:\\.(${i[n.XRANGEIDENTIFIER]})(?:${i[n.PRERELEASE]})?${i[n.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[n.XRANGEIDENTIFIERLOOSE]})(?:${i[n.PRERELEASELOOSE]})?${i[n.BUILD]}?)?)?`),y("XRANGE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${i[n.GTLT]}\\s*${i[n.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${h}})(?:\\.(\\d{1,${h}}))?(?:\\.(\\d{1,${h}}))?`),y("COERCE",`${i[n.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",i[n.COERCEPLAIN]+`(?:${i[n.PRERELEASE]})?(?:${i[n.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",i[n.COERCE],!0),y("COERCERTLFULL",i[n.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${i[n.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${i[n.LONETILDE]}${i[n.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${i[n.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${i[n.LONECARET]}${i[n.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${i[n.LONECARET]}${i[n.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${i[n.GTLT]}\\s*(${i[n.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${i[n.GTLT]}\\s*(${i[n.LOOSEPLAIN]}|${i[n.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${i[n.XRANGEPLAIN]})\\s+-\\s+(${i[n.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${i[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[n.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Dr,Dr.exports)),Dr.exports}var ei,zo;function Qi(){if(zo)return ei;zo=1;const r=Object.freeze({loose:!0}),d=Object.freeze({});return ei=u=>u?typeof u!="object"?r:u:d,ei}var ti,Xo;function Vl(){if(Xo)return ti;Xo=1;const r=/^[0-9]+$/,d=(u,c)=>{if(typeof u=="number"&&typeof c=="number")return u===c?0:u<c?-1:1;const l=r.test(u),a=r.test(c);return l&&a&&(u=+u,c=+c),u===c?0:l&&!a?-1:a&&!l?1:u<c?-1:1};return ti={compareIdentifiers:d,rcompareIdentifiers:(u,c)=>d(c,u)},ti}var ri,Ko;function je(){if(Ko)return ri;Ko=1;const r=qr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:h}=kr(),{safeRe:u,t:c}=pr(),l=Qi(),{compareIdentifiers:a}=Vl();class f{constructor(s,n){if(n=l(n),s instanceof f){if(s.loose===!!n.loose&&s.includePrerelease===!!n.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);r("SemVer",s,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const o=s.trim().match(n.loose?u[c.LOOSE]:u[c.FULL]);if(!o)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const m=+t;if(m>=0&&m<h)return m}return t}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(r("SemVer.compare",this.version,this.options,s),!(s instanceof f)){if(typeof s=="string"&&s===this.version)return 0;s=new f(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof f||(s=new f(s,this.options)),this.major<s.major?-1:this.major>s.major?1:this.minor<s.minor?-1:this.minor>s.minor?1:this.patch<s.patch?-1:this.patch>s.patch?1:0}comparePre(s){if(s instanceof f||(s=new f(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let n=0;do{const o=this.prerelease[n],t=s.prerelease[n];if(r("prerelease compare",n,o,t),o===void 0&&t===void 0)return 0;if(t===void 0)return 1;if(o===void 0)return-1;if(o===t)continue;return a(o,t)}while(++n)}compareBuild(s){s instanceof f||(s=new f(s,this.options));let n=0;do{const o=this.build[n],t=s.build[n];if(r("build compare",n,o,t),o===void 0&&t===void 0)return 0;if(t===void 0)return 1;if(o===void 0)return-1;if(o===t)continue;return a(o,t)}while(++n)}inc(s,n,o){if(s.startsWith("pre")){if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const t=`-${n}`.match(this.options.loose?u[c.PRERELEASELOOSE]:u[c.PRERELEASE]);if(!t||t[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(o)?1:0;if(this.prerelease.length===0)this.prerelease=[t];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(n){let m=[n,t];o===!1&&(m=[n]),a(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ri=f,ri}var ni,Jo;function $t(){if(Jo)return ni;Jo=1;const r=je();return ni=(h,u,c=!1)=>{if(h instanceof r)return h;try{return new r(h,u)}catch(l){if(!c)return null;throw l}},ni}var ii,Qo;function Mc(){if(Qo)return ii;Qo=1;const r=$t();return ii=(h,u)=>{const c=r(h,u);return c?c.version:null},ii}var ai,Zo;function Bc(){if(Zo)return ai;Zo=1;const r=$t();return ai=(h,u)=>{const c=r(h.trim().replace(/^[=v]+/,""),u);return c?c.version:null},ai}var oi,es;function Hc(){if(es)return oi;es=1;const r=je();return oi=(h,u,c,l,a)=>{typeof c=="string"&&(a=l,l=c,c=void 0);try{return new r(h instanceof r?h.version:h,c).inc(u,l,a).version}catch{return null}},oi}var si,ts;function jc(){if(ts)return si;ts=1;const r=$t();return si=(h,u)=>{const c=r(h,null,!0),l=r(u,null,!0),a=c.compare(l);if(a===0)return null;const f=a>0,i=f?c:l,s=f?l:c,n=!!i.prerelease.length;if(!!s.prerelease.length&&!n){if(!s.patch&&!s.minor)return"major";if(s.compareMain(i)===0)return s.minor&&!s.patch?"minor":"patch"}const t=n?"pre":"";return c.major!==l.major?t+"major":c.minor!==l.minor?t+"minor":c.patch!==l.patch?t+"patch":"prerelease"},si}var li,rs;function Gc(){if(rs)return li;rs=1;const r=je();return li=(h,u)=>new r(h,u).major,li}var ui,ns;function Wc(){if(ns)return ui;ns=1;const r=je();return ui=(h,u)=>new r(h,u).minor,ui}var ci,is;function Vc(){if(is)return ci;is=1;const r=je();return ci=(h,u)=>new r(h,u).patch,ci}var fi,as;function Yc(){if(as)return fi;as=1;const r=$t();return fi=(h,u)=>{const c=r(h,u);return c&&c.prerelease.length?c.prerelease:null},fi}var di,os;function Ze(){if(os)return di;os=1;const r=je();return di=(h,u,c)=>new r(h,c).compare(new r(u,c)),di}var hi,ss;function zc(){if(ss)return hi;ss=1;const r=Ze();return hi=(h,u,c)=>r(u,h,c),hi}var pi,ls;function Xc(){if(ls)return pi;ls=1;const r=Ze();return pi=(h,u)=>r(h,u,!0),pi}var mi,us;function Zi(){if(us)return mi;us=1;const r=je();return mi=(h,u,c)=>{const l=new r(h,c),a=new r(u,c);return l.compare(a)||l.compareBuild(a)},mi}var gi,cs;function Kc(){if(cs)return gi;cs=1;const r=Zi();return gi=(h,u)=>h.sort((c,l)=>r(c,l,u)),gi}var vi,fs;function Jc(){if(fs)return vi;fs=1;const r=Zi();return vi=(h,u)=>h.sort((c,l)=>r(l,c,u)),vi}var Ei,ds;function Mr(){if(ds)return Ei;ds=1;const r=Ze();return Ei=(h,u,c)=>r(h,u,c)>0,Ei}var yi,hs;function ea(){if(hs)return yi;hs=1;const r=Ze();return yi=(h,u,c)=>r(h,u,c)<0,yi}var wi,ps;function Yl(){if(ps)return wi;ps=1;const r=Ze();return wi=(h,u,c)=>r(h,u,c)===0,wi}var _i,ms;function zl(){if(ms)return _i;ms=1;const r=Ze();return _i=(h,u,c)=>r(h,u,c)!==0,_i}var Si,gs;function ta(){if(gs)return Si;gs=1;const r=Ze();return Si=(h,u,c)=>r(h,u,c)>=0,Si}var Ai,vs;function ra(){if(vs)return Ai;vs=1;const r=Ze();return Ai=(h,u,c)=>r(h,u,c)<=0,Ai}var Ti,Es;function Xl(){if(Es)return Ti;Es=1;const r=Yl(),d=zl(),h=Mr(),u=ta(),c=ea(),l=ra();return Ti=(f,i,s,n)=>{switch(i){case"===":return typeof f=="object"&&(f=f.version),typeof s=="object"&&(s=s.version),f===s;case"!==":return typeof f=="object"&&(f=f.version),typeof s=="object"&&(s=s.version),f!==s;case"":case"=":case"==":return r(f,s,n);case"!=":return d(f,s,n);case">":return h(f,s,n);case">=":return u(f,s,n);case"<":return c(f,s,n);case"<=":return l(f,s,n);default:throw new TypeError(`Invalid operator: ${i}`)}},Ti}var Ci,ys;function Qc(){if(ys)return Ci;ys=1;const r=je(),d=$t(),{safeRe:h,t:u}=pr();return Ci=(l,a)=>{if(l instanceof r)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;a=a||{};let f=null;if(!a.rtl)f=l.match(a.includePrerelease?h[u.COERCEFULL]:h[u.COERCE]);else{const m=a.includePrerelease?h[u.COERCERTLFULL]:h[u.COERCERTL];let v;for(;(v=m.exec(l))&&(!f||f.index+f[0].length!==l.length);)(!f||v.index+v[0].length!==f.index+f[0].length)&&(f=v),m.lastIndex=v.index+v[1].length+v[2].length;m.lastIndex=-1}if(f===null)return null;const i=f[2],s=f[3]||"0",n=f[4]||"0",o=a.includePrerelease&&f[5]?`-${f[5]}`:"",t=a.includePrerelease&&f[6]?`+${f[6]}`:"";return d(`${i}.${s}.${n}${o}${t}`,a)},Ci}var Ri,ws;function Zc(){if(ws)return Ri;ws=1;class r{constructor(){this.max=1e3,this.map=new Map}get(h){const u=this.map.get(h);if(u!==void 0)return this.map.delete(h),this.map.set(h,u),u}delete(h){return this.map.delete(h)}set(h,u){if(!this.delete(h)&&u!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(h,u)}return this}}return Ri=r,Ri}var bi,_s;function et(){if(_s)return bi;_s=1;const r=/\s+/g;class d{constructor(I,F){if(F=c(F),I instanceof d)return I.loose===!!F.loose&&I.includePrerelease===!!F.includePrerelease?I:new d(I.raw,F);if(I instanceof l)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=I.trim().replace(r," "),this.set=this.raw.split("||").map(k=>this.parseRange(k.trim())).filter(k=>k.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const k=this.set[0];if(this.set=this.set.filter(J=>!y(J[0])),this.set.length===0)this.set=[k];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&p(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const F=this.set[I];for(let k=0;k<F.length;k++)k>0&&(this.formatted+=" "),this.formatted+=F[k].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const k=((this.options.includePrerelease&&m)|(this.options.loose&&v))+":"+I,J=u.get(k);if(J)return J;const W=this.options.loose,ne=W?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];I=I.replace(ne,L(this.options.includePrerelease)),a("hyphen replace",I),I=I.replace(i[s.COMPARATORTRIM],n),a("comparator trim",I),I=I.replace(i[s.TILDETRIM],o),a("tilde trim",I),I=I.replace(i[s.CARETTRIM],t),a("caret trim",I);let ce=I.split(" ").map(K=>R(K,this.options)).join(" ").split(/\s+/).map(K=>U(K,this.options));W&&(ce=ce.filter(K=>(a("loose invalid filter",K,this.options),!!K.match(i[s.COMPARATORLOOSE])))),a("range list",ce);const ue=new Map,ie=ce.map(K=>new l(K,this.options));for(const K of ie){if(y(K))return[K];ue.set(K.value,K)}ue.size>1&&ue.has("")&&ue.delete("");const Ae=[...ue.values()];return u.set(k,Ae),Ae}intersects(I,F){if(!(I instanceof d))throw new TypeError("a Range is required");return this.set.some(k=>T(k,F)&&I.set.some(J=>T(J,F)&&k.every(W=>J.every(ne=>W.intersects(ne,F)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new f(I,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(q(this.set[F],I,this.options))return!0;return!1}}bi=d;const h=Zc(),u=new h,c=Qi(),l=Br(),a=qr(),f=je(),{safeRe:i,t:s,comparatorTrimReplace:n,tildeTrimReplace:o,caretTrimReplace:t}=pr(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:v}=kr(),y=D=>D.value==="<0.0.0-0",p=D=>D.value==="",T=(D,I)=>{let F=!0;const k=D.slice();let J=k.pop();for(;F&&k.length;)F=k.every(W=>J.intersects(W,I)),J=k.pop();return F},R=(D,I)=>(D=D.replace(i[s.BUILD],""),a("comp",D,I),D=C(D,I),a("caret",D),D=P(D,I),a("tildes",D),D=S(D,I),a("xrange",D),D=$(D,I),a("stars",D),D),O=D=>!D||D.toLowerCase()==="x"||D==="*",P=(D,I)=>D.trim().split(/\s+/).map(F=>M(F,I)).join(" "),M=(D,I)=>{const F=I.loose?i[s.TILDELOOSE]:i[s.TILDE];return D.replace(F,(k,J,W,ne,ce)=>{a("tilde",D,k,J,W,ne,ce);let ue;return O(J)?ue="":O(W)?ue=`>=${J}.0.0 <${+J+1}.0.0-0`:O(ne)?ue=`>=${J}.${W}.0 <${J}.${+W+1}.0-0`:ce?(a("replaceTilde pr",ce),ue=`>=${J}.${W}.${ne}-${ce} <${J}.${+W+1}.0-0`):ue=`>=${J}.${W}.${ne} <${J}.${+W+1}.0-0`,a("tilde return",ue),ue})},C=(D,I)=>D.trim().split(/\s+/).map(F=>w(F,I)).join(" "),w=(D,I)=>{a("caret",D,I);const F=I.loose?i[s.CARETLOOSE]:i[s.CARET],k=I.includePrerelease?"-0":"";return D.replace(F,(J,W,ne,ce,ue)=>{a("caret",D,J,W,ne,ce,ue);let ie;return O(W)?ie="":O(ne)?ie=`>=${W}.0.0${k} <${+W+1}.0.0-0`:O(ce)?W==="0"?ie=`>=${W}.${ne}.0${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${k} <${+W+1}.0.0-0`:ue?(a("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${+W+1}.0.0-0`):(a("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}${k} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce} <${+W+1}.0.0-0`),a("caret return",ie),ie})},S=(D,I)=>(a("replaceXRanges",D,I),D.split(/\s+/).map(F=>E(F,I)).join(" ")),E=(D,I)=>{D=D.trim();const F=I.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return D.replace(F,(k,J,W,ne,ce,ue)=>{a("xRange",D,k,J,W,ne,ce,ue);const ie=O(W),Ae=ie||O(ne),K=Ae||O(ce),Ee=K;return J==="="&&Ee&&(J=""),ue=I.includePrerelease?"-0":"",ie?J===">"||J==="<"?k="<0.0.0-0":k="*":J&&Ee?(Ae&&(ne=0),ce=0,J===">"?(J=">=",Ae?(W=+W+1,ne=0,ce=0):(ne=+ne+1,ce=0)):J==="<="&&(J="<",Ae?W=+W+1:ne=+ne+1),J==="<"&&(ue="-0"),k=`${J+W}.${ne}.${ce}${ue}`):Ae?k=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:K&&(k=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),a("xRange return",k),k})},$=(D,I)=>(a("replaceStars",D,I),D.trim().replace(i[s.STAR],"")),U=(D,I)=>(a("replaceGTE0",D,I),D.trim().replace(i[I.includePrerelease?s.GTE0PRE:s.GTE0],"")),L=D=>(I,F,k,J,W,ne,ce,ue,ie,Ae,K,Ee)=>(O(k)?F="":O(J)?F=`>=${k}.0.0${D?"-0":""}`:O(W)?F=`>=${k}.${J}.0${D?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,O(ie)?ue="":O(Ae)?ue=`<${+ie+1}.0.0-0`:O(K)?ue=`<${ie}.${+Ae+1}.0-0`:Ee?ue=`<=${ie}.${Ae}.${K}-${Ee}`:D?ue=`<${ie}.${Ae}.${+K+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),q=(D,I,F)=>{for(let k=0;k<D.length;k++)if(!D[k].test(I))return!1;if(I.prerelease.length&&!F.includePrerelease){for(let k=0;k<D.length;k++)if(a(D[k].semver),D[k].semver!==l.ANY&&D[k].semver.prerelease.length>0){const J=D[k].semver;if(J.major===I.major&&J.minor===I.minor&&J.patch===I.patch)return!0}return!1}return!0};return bi}var Oi,Ss;function Br(){if(Ss)return Oi;Ss=1;const r=Symbol("SemVer ANY");class d{static get ANY(){return r}constructor(n,o){if(o=h(o),n instanceof d){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),a("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===r?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(n){const o=this.options.loose?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],t=n.match(o);if(!t)throw new TypeError(`Invalid comparator: ${n}`);this.operator=t[1]!==void 0?t[1]:"",this.operator==="="&&(this.operator=""),t[2]?this.semver=new f(t[2],this.options.loose):this.semver=r}toString(){return this.value}test(n){if(a("Comparator.test",n,this.options.loose),this.semver===r||n===r)return!0;if(typeof n=="string")try{n=new f(n,this.options)}catch{return!1}return l(n,this.operator,this.semver,this.options)}intersects(n,o){if(!(n instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new i(n.value,o).test(this.value):n.operator===""?n.value===""?!0:new i(this.value,o).test(n.semver):(o=h(o),o.includePrerelease&&(this.value==="<0.0.0-0"||n.value==="<0.0.0-0")||!o.includePrerelease&&(this.value.startsWith("<0.0.0")||n.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&n.operator.startsWith(">")||this.operator.startsWith("<")&&n.operator.startsWith("<")||this.semver.version===n.semver.version&&this.operator.includes("=")&&n.operator.includes("=")||l(this.semver,"<",n.semver,o)&&this.operator.startsWith(">")&&n.operator.startsWith("<")||l(this.semver,">",n.semver,o)&&this.operator.startsWith("<")&&n.operator.startsWith(">")))}}Oi=d;const h=Qi(),{safeRe:u,t:c}=pr(),l=Xl(),a=qr(),f=je(),i=et();return Oi}var Pi,As;function Hr(){if(As)return Pi;As=1;const r=et();return Pi=(h,u,c)=>{try{u=new r(u,c)}catch{return!1}return u.test(h)},Pi}var Ii,Ts;function ef(){if(Ts)return Ii;Ts=1;const r=et();return Ii=(h,u)=>new r(h,u).set.map(c=>c.map(l=>l.value).join(" ").trim().split(" ")),Ii}var Di,Cs;function tf(){if(Cs)return Di;Cs=1;const r=je(),d=et();return Di=(u,c,l)=>{let a=null,f=null,i=null;try{i=new d(c,l)}catch{return null}return u.forEach(s=>{i.test(s)&&(!a||f.compare(s)===-1)&&(a=s,f=new r(a,l))}),a},Di}var Ni,Rs;function rf(){if(Rs)return Ni;Rs=1;const r=je(),d=et();return Ni=(u,c,l)=>{let a=null,f=null,i=null;try{i=new d(c,l)}catch{return null}return u.forEach(s=>{i.test(s)&&(!a||f.compare(s)===1)&&(a=s,f=new r(a,l))}),a},Ni}var Fi,bs;function nf(){if(bs)return Fi;bs=1;const r=je(),d=et(),h=Mr();return Fi=(c,l)=>{c=new d(c,l);let a=new r("0.0.0");if(c.test(a)||(a=new r("0.0.0-0"),c.test(a)))return a;a=null;for(let f=0;f<c.set.length;++f){const i=c.set[f];let s=null;i.forEach(n=>{const o=new r(n.semver.version);switch(n.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||h(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),s&&(!a||h(a,s))&&(a=s)}return a&&c.test(a)?a:null},Fi}var xi,Os;function af(){if(Os)return xi;Os=1;const r=et();return xi=(h,u)=>{try{return new r(h,u).range||"*"}catch{return null}},xi}var Li,Ps;function na(){if(Ps)return Li;Ps=1;const r=je(),d=Br(),{ANY:h}=d,u=et(),c=Hr(),l=Mr(),a=ea(),f=ra(),i=ta();return Li=(n,o,t,m)=>{n=new r(n,m),o=new u(o,m);let v,y,p,T,R;switch(t){case">":v=l,y=f,p=a,T=">",R=">=";break;case"<":v=a,y=i,p=l,T="<",R="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(c(n,o,m))return!1;for(let O=0;O<o.set.length;++O){const P=o.set[O];let M=null,C=null;if(P.forEach(w=>{w.semver===h&&(w=new d(">=0.0.0")),M=M||w,C=C||w,v(w.semver,M.semver,m)?M=w:p(w.semver,C.semver,m)&&(C=w)}),M.operator===T||M.operator===R||(!C.operator||C.operator===T)&&y(n,C.semver))return!1;if(C.operator===R&&p(n,C.semver))return!1}return!0},Li}var Ui,Is;function of(){if(Is)return Ui;Is=1;const r=na();return Ui=(h,u,c)=>r(h,u,">",c),Ui}var $i,Ds;function sf(){if(Ds)return $i;Ds=1;const r=na();return $i=(h,u,c)=>r(h,u,"<",c),$i}var ki,Ns;function lf(){if(Ns)return ki;Ns=1;const r=et();return ki=(h,u,c)=>(h=new r(h,c),u=new r(u,c),h.intersects(u,c)),ki}var qi,Fs;function uf(){if(Fs)return qi;Fs=1;const r=Hr(),d=Ze();return qi=(h,u,c)=>{const l=[];let a=null,f=null;const i=h.sort((t,m)=>d(t,m,c));for(const t of i)r(t,u,c)?(f=t,a||(a=t)):(f&&l.push([a,f]),f=null,a=null);a&&l.push([a,null]);const s=[];for(const[t,m]of l)t===m?s.push(t):!m&&t===i[0]?s.push("*"):m?t===i[0]?s.push(`<=${m}`):s.push(`${t} - ${m}`):s.push(`>=${t}`);const n=s.join(" || "),o=typeof u.raw=="string"?u.raw:String(u);return n.length<o.length?n:u},qi}var Mi,xs;function cf(){if(xs)return Mi;xs=1;const r=et(),d=Br(),{ANY:h}=d,u=Hr(),c=Ze(),l=(o,t,m={})=>{if(o===t)return!0;o=new r(o,m),t=new r(t,m);let v=!1;e:for(const y of o.set){for(const p of t.set){const T=i(y,p,m);if(v=v||T!==null,T)continue e}if(v)return!1}return!0},a=[new d(">=0.0.0-0")],f=[new d(">=0.0.0")],i=(o,t,m)=>{if(o===t)return!0;if(o.length===1&&o[0].semver===h){if(t.length===1&&t[0].semver===h)return!0;m.includePrerelease?o=a:o=f}if(t.length===1&&t[0].semver===h){if(m.includePrerelease)return!0;t=f}const v=new Set;let y,p;for(const S of o)S.operator===">"||S.operator===">="?y=s(y,S,m):S.operator==="<"||S.operator==="<="?p=n(p,S,m):v.add(S.semver);if(v.size>1)return null;let T;if(y&&p){if(T=c(y.semver,p.semver,m),T>0)return null;if(T===0&&(y.operator!==">="||p.operator!=="<="))return null}for(const S of v){if(y&&!u(S,String(y),m)||p&&!u(S,String(p),m))return null;for(const E of t)if(!u(S,String(E),m))return!1;return!0}let R,O,P,M,C=p&&!m.includePrerelease&&p.semver.prerelease.length?p.semver:!1,w=y&&!m.includePrerelease&&y.semver.prerelease.length?y.semver:!1;C&&C.prerelease.length===1&&p.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(const S of t){if(M=M||S.operator===">"||S.operator===">=",P=P||S.operator==="<"||S.operator==="<=",y){if(w&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===w.major&&S.semver.minor===w.minor&&S.semver.patch===w.patch&&(w=!1),S.operator===">"||S.operator===">="){if(R=s(y,S,m),R===S&&R!==y)return!1}else if(y.operator===">="&&!u(y.semver,String(S),m))return!1}if(p){if(C&&S.semver.prerelease&&S.semver.prerelease.length&&S.semver.major===C.major&&S.semver.minor===C.minor&&S.semver.patch===C.patch&&(C=!1),S.operator==="<"||S.operator==="<="){if(O=n(p,S,m),O===S&&O!==p)return!1}else if(p.operator==="<="&&!u(p.semver,String(S),m))return!1}if(!S.operator&&(p||y)&&T!==0)return!1}return!(y&&P&&!p&&T!==0||p&&M&&!y&&T!==0||w||C)},s=(o,t,m)=>{if(!o)return t;const v=c(o.semver,t.semver,m);return v>0?o:v<0||t.operator===">"&&o.operator===">="?t:o},n=(o,t,m)=>{if(!o)return t;const v=c(o.semver,t.semver,m);return v<0?o:v>0||t.operator==="<"&&o.operator==="<="?t:o};return Mi=l,Mi}var Bi,Ls;function Kl(){if(Ls)return Bi;Ls=1;const r=pr(),d=kr(),h=je(),u=Vl(),c=$t(),l=Mc(),a=Bc(),f=Hc(),i=jc(),s=Gc(),n=Wc(),o=Vc(),t=Yc(),m=Ze(),v=zc(),y=Xc(),p=Zi(),T=Kc(),R=Jc(),O=Mr(),P=ea(),M=Yl(),C=zl(),w=ta(),S=ra(),E=Xl(),$=Qc(),U=Br(),L=et(),q=Hr(),D=ef(),I=tf(),F=rf(),k=nf(),J=af(),W=na(),ne=of(),ce=sf(),ue=lf(),ie=uf(),Ae=cf();return Bi={parse:c,valid:l,clean:a,inc:f,diff:i,major:s,minor:n,patch:o,prerelease:t,compare:m,rcompare:v,compareLoose:y,compareBuild:p,sort:T,rsort:R,gt:O,lt:P,eq:M,neq:C,gte:w,lte:S,cmp:E,coerce:$,Comparator:U,Range:L,satisfies:q,toComparators:D,maxSatisfying:I,minSatisfying:F,minVersion:k,validRange:J,outside:W,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ie,subset:Ae,SemVer:h,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:u.compareIdentifiers,rcompareIdentifiers:u.rcompareIdentifiers},Bi}var Nt={},ur={exports:{}};ur.exports;var Us;function ff(){return Us||(Us=1,(function(r,d){var h=200,u="__lodash_hash_undefined__",c=1,l=2,a=9007199254740991,f="[object Arguments]",i="[object Array]",s="[object AsyncFunction]",n="[object Boolean]",o="[object Date]",t="[object Error]",m="[object Function]",v="[object GeneratorFunction]",y="[object Map]",p="[object Number]",T="[object Null]",R="[object Object]",O="[object Promise]",P="[object Proxy]",M="[object RegExp]",C="[object Set]",w="[object String]",S="[object Symbol]",E="[object Undefined]",$="[object WeakMap]",U="[object ArrayBuffer]",L="[object DataView]",q="[object Float32Array]",D="[object Float64Array]",I="[object Int8Array]",F="[object Int16Array]",k="[object Int32Array]",J="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,K={};K[q]=K[D]=K[I]=K[F]=K[k]=K[J]=K[W]=K[ne]=K[ce]=!0,K[f]=K[i]=K[U]=K[n]=K[L]=K[o]=K[t]=K[m]=K[y]=K[p]=K[R]=K[M]=K[C]=K[w]=K[$]=!1;var Ee=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,A=typeof self=="object"&&self&&self.Object===Object&&self,g=Ee||A||Function("return this")(),H=d&&!d.nodeType&&d,N=H&&!0&&r&&!r.nodeType&&r,le=N&&N.exports===H,me=le&&Ee.process,pe=(function(){try{return me&&me.binding&&me.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function ye(b,x){for(var z=-1,se=b==null?0:b.length,Oe=0,Se=[];++z<se;){var Ne=b[z];x(Ne,z,b)&&(Se[Oe++]=Ne)}return Se}function Fe(b,x){for(var z=-1,se=x.length,Oe=b.length;++z<se;)b[Oe+z]=x[z];return b}function Re(b,x){for(var z=-1,se=b==null?0:b.length;++z<se;)if(x(b[z],z,b))return!0;return!1}function ke(b,x){for(var z=-1,se=Array(b);++z<b;)se[z]=x(z);return se}function pt(b){return function(x){return b(x)}}function rt(b,x){return b.has(x)}function e(b,x){return b?.[x]}function B(b){var x=-1,z=Array(b.size);return b.forEach(function(se,Oe){z[++x]=[Oe,se]}),z}function G(b,x){return function(z){return b(x(z))}}function re(b){var x=-1,z=Array(b.size);return b.forEach(function(se){z[++x]=se}),z}var V=Array.prototype,te=Function.prototype,Z=Object.prototype,ae=g["__core-js_shared__"],ge=te.toString,ve=Z.hasOwnProperty,Te=(function(){var b=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""})(),de=Z.toString,xe=RegExp("^"+ge.call(ve).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=le?g.Buffer:void 0,j=g.Symbol,X=g.Uint8Array,Y=Z.propertyIsEnumerable,Q=V.splice,ee=j?j.toStringTag:void 0,fe=Object.getOwnPropertySymbols,oe=_?_.isBuffer:void 0,he=G(Object.keys,Object),we=It(g,"DataView"),be=It(g,"Map"),De=It(g,"Promise"),Ce=It(g,"Set"),Pt=It(g,"WeakMap"),Ke=It(Object,"create"),mt=Et(we),nu=Et(be),iu=Et(De),au=Et(Ce),ou=Et(Pt),oa=j?j.prototype:void 0,jr=oa?oa.valueOf:void 0;function gt(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function su(){this.__data__=Ke?Ke(null):{},this.size=0}function lu(b){var x=this.has(b)&&delete this.__data__[b];return this.size-=x?1:0,x}function uu(b){var x=this.__data__;if(Ke){var z=x[b];return z===u?void 0:z}return ve.call(x,b)?x[b]:void 0}function cu(b){var x=this.__data__;return Ke?x[b]!==void 0:ve.call(x,b)}function fu(b,x){var z=this.__data__;return this.size+=this.has(b)?0:1,z[b]=Ke&&x===void 0?u:x,this}gt.prototype.clear=su,gt.prototype.delete=lu,gt.prototype.get=uu,gt.prototype.has=cu,gt.prototype.set=fu;function nt(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function du(){this.__data__=[],this.size=0}function hu(b){var x=this.__data__,z=gr(x,b);if(z<0)return!1;var se=x.length-1;return z==se?x.pop():Q.call(x,z,1),--this.size,!0}function pu(b){var x=this.__data__,z=gr(x,b);return z<0?void 0:x[z][1]}function mu(b){return gr(this.__data__,b)>-1}function gu(b,x){var z=this.__data__,se=gr(z,b);return se<0?(++this.size,z.push([b,x])):z[se][1]=x,this}nt.prototype.clear=du,nt.prototype.delete=hu,nt.prototype.get=pu,nt.prototype.has=mu,nt.prototype.set=gu;function vt(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function vu(){this.size=0,this.__data__={hash:new gt,map:new(be||nt),string:new gt}}function Eu(b){var x=vr(this,b).delete(b);return this.size-=x?1:0,x}function yu(b){return vr(this,b).get(b)}function wu(b){return vr(this,b).has(b)}function _u(b,x){var z=vr(this,b),se=z.size;return z.set(b,x),this.size+=z.size==se?0:1,this}vt.prototype.clear=vu,vt.prototype.delete=Eu,vt.prototype.get=yu,vt.prototype.has=wu,vt.prototype.set=_u;function mr(b){var x=-1,z=b==null?0:b.length;for(this.__data__=new vt;++x<z;)this.add(b[x])}function Su(b){return this.__data__.set(b,u),this}function Au(b){return this.__data__.has(b)}mr.prototype.add=mr.prototype.push=Su,mr.prototype.has=Au;function ot(b){var x=this.__data__=new nt(b);this.size=x.size}function Tu(){this.__data__=new nt,this.size=0}function Cu(b){var x=this.__data__,z=x.delete(b);return this.size=x.size,z}function Ru(b){return this.__data__.get(b)}function bu(b){return this.__data__.has(b)}function Ou(b,x){var z=this.__data__;if(z instanceof nt){var se=z.__data__;if(!be||se.length<h-1)return se.push([b,x]),this.size=++z.size,this;z=this.__data__=new vt(se)}return z.set(b,x),this.size=z.size,this}ot.prototype.clear=Tu,ot.prototype.delete=Cu,ot.prototype.get=Ru,ot.prototype.has=bu,ot.prototype.set=Ou;function Pu(b,x){var z=Er(b),se=!z&&Gu(b),Oe=!z&&!se&&Gr(b),Se=!z&&!se&&!Oe&&ma(b),Ne=z||se||Oe||Se,Le=Ne?ke(b.length,String):[],Ue=Le.length;for(var Ie in b)ve.call(b,Ie)&&!(Ne&&(Ie=="length"||Oe&&(Ie=="offset"||Ie=="parent")||Se&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||qu(Ie,Ue)))&&Le.push(Ie);return Le}function gr(b,x){for(var z=b.length;z--;)if(fa(b[z][0],x))return z;return-1}function Iu(b,x,z){var se=x(b);return Er(b)?se:Fe(se,z(b))}function qt(b){return b==null?b===void 0?E:T:ee&&ee in Object(b)?$u(b):ju(b)}function sa(b){return Mt(b)&&qt(b)==f}function la(b,x,z,se,Oe){return b===x?!0:b==null||x==null||!Mt(b)&&!Mt(x)?b!==b&&x!==x:Du(b,x,z,se,la,Oe)}function Du(b,x,z,se,Oe,Se){var Ne=Er(b),Le=Er(x),Ue=Ne?i:st(b),Ie=Le?i:st(x);Ue=Ue==f?R:Ue,Ie=Ie==f?R:Ie;var We=Ue==R,Je=Ie==R,qe=Ue==Ie;if(qe&&Gr(b)){if(!Gr(x))return!1;Ne=!0,We=!1}if(qe&&!We)return Se||(Se=new ot),Ne||ma(b)?ua(b,x,z,se,Oe,Se):Lu(b,x,Ue,z,se,Oe,Se);if(!(z&c)){var Ye=We&&ve.call(b,"__wrapped__"),ze=Je&&ve.call(x,"__wrapped__");if(Ye||ze){var lt=Ye?b.value():b,it=ze?x.value():x;return Se||(Se=new ot),Oe(lt,it,z,se,Se)}}return qe?(Se||(Se=new ot),Uu(b,x,z,se,Oe,Se)):!1}function Nu(b){if(!pa(b)||Bu(b))return!1;var x=da(b)?xe:ie;return x.test(Et(b))}function Fu(b){return Mt(b)&&ha(b.length)&&!!K[qt(b)]}function xu(b){if(!Hu(b))return he(b);var x=[];for(var z in Object(b))ve.call(b,z)&&z!="constructor"&&x.push(z);return x}function ua(b,x,z,se,Oe,Se){var Ne=z&c,Le=b.length,Ue=x.length;if(Le!=Ue&&!(Ne&&Ue>Le))return!1;var Ie=Se.get(b);if(Ie&&Se.get(x))return Ie==x;var We=-1,Je=!0,qe=z&l?new mr:void 0;for(Se.set(b,x),Se.set(x,b);++We<Le;){var Ye=b[We],ze=x[We];if(se)var lt=Ne?se(ze,Ye,We,x,b,Se):se(Ye,ze,We,b,x,Se);if(lt!==void 0){if(lt)continue;Je=!1;break}if(qe){if(!Re(x,function(it,yt){if(!rt(qe,yt)&&(Ye===it||Oe(Ye,it,z,se,Se)))return qe.push(yt)})){Je=!1;break}}else if(!(Ye===ze||Oe(Ye,ze,z,se,Se))){Je=!1;break}}return Se.delete(b),Se.delete(x),Je}function Lu(b,x,z,se,Oe,Se,Ne){switch(z){case L:if(b.byteLength!=x.byteLength||b.byteOffset!=x.byteOffset)return!1;b=b.buffer,x=x.buffer;case U:return!(b.byteLength!=x.byteLength||!Se(new X(b),new X(x)));case n:case o:case p:return fa(+b,+x);case t:return b.name==x.name&&b.message==x.message;case M:case w:return b==x+"";case y:var Le=B;case C:var Ue=se&c;if(Le||(Le=re),b.size!=x.size&&!Ue)return!1;var Ie=Ne.get(b);if(Ie)return Ie==x;se|=l,Ne.set(b,x);var We=ua(Le(b),Le(x),se,Oe,Se,Ne);return Ne.delete(b),We;case S:if(jr)return jr.call(b)==jr.call(x)}return!1}function Uu(b,x,z,se,Oe,Se){var Ne=z&c,Le=ca(b),Ue=Le.length,Ie=ca(x),We=Ie.length;if(Ue!=We&&!Ne)return!1;for(var Je=Ue;Je--;){var qe=Le[Je];if(!(Ne?qe in x:ve.call(x,qe)))return!1}var Ye=Se.get(b);if(Ye&&Se.get(x))return Ye==x;var ze=!0;Se.set(b,x),Se.set(x,b);for(var lt=Ne;++Je<Ue;){qe=Le[Je];var it=b[qe],yt=x[qe];if(se)var ga=Ne?se(yt,it,qe,x,b,Se):se(it,yt,qe,b,x,Se);if(!(ga===void 0?it===yt||Oe(it,yt,z,se,Se):ga)){ze=!1;break}lt||(lt=qe=="constructor")}if(ze&&!lt){var yr=b.constructor,wr=x.constructor;yr!=wr&&"constructor"in b&&"constructor"in x&&!(typeof yr=="function"&&yr instanceof yr&&typeof wr=="function"&&wr instanceof wr)&&(ze=!1)}return Se.delete(b),Se.delete(x),ze}function ca(b){return Iu(b,Yu,ku)}function vr(b,x){var z=b.__data__;return Mu(x)?z[typeof x=="string"?"string":"hash"]:z.map}function It(b,x){var z=e(b,x);return Nu(z)?z:void 0}function $u(b){var x=ve.call(b,ee),z=b[ee];try{b[ee]=void 0;var se=!0}catch{}var Oe=de.call(b);return se&&(x?b[ee]=z:delete b[ee]),Oe}var ku=fe?function(b){return b==null?[]:(b=Object(b),ye(fe(b),function(x){return Y.call(b,x)}))}:zu,st=qt;(we&&st(new we(new ArrayBuffer(1)))!=L||be&&st(new be)!=y||De&&st(De.resolve())!=O||Ce&&st(new Ce)!=C||Pt&&st(new Pt)!=$)&&(st=function(b){var x=qt(b),z=x==R?b.constructor:void 0,se=z?Et(z):"";if(se)switch(se){case mt:return L;case nu:return y;case iu:return O;case au:return C;case ou:return $}return x});function qu(b,x){return x=x??a,!!x&&(typeof b=="number"||Ae.test(b))&&b>-1&&b%1==0&&b<x}function Mu(b){var x=typeof b;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?b!=="__proto__":b===null}function Bu(b){return!!Te&&Te in b}function Hu(b){var x=b&&b.constructor,z=typeof x=="function"&&x.prototype||Z;return b===z}function ju(b){return de.call(b)}function Et(b){if(b!=null){try{return ge.call(b)}catch{}try{return b+""}catch{}}return""}function fa(b,x){return b===x||b!==b&&x!==x}var Gu=sa((function(){return arguments})())?sa:function(b){return Mt(b)&&ve.call(b,"callee")&&!Y.call(b,"callee")},Er=Array.isArray;function Wu(b){return b!=null&&ha(b.length)&&!da(b)}var Gr=oe||Xu;function Vu(b,x){return la(b,x)}function da(b){if(!pa(b))return!1;var x=qt(b);return x==m||x==v||x==s||x==P}function ha(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=a}function pa(b){var x=typeof b;return b!=null&&(x=="object"||x=="function")}function Mt(b){return b!=null&&typeof b=="object"}var ma=_e?pt(_e):Fu;function Yu(b){return Wu(b)?Pu(b):xu(b)}function zu(){return[]}function Xu(){return!1}r.exports=Vu})(ur,ur.exports)),ur.exports}var $s;function df(){if($s)return Nt;$s=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.DownloadedUpdateHelper=void 0,Nt.createTempUpdateFile=f;const r=fr,d=dt,h=ff(),u=ht(),c=Pe;let l=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return c.join(this.cacheDir,"pending")}async validateDownloadedPath(s,n,o,t){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return h(this.versionInfo,n)&&h(this.fileInfo.info,o.info)&&await(0,u.pathExists)(s)?s:null;const m=await this.getValidCachedUpdateFile(o,t);return m===null?null:(t.info(`Update has already been downloaded to ${s}).`),this._file=m,m)}async setDownloadedFile(s,n,o,t,m,v){this._file=s,this._packageFile=n,this.versionInfo=o,this.fileInfo=t,this._downloadedFileInfo={fileName:m,sha512:t.info.sha512,isAdminRightsRequired:t.info.isAdminRightsRequired===!0},v&&await(0,u.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,u.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,n){const o=this.getUpdateInfoFile();if(!await(0,u.pathExists)(o))return null;let m;try{m=await(0,u.readJson)(o)}catch(T){let R="No cached update info available";return T.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),R+=` (error on read: ${T.message})`),n.info(R),null}if(!(m?.fileName!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==m.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=c.join(this.cacheDirForPendingUpdate,m.fileName);if(!await(0,u.pathExists)(y))return n.info("Cached update file doesn't exist"),null;const p=await a(y);return s.info.sha512!==p?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=m,y)}getUpdateInfoFile(){return c.join(this.cacheDirForPendingUpdate,"update-info.json")}};Nt.DownloadedUpdateHelper=l;function a(i,s="sha512",n="base64",o){return new Promise((t,m)=>{const v=(0,r.createHash)(s);v.on("error",m).setEncoding(n),(0,d.createReadStream)(i,{...o,highWaterMark:1024*1024}).on("error",m).on("end",()=>{v.end(),t(v.read())}).pipe(v,{end:!1})})}async function f(i,s,n){let o=0,t=c.join(s,i);for(let m=0;m<3;m++)try{return await(0,u.unlink)(t),t}catch(v){if(v.code==="ENOENT")return t;n.warn(`Error on remove temp update file: ${v}`),t=c.join(s,`${o++}-${i}`)}return t}return Nt}var Vt={},Nr={},ks;function hf(){if(ks)return Nr;ks=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.getAppCacheDir=h;const r=Pe,d=Lr;function h(){const u=(0,d.homedir)();let c;return process.platform==="win32"?c=process.env.LOCALAPPDATA||r.join(u,"AppData","Local"):process.platform==="darwin"?c=r.join(u,"Library","Caches"):c=process.env.XDG_CACHE_HOME||r.join(u,".cache"),c}return Nr}var qs;function pf(){if(qs)return Vt;qs=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.ElectronAppAdapter=void 0;const r=Pe,d=hf();let h=class{constructor(c=ft.app){this.app=c}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?r.join(process.resourcesPath,"app-update.yml"):r.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(c){this.app.once("quit",(l,a)=>c(a))}};return Vt.ElectronAppAdapter=h,Vt}var Hi={},Ms;function mf(){return Ms||(Ms=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ElectronHttpExecutor=r.NET_SESSION_NAME=void 0,r.getNetSession=h;const d=$e();r.NET_SESSION_NAME="electron-updater";function h(){return ft.session.fromPartition(r.NET_SESSION_NAME,{cache:!1})}class u extends d.HttpExecutor{constructor(l){super(),this.proxyLoginCallback=l,this.cachedSession=null}async download(l,a,f){return await f.cancellationToken.createPromise((i,s,n)=>{const o={headers:f.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(l,o),(0,d.configureRequestOptions)(o),this.doDownload(o,{destination:a,options:f,onCancel:n,callback:t=>{t==null?i(a):s(t)},responseHandler:null},0)})}createRequest(l,a){l.headers&&l.headers.Host&&(l.host=l.headers.Host,delete l.headers.Host),this.cachedSession==null&&(this.cachedSession=h());const f=ft.net.request({...l,session:this.cachedSession});return f.on("response",a),this.proxyLoginCallback!=null&&f.on("login",this.proxyLoginCallback),f}addRedirectHandlers(l,a,f,i,s){l.on("redirect",(n,o,t)=>{l.abort(),i>this.maxRedirects?f(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(t,a))})}}r.ElectronHttpExecutor=u})(Hi)),Hi}var Yt={},Tt={},ji,Bs;function gf(){if(Bs)return ji;Bs=1;var r="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,h=RegExp(d.source),u=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,c=typeof self=="object"&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),a=Object.prototype,f=a.toString,i=l.Symbol,s=i?i.prototype:void 0,n=s?s.toString:void 0;function o(p){if(typeof p=="string")return p;if(m(p))return n?n.call(p):"";var T=p+"";return T=="0"&&1/p==-1/0?"-0":T}function t(p){return!!p&&typeof p=="object"}function m(p){return typeof p=="symbol"||t(p)&&f.call(p)==r}function v(p){return p==null?"":o(p)}function y(p){return p=v(p),p&&h.test(p)?p.replace(d,"\\$&"):p}return ji=y,ji}var Hs;function bt(){if(Hs)return Tt;Hs=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.newBaseUrl=h,Tt.newUrlFromBase=u,Tt.getChannelFilename=c,Tt.blockmapFiles=l;const r=Ct,d=gf();function h(a){const f=new r.URL(a);return f.pathname.endsWith("/")||(f.pathname+="/"),f}function u(a,f,i=!1){const s=new r.URL(a,f),n=f.search;return n!=null&&n.length!==0?s.search=n:i&&(s.search=`noCache=${Date.now().toString(32)}`),s}function c(a){return`${a}.yml`}function l(a,f,i){const s=u(`${a.pathname}.blockmap`,a);return[u(`${a.pathname.replace(new RegExp(d(i),"g"),f)}.blockmap`,a),s]}return Tt}var at={},js;function Xe(){if(js)return at;js=1,Object.defineProperty(at,"__esModule",{value:!0}),at.Provider=void 0,at.findFile=c,at.parseUpdateInfo=l,at.getFileList=a,at.resolveFiles=f;const r=$e(),d=Ji(),h=bt();let u=class{constructor(s){this.runtimeOptions=s,this.requestHeaders=null,this.executor=s.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const s=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(s==="x64"?"":`-${s}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(s){return`${s}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(s){this.requestHeaders=s}httpRequest(s,n,o){return this.executor.request(this.createRequestOptions(s,n),o)}createRequestOptions(s,n){const o={};return this.requestHeaders==null?n!=null&&(o.headers=n):o.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,r.configureRequestUrl)(s,o),o}};at.Provider=u;function c(i,s,n){if(i.length===0)throw(0,r.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const o=i.find(t=>t.url.pathname.toLowerCase().endsWith(`.${s}`));return o??(n==null?i[0]:i.find(t=>!n.some(m=>t.url.pathname.toLowerCase().endsWith(`.${m}`))))}function l(i,s,n){if(i==null)throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let o;try{o=(0,d.load)(i)}catch(t){throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): ${t.stack||t.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return o}function a(i){const s=i.files;if(s!=null&&s.length>0)return s;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,r.newError)(`No files provided: ${(0,r.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function f(i,s,n=o=>o){const t=a(i).map(y=>{if(y.sha2==null&&y.sha512==null)throw(0,r.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,r.safeStringifyJson)(y)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,h.newUrlFromBase)(n(y.url),s),info:y}}),m=i.packages,v=m==null?null:m[process.arch]||m.ia32;return v!=null&&(t[0].packageInfo={...v,path:(0,h.newUrlFromBase)(n(v.path),s).href}),t}return at}var Gs;function Jl(){if(Gs)return Yt;Gs=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.GenericProvider=void 0;const r=$e(),d=bt(),h=Xe();let u=class extends h.Provider{constructor(l,a,f){super(f),this.configuration=l,this.updater=a,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const l=this.updater.channel||this.configuration.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=(0,d.getChannelFilename)(this.channel),a=(0,d.newUrlFromBase)(l,this.baseUrl,this.updater.isAddNoCacheQuery);for(let f=0;;f++)try{return(0,h.parseUpdateInfo)(await this.httpRequest(a),l,a)}catch(i){if(i instanceof r.HttpError&&i.statusCode===404)throw(0,r.newError)(`Cannot find channel "${l}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&f<3){await new Promise((s,n)=>{try{setTimeout(s,1e3*f)}catch(o){n(o)}});continue}throw i}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}};return Yt.GenericProvider=u,Yt}var zt={},Xt={},Ws;function vf(){if(Ws)return Xt;Ws=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.BitbucketProvider=void 0;const r=$e(),d=bt(),h=Xe();let u=class extends h.Provider{constructor(l,a,f){super({...f,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=a;const{owner:i,slug:s}=l;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const l=new r.CancellationToken,a=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),f=(0,d.newUrlFromBase)(a,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(f,void 0,l);return(0,h.parseUpdateInfo)(i,a,f)}catch(i){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{owner:l,slug:a}=this.configuration;return`Bitbucket (owner: ${l}, slug: ${a}, channel: ${this.channel})`}};return Xt.BitbucketProvider=u,Xt}var ct={},Vs;function Ql(){if(Vs)return ct;Vs=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.GitHubProvider=ct.BaseGitHubProvider=void 0,ct.computeReleaseNotes=s;const r=$e(),d=Kl(),h=Ct,u=bt(),c=Xe(),l=/\/tag\/([^/]+)$/;class a extends c.Provider{constructor(o,t,m){super({...m,isUseMultipleRangeRequest:!1}),this.options=o,this.baseUrl=(0,u.newBaseUrl)((0,r.githubUrl)(o,t));const v=t==="github.com"?"api.github.com":t;this.baseApiUrl=(0,u.newBaseUrl)((0,r.githubUrl)(o,v))}computeGithubBasePath(o){const t=this.options.host;return t&&!["github.com","api.github.com"].includes(t)?`/api/v3${o}`:o}}ct.BaseGitHubProvider=a;let f=class extends a{constructor(o,t,m){super(o,"github.com",m),this.options=o,this.updater=t}get channel(){const o=this.updater.channel||this.options.channel;return o==null?this.getDefaultChannelName():this.getCustomChannelName(o)}async getLatestVersion(){var o,t,m,v,y;const p=new r.CancellationToken,T=await this.httpRequest((0,u.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},p),R=(0,r.parseXml)(T);let O=R.element("entry",!1,"No published versions on GitHub"),P=null;try{if(this.updater.allowPrerelease){const $=((o=this.updater)===null||o===void 0?void 0:o.channel)||((t=d.prerelease(this.updater.currentVersion))===null||t===void 0?void 0:t[0])||null;if($===null)P=l.exec(O.element("link").attribute("href"))[1];else for(const U of R.getElements("entry")){const L=l.exec(U.element("link").attribute("href"));if(L===null)continue;const q=L[1],D=((m=d.prerelease(q))===null||m===void 0?void 0:m[0])||null,I=!$||["alpha","beta"].includes($),F=D!==null&&!["alpha","beta"].includes(String(D));if(I&&!F&&!($==="beta"&&D==="alpha")){P=q;break}if(D&&D===$){P=q;break}}}else{P=await this.getLatestTagName(p);for(const $ of R.getElements("entry"))if(l.exec($.element("link").attribute("href"))[1]===P){O=$;break}}}catch($){throw(0,r.newError)(`Cannot parse releases feed: ${$.stack||$.message},
XML:
${T}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(P==null)throw(0,r.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let M,C="",w="";const S=async $=>{C=(0,u.getChannelFilename)($),w=(0,u.newUrlFromBase)(this.getBaseDownloadPath(String(P),C),this.baseUrl);const U=this.createRequestOptions(w);try{return await this.executor.request(U,p)}catch(L){throw L instanceof r.HttpError&&L.statusCode===404?(0,r.newError)(`Cannot find ${C} in the latest release artifacts (${w}): ${L.stack||L.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):L}};try{let $=this.channel;this.updater.allowPrerelease&&(!((v=d.prerelease(P))===null||v===void 0)&&v[0])&&($=this.getCustomChannelName(String((y=d.prerelease(P))===null||y===void 0?void 0:y[0]))),M=await S($)}catch($){if(this.updater.allowPrerelease)M=await S(this.getDefaultChannelName());else throw $}const E=(0,c.parseUpdateInfo)(M,C,w);return E.releaseName==null&&(E.releaseName=O.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,R,O)),{tag:P,...E}}async getLatestTagName(o){const t=this.options,m=t.host==null||t.host==="github.com"?(0,u.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new h.URL(`${this.computeGithubBasePath(`/repos/${t.owner}/${t.repo}/releases`)}/latest`,this.baseApiUrl);try{const v=await this.httpRequest(m,{Accept:"application/json"},o);return v==null?null:JSON.parse(v).tag_name}catch(v){throw(0,r.newError)(`Unable to find latest version on GitHub (${m}), please ensure a production release exists: ${v.stack||v.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(o){return(0,c.resolveFiles)(o,this.baseUrl,t=>this.getBaseDownloadPath(o.tag,t.replace(/ /g,"-")))}getBaseDownloadPath(o,t){return`${this.basePath}/download/${o}/${t}`}};ct.GitHubProvider=f;function i(n){const o=n.elementValueOrEmpty("content");return o==="No content."?"":o}function s(n,o,t,m){if(!o)return i(m);const v=[];for(const y of t.getElements("entry")){const p=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(n,p)&&v.push({version:p,note:i(y)})}return v.sort((y,p)=>d.rcompare(y.version,p.version))}return ct}var Kt={},Ys;function Ef(){if(Ys)return Kt;Ys=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.KeygenProvider=void 0;const r=$e(),d=bt(),h=Xe();let u=class extends h.Provider{constructor(l,a,f){super({...f,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=a,this.defaultHostname="api.keygen.sh";const i=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${i}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const l=new r.CancellationToken,a=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),f=(0,d.newUrlFromBase)(a,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(f,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},l);return(0,h.parseUpdateInfo)(i,a,f)}catch(i){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{account:l,product:a,platform:f}=this.configuration;return`Keygen (account: ${l}, product: ${a}, platform: ${f}, channel: ${this.channel})`}};return Kt.KeygenProvider=u,Kt}var Jt={},zs;function yf(){if(zs)return Jt;zs=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PrivateGitHubProvider=void 0;const r=$e(),d=Ji(),h=Pe,u=Ct,c=bt(),l=Ql(),a=Xe();let f=class extends l.BaseGitHubProvider{constructor(s,n,o,t){super(s,"api.github.com",t),this.updater=n,this.token=o}createRequestOptions(s,n){const o=super.createRequestOptions(s,n);return o.redirect="manual",o}async getLatestVersion(){const s=new r.CancellationToken,n=(0,c.getChannelFilename)(this.getDefaultChannelName()),o=await this.getLatestVersionInfo(s),t=o.assets.find(y=>y.name===n);if(t==null)throw(0,r.newError)(`Cannot find ${n} in the release ${o.html_url||o.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const m=new u.URL(t.url);let v;try{v=(0,d.load)(await this.httpRequest(m,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof r.HttpError&&y.statusCode===404?(0,r.newError)(`Cannot find ${n} in the latest release artifacts (${m}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return v.assets=o.assets,v}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const n=this.updater.allowPrerelease;let o=this.basePath;n||(o=`${o}/latest`);const t=(0,c.newUrlFromBase)(o,this.baseUrl);try{const m=JSON.parse(await this.httpRequest(t,this.configureHeaders("application/vnd.github.v3+json"),s));return n?m.find(v=>v.prerelease)||m[0]:m}catch(m){throw(0,r.newError)(`Unable to find latest version on GitHub (${t}), please ensure a production release exists: ${m.stack||m.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,a.getFileList)(s).map(n=>{const o=h.posix.basename(n.url).replace(/ /g,"-"),t=s.assets.find(m=>m!=null&&m.name===o);if(t==null)throw(0,r.newError)(`Cannot find asset "${o}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new u.URL(t.url),info:n}})}};return Jt.PrivateGitHubProvider=f,Jt}var Xs;function wf(){if(Xs)return zt;Xs=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isUrlProbablySupportMultiRangeRequests=a,zt.createClient=f;const r=$e(),d=vf(),h=Jl(),u=Ql(),c=Ef(),l=yf();function a(i){return!i.includes("s3.amazonaws.com")}function f(i,s,n){if(typeof i=="string")throw(0,r.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const o=i.provider;switch(o){case"github":{const t=i,m=(t.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||t.token;return m==null?new u.GitHubProvider(t,s,n):new l.PrivateGitHubProvider(t,s,m,n)}case"bitbucket":return new d.BitbucketProvider(i,s,n);case"keygen":return new c.KeygenProvider(i,s,n);case"s3":case"spaces":return new h.GenericProvider({provider:"generic",url:(0,r.getS3LikeProviderBaseUrl)(i),channel:i.channel||null},s,{...n,isUseMultipleRangeRequest:!1});case"generic":{const t=i;return new h.GenericProvider(t,s,{...n,isUseMultipleRangeRequest:t.useMultipleRangeRequest!==!1&&a(t.url)})}case"custom":{const t=i,m=t.updateProvider;if(!m)throw(0,r.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new m(t,s,n)}default:throw(0,r.newError)(`Unsupported provider: ${o}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return zt}var Qt={},Zt={},Ft={},xt={},Ks;function ia(){if(Ks)return xt;Ks=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.OperationKind=void 0,xt.computeOperations=d;var r;(function(a){a[a.COPY=0]="COPY",a[a.DOWNLOAD=1]="DOWNLOAD"})(r||(xt.OperationKind=r={}));function d(a,f,i){const s=l(a.files),n=l(f.files);let o=null;const t=f.files[0],m=[],v=t.name,y=s.get(v);if(y==null)throw new Error(`no file ${v} in old blockmap`);const p=n.get(v);let T=0;const{checksumToOffset:R,checksumToOldSize:O}=c(s.get(v),y.offset,i);let P=t.offset;for(let M=0;M<p.checksums.length;P+=p.sizes[M],M++){const C=p.sizes[M],w=p.checksums[M];let S=R.get(w);S!=null&&O.get(w)!==C&&(i.warn(`Checksum ("${w}") matches, but size differs (old: ${O.get(w)}, new: ${C})`),S=void 0),S===void 0?(T++,o!=null&&o.kind===r.DOWNLOAD&&o.end===P?o.end+=C:(o={kind:r.DOWNLOAD,start:P,end:P+C},u(o,m,w,M))):o!=null&&o.kind===r.COPY&&o.end===S?o.end+=C:(o={kind:r.COPY,start:S,end:S+C},u(o,m,w,M))}return T>0&&i.info(`File${t.name==="file"?"":" "+t.name} has ${T} changed blocks`),m}const h=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function u(a,f,i,s){if(h&&f.length!==0){const n=f[f.length-1];if(n.kind===a.kind&&a.start<n.end&&a.start>n.start){const o=[n.start,n.end,a.start,a.end].reduce((t,m)=>t<m?t:m);throw new Error(`operation (block index: ${s}, checksum: ${i}, kind: ${r[a.kind]}) overlaps previous operation (checksum: ${i}):
abs: ${n.start} until ${n.end} and ${a.start} until ${a.end}
rel: ${n.start-o} until ${n.end-o} and ${a.start-o} until ${a.end-o}`)}}f.push(a)}function c(a,f,i){const s=new Map,n=new Map;let o=f;for(let t=0;t<a.checksums.length;t++){const m=a.checksums[t],v=a.sizes[t],y=n.get(m);if(y===void 0)s.set(m,o),n.set(m,v);else if(i.debug!=null){const p=y===v?"(same size)":`(size: ${y}, this size: ${v})`;i.debug(`${m} duplicated in blockmap ${p}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=v}return{checksumToOffset:s,checksumToOldSize:n}}function l(a){const f=new Map;for(const i of a)f.set(i.name,i);return f}return xt}var Js;function Zl(){if(Js)return Ft;Js=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.DataSplitter=void 0,Ft.copyData=a;const r=$e(),d=dt,h=cr,u=ia(),c=Buffer.from(`\r
\r
`);var l;(function(i){i[i.INIT=0]="INIT",i[i.HEADER=1]="HEADER",i[i.BODY=2]="BODY"})(l||(l={}));function a(i,s,n,o,t){const m=(0,d.createReadStream)("",{fd:n,autoClose:!1,start:i.start,end:i.end-1});m.on("error",o),m.once("end",t),m.pipe(s,{end:!1})}let f=class extends h.Writable{constructor(s,n,o,t,m,v){super(),this.out=s,this.options=n,this.partIndexToTaskIndex=o,this.partIndexToLength=m,this.finishHandler=v,this.partIndex=-1,this.headerListBuffer=null,this.readState=l.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=t.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,n,o){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(o).catch(o)}async handleData(s){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,r.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const o=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=o,n=o}else if(this.remainingPartDataCount>0){const o=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=o,await this.processPartData(s,0,o),n=o}if(n!==s.length){if(this.readState===l.HEADER){const o=this.searchHeaderListEnd(s,n);if(o===-1)return;n=o,this.readState=l.BODY,this.headerListBuffer=null}for(;;){if(this.readState===l.BODY)this.readState=l.INIT;else{this.partIndex++;let v=this.partIndexToTaskIndex.get(this.partIndex);if(v==null)if(this.isFinished)v=this.options.end;else throw(0,r.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<v)await this.copyExistingData(y,v);else if(y>v)throw(0,r.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(s,n),n===-1){this.readState=l.HEADER;return}}const o=this.partIndexToLength[this.partIndex],t=n+o,m=Math.min(t,s.length);if(await this.processPartStarted(s,n,m),this.remainingPartDataCount=o-(m-n),this.remainingPartDataCount>0)return;if(n=t+this.boundaryLength,n>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-t);return}}}}copyExistingData(s,n){return new Promise((o,t)=>{const m=()=>{if(s===n){o();return}const v=this.options.tasks[s];if(v.kind!==u.OperationKind.COPY){t(new Error("Task kind must be COPY"));return}a(v,this.out,this.options.oldFileFd,t,()=>{s++,m()})};m()})}searchHeaderListEnd(s,n){const o=s.indexOf(c,n);if(o!==-1)return o+c.length;const t=n===0?s:s.slice(n);return this.headerListBuffer==null?this.headerListBuffer=t:this.headerListBuffer=Buffer.concat([this.headerListBuffer,t]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,r.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,n,o){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,n,o)}processPartData(s,n,o){this.actualPartLength+=o-n;const t=this.out;return t.write(n===0&&s.length===o?s:s.slice(n,o))?Promise.resolve():new Promise((m,v)=>{t.on("error",v),t.once("drain",()=>{t.removeListener("error",v),m()})})}};return Ft.DataSplitter=f,Ft}var er={},Qs;function _f(){if(Qs)return er;Qs=1,Object.defineProperty(er,"__esModule",{value:!0}),er.executeTasksUsingMultipleRangeRequests=u,er.checkIsRangesSupported=l;const r=$e(),d=Zl(),h=ia();function u(a,f,i,s,n){const o=t=>{if(t>=f.length){a.fileMetadataBuffer!=null&&i.write(a.fileMetadataBuffer),i.end();return}const m=t+1e3;c(a,{tasks:f,start:t,end:Math.min(f.length,m),oldFileFd:s},i,()=>o(m),n)};return o}function c(a,f,i,s,n){let o="bytes=",t=0;const m=new Map,v=[];for(let T=f.start;T<f.end;T++){const R=f.tasks[T];R.kind===h.OperationKind.DOWNLOAD&&(o+=`${R.start}-${R.end-1}, `,m.set(t,T),t++,v.push(R.end-R.start))}if(t<=1){const T=R=>{if(R>=f.end){s();return}const O=f.tasks[R++];if(O.kind===h.OperationKind.COPY)(0,d.copyData)(O,i,f.oldFileFd,n,()=>T(R));else{const P=a.createRequestOptions();P.headers.Range=`bytes=${O.start}-${O.end-1}`;const M=a.httpExecutor.createRequest(P,C=>{l(C,n)&&(C.pipe(i,{end:!1}),C.once("end",()=>T(R)))});a.httpExecutor.addErrorAndTimeoutHandlers(M,n),M.end()}};T(f.start);return}const y=a.createRequestOptions();y.headers.Range=o.substring(0,o.length-2);const p=a.httpExecutor.createRequest(y,T=>{if(!l(T,n))return;const R=(0,r.safeGetHeader)(T,"content-type"),O=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(R);if(O==null){n(new Error(`Content-Type "multipart/byteranges" is expected, but got "${R}"`));return}const P=new d.DataSplitter(i,f,m,O[1]||O[2],v,s);P.on("error",n),T.pipe(P),T.on("end",()=>{setTimeout(()=>{p.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});a.httpExecutor.addErrorAndTimeoutHandlers(p,n),p.end()}function l(a,f){if(a.statusCode>=400)return f((0,r.createHttpError)(a)),!1;if(a.statusCode!==206){const i=(0,r.safeGetHeader)(a,"accept-ranges");if(i==null||i==="none")return f(new Error(`Server doesn't support Accept-Ranges (response code ${a.statusCode})`)),!1}return!0}return er}var tr={},Zs;function Sf(){if(Zs)return tr;Zs=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.ProgressDifferentialDownloadCallbackTransform=void 0;const r=cr;var d;(function(u){u[u.COPY=0]="COPY",u[u.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let h=class extends r.Transform{constructor(c,l,a){super(),this.progressDifferentialDownloadInfo=c,this.cancellationToken=l,this.onProgress=a,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(c,l,a){if(this.cancellationToken.cancelled){a(new Error("cancelled"),null);return}if(this.operationType==d.COPY){a(null,c);return}this.transferred+=c.length,this.delta+=c.length;const f=Date.now();f>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=f+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((f-this.start)/1e3))}),this.delta=0),a(null,c)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,c(null)}};return tr.ProgressDifferentialDownloadCallbackTransform=h,tr}var el;function eu(){if(el)return Zt;el=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.DifferentialDownloader=void 0;const r=$e(),d=ht(),h=dt,u=Zl(),c=Ct,l=ia(),a=_f(),f=Sf();let i=class{constructor(t,m,v){this.blockAwareFileInfo=t,this.httpExecutor=m,this.options=v,this.fileMetadataBuffer=null,this.logger=v.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,r.configureRequestUrl)(this.options.newUrl,t),(0,r.configureRequestOptions)(t),t}doDownload(t,m){if(t.version!==m.version)throw new Error(`version is different (${t.version} - ${m.version}), full download is required`);const v=this.logger,y=(0,l.computeOperations)(t,m,v);v.debug!=null&&v.debug(JSON.stringify(y,null,2));let p=0,T=0;for(const O of y){const P=O.end-O.start;O.kind===l.OperationKind.DOWNLOAD?p+=P:T+=P}const R=this.blockAwareFileInfo.size;if(p+T+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==R)throw new Error(`Internal error, size mismatch: downloadSize: ${p}, copySize: ${T}, newSize: ${R}`);return v.info(`Full: ${s(R)}, To download: ${s(p)} (${Math.round(p/(R/100))}%)`),this.downloadFile(y)}downloadFile(t){const m=[],v=()=>Promise.all(m.map(y=>(0,d.close)(y.descriptor).catch(p=>{this.logger.error(`cannot close file "${y.path}": ${p}`)})));return this.doDownloadFile(t,m).then(v).catch(y=>v().catch(p=>{try{this.logger.error(`cannot close files: ${p}`)}catch(T){try{console.error(T)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(t,m){const v=await(0,d.open)(this.options.oldFile,"r");m.push({descriptor:v,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");m.push({descriptor:y,path:this.options.newFile});const p=(0,h.createWriteStream)(this.options.newFile,{fd:y});await new Promise((T,R)=>{const O=[];let P;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const L=[];let q=0;for(const I of t)I.kind===l.OperationKind.DOWNLOAD&&(L.push(I.end-I.start),q+=I.end-I.start);const D={expectedByteCounts:L,grandTotal:q};P=new f.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),O.push(P)}const M=new r.DigestTransform(this.blockAwareFileInfo.sha512);M.isValidateOnEnd=!1,O.push(M),p.on("finish",()=>{p.close(()=>{m.splice(1,1);try{M.validate()}catch(L){R(L);return}T(void 0)})}),O.push(p);let C=null;for(const L of O)L.on("error",R),C==null?C=L:C=C.pipe(L);const w=O[0];let S;if(this.options.isUseMultipleRangeRequest){S=(0,a.executeTasksUsingMultipleRangeRequests)(this,t,w,v,R),S(0);return}let E=0,$=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const U=this.createRequestOptions();U.redirect="manual",S=L=>{var q,D;if(L>=t.length){this.fileMetadataBuffer!=null&&w.write(this.fileMetadataBuffer),w.end();return}const I=t[L++];if(I.kind===l.OperationKind.COPY){P&&P.beginFileCopy(),(0,u.copyData)(I,w,v,R,()=>S(L));return}const F=`bytes=${I.start}-${I.end-1}`;U.headers.range=F,(D=(q=this.logger)===null||q===void 0?void 0:q.debug)===null||D===void 0||D.call(q,`download range: ${F}`),P&&P.beginRangeDownload();const k=this.httpExecutor.createRequest(U,J=>{J.on("error",R),J.on("aborted",()=>{R(new Error("response has been aborted by the server"))}),J.statusCode>=400&&R((0,r.createHttpError)(J)),J.pipe(w,{end:!1}),J.once("end",()=>{P&&P.endRangeDownload(),++E===100?(E=0,setTimeout(()=>S(L),1e3)):S(L)})});k.on("redirect",(J,W,ne)=>{this.logger.info(`Redirect to ${n(ne)}`),$=ne,(0,r.configureRequestUrl)(new c.URL($),U),k.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(k,R),k.end()},S(0)})}async readRemoteBytes(t,m){const v=Buffer.allocUnsafe(m+1-t),y=this.createRequestOptions();y.headers.range=`bytes=${t}-${m}`;let p=0;if(await this.request(y,T=>{T.copy(v,p),p+=T.length}),p!==v.length)throw new Error(`Received data length ${p} is not equal to expected ${v.length}`);return v}request(t,m){return new Promise((v,y)=>{const p=this.httpExecutor.createRequest(t,T=>{(0,a.checkIsRangesSupported)(T,y)&&(T.on("error",y),T.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),T.on("data",m),T.on("end",()=>v()))});this.httpExecutor.addErrorAndTimeoutHandlers(p,y),p.end()})}};Zt.DifferentialDownloader=i;function s(o,t=" KB"){return new Intl.NumberFormat("en").format((o/1024).toFixed(2))+t}function n(o){const t=o.indexOf("?");return t<0?o:o.substring(0,t)}return Zt}var tl;function Af(){if(tl)return Qt;tl=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.GenericDifferentialDownloader=void 0;const r=eu();let d=class extends r.DifferentialDownloader{download(u,c){return this.doDownload(u,c)}};return Qt.GenericDifferentialDownloader=d,Qt}var Gi={},rl;function Ot(){return rl||(rl=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.UpdaterSignal=r.UPDATE_DOWNLOADED=r.DOWNLOAD_PROGRESS=r.CancellationToken=void 0,r.addHandler=u;const d=$e();Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),r.DOWNLOAD_PROGRESS="download-progress",r.UPDATE_DOWNLOADED="update-downloaded";class h{constructor(l){this.emitter=l}login(l){u(this.emitter,"login",l)}progress(l){u(this.emitter,r.DOWNLOAD_PROGRESS,l)}updateDownloaded(l){u(this.emitter,r.UPDATE_DOWNLOADED,l)}updateCancelled(l){u(this.emitter,"update-cancelled",l)}}r.UpdaterSignal=h;function u(c,l,a){c.on(l,a)}})(Gi)),Gi}var nl;function aa(){if(nl)return _t;nl=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.NoOpLogger=_t.AppUpdater=void 0;const r=$e(),d=fr,h=Lr,u=Sl,c=ht(),l=Ji(),a=qc(),f=Pe,i=Kl(),s=df(),n=pf(),o=mf(),t=Jl(),m=wf(),v=Tl,y=bt(),p=Af(),T=Ot();let R=class tu extends u.EventEmitter{get channel(){return this._channel}set channel(C){if(this._channel!=null){if(typeof C!="string")throw(0,r.newError)(`Channel must be a string, but got: ${C}`,"ERR_UPDATER_INVALID_CHANNEL");if(C.length===0)throw(0,r.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=C,this.allowDowngrade=!0}addAuthHeader(C){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:C})}get netSession(){return(0,o.getNetSession)()}get logger(){return this._logger}set logger(C){this._logger=C??new P}set updateConfigPath(C){this.clientPromise=null,this._appUpdateConfigPath=C,this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(C){C&&(this._isUpdateSupported=C)}constructor(C,w){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new T.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=$=>this.checkIfUpdateSupported($),this.clientPromise=null,this.stagingUserIdPromise=new a.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",$=>{this._logger.error(`Error: ${$.stack||$.message}`)}),w==null?(this.app=new n.ElectronAppAdapter,this.httpExecutor=new o.ElectronHttpExecutor(($,U)=>this.emit("login",$,U))):(this.app=w,this.httpExecutor=null);const S=this.app.version,E=(0,i.parse)(S);if(E==null)throw(0,r.newError)(`App version is not a valid semver version: "${S}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=E,this.allowPrerelease=O(E),C!=null&&(this.setFeedURL(C),typeof C!="string"&&C.requestHeaders&&(this.requestHeaders=C.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(C){const w=this.createProviderRuntimeOptions();let S;typeof C=="string"?S=new t.GenericProvider({provider:"generic",url:C},this,{...w,isUseMultipleRangeRequest:(0,m.isUrlProbablySupportMultiRangeRequests)(C)}):S=(0,m.createClient)(C,this,w),this.clientPromise=Promise.resolve(S)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let C=this.checkForUpdatesPromise;if(C!=null)return this._logger.info("Checking for update (already in progress)"),C;const w=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),C=this.doCheckForUpdates().then(S=>(w(),S)).catch(S=>{throw w(),this.emit("error",S,`Cannot check for updates: ${(S.stack||S).toString()}`),S}),this.checkForUpdatesPromise=C,C}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(C){return this.checkForUpdates().then(w=>w?.downloadPromise?(w.downloadPromise.then(()=>{const S=tu.formatDownloadNotification(w.updateInfo.version,this.app.name,C);new ft.Notification(S).show()}),w):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),w))}static formatDownloadNotification(C,w,S){return S==null&&(S={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),S={title:S.title.replace("{appName}",w).replace("{version}",C),body:S.body.replace("{appName}",w).replace("{version}",C)},S}async isStagingMatch(C){const w=C.stagingPercentage;let S=w;if(S==null)return!0;if(S=parseInt(S,10),isNaN(S))return this._logger.warn(`Staging percentage is NaN: ${w}`),!0;S=S/100;const E=await this.stagingUserIdPromise.value,U=r.UUID.parse(E).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${S}, percentage: ${U}, user id: ${E}`),U<S}computeFinalHeaders(C){return this.requestHeaders!=null&&Object.assign(C,this.requestHeaders),C}async isUpdateAvailable(C){const w=(0,i.parse)(C.version);if(w==null)throw(0,r.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${C.version}"`,"ERR_UPDATER_INVALID_VERSION");const S=this.currentVersion;if((0,i.eq)(w,S)||!await Promise.resolve(this.isUpdateSupported(C))||!await this.isStagingMatch(C))return!1;const $=(0,i.gt)(w,S),U=(0,i.lt)(w,S);return $?!0:this.allowDowngrade&&U}checkIfUpdateSupported(C){const w=C?.minimumSystemVersion,S=(0,h.release)();if(w)try{if((0,i.lt)(S,w))return this._logger.info(`Current OS version ${S} is less than the minimum OS version required ${w} for version ${S}`),!1}catch(E){this._logger.warn(`Failed to compare current OS version(${S}) with minimum OS version(${w}): ${(E.message||E).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(S=>(0,m.createClient)(S,this,this.createProviderRuntimeOptions())));const C=await this.clientPromise,w=await this.stagingUserIdPromise.value;return C.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":w})),{info:await C.getLatestVersion(),provider:C}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const C=await this.getUpdateInfoAndProvider(),w=C.info;if(!await this.isUpdateAvailable(w))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${w.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",w),{isUpdateAvailable:!1,versionInfo:w,updateInfo:w};this.updateInfoAndProvider=C,this.onUpdateAvailable(w);const S=new r.CancellationToken;return{isUpdateAvailable:!0,versionInfo:w,updateInfo:w,cancellationToken:S,downloadPromise:this.autoDownload?this.downloadUpdate(S):null}}onUpdateAvailable(C){this._logger.info(`Found version ${C.version} (url: ${(0,r.asArray)(C.files).map(w=>w.url).join(", ")})`),this.emit("update-available",C)}downloadUpdate(C=new r.CancellationToken){const w=this.updateInfoAndProvider;if(w==null){const E=new Error("Please check update first");return this.dispatchError(E),Promise.reject(E)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,r.asArray)(w.info.files).map(E=>E.url).join(", ")}`);const S=E=>{if(!(E instanceof r.CancellationError))try{this.dispatchError(E)}catch($){this._logger.warn(`Cannot dispatch error event: ${$.stack||$}`)}return E};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:w,requestHeaders:this.computeRequestHeaders(w.provider),cancellationToken:C,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(E=>{throw S(E)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(C){this.emit("error",C,(C.stack||C).toString())}dispatchUpdateDownloaded(C){this.emit(T.UPDATE_DOWNLOADED,C)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,l.load)(await(0,c.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(C){const w=C.fileExtraDownloadHeaders;if(w!=null){const S=this.requestHeaders;return S==null?w:{...w,...S}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const C=f.join(this.app.userDataPath,".updaterId");try{const S=await(0,c.readFile)(C,"utf-8");if(r.UUID.check(S))return S;this._logger.warn(`Staging user id file exists, but content was invalid: ${S}`)}catch(S){S.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${S}`)}const w=r.UUID.v5((0,d.randomBytes)(4096),r.UUID.OID);this._logger.info(`Generated new staging user ID: ${w}`);try{await(0,c.outputFile)(C,w)}catch(S){this._logger.warn(`Couldn't write out staging user ID: ${S}`)}return w}get isAddNoCacheQuery(){const C=this.requestHeaders;if(C==null)return!0;for(const w of Object.keys(C)){const S=w.toLowerCase();if(S==="authorization"||S==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let C=this.downloadedUpdateHelper;if(C==null){const w=(await this.configOnDisk.value).updaterCacheDirName,S=this._logger;w==null&&S.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const E=f.join(this.app.baseCachePath,w||this.app.name);S.debug!=null&&S.debug(`updater cache dir: ${E}`),C=new s.DownloadedUpdateHelper(E),this.downloadedUpdateHelper=C}return C}async executeDownload(C){const w=C.fileInfo,S={headers:C.downloadUpdateOptions.requestHeaders,cancellationToken:C.downloadUpdateOptions.cancellationToken,sha2:w.info.sha2,sha512:w.info.sha512};this.listenerCount(T.DOWNLOAD_PROGRESS)>0&&(S.onProgress=ie=>this.emit(T.DOWNLOAD_PROGRESS,ie));const E=C.downloadUpdateOptions.updateInfoAndProvider.info,$=E.version,U=w.packageInfo;function L(){const ie=decodeURIComponent(C.fileInfo.url.pathname);return ie.endsWith(`.${C.fileExtension}`)?f.basename(ie):C.fileInfo.info.url}const q=await this.getOrCreateDownloadHelper(),D=q.cacheDirForPendingUpdate;await(0,c.mkdir)(D,{recursive:!0});const I=L();let F=f.join(D,I);const k=U==null?null:f.join(D,`package-${$}${f.extname(U.path)||".7z"}`),J=async ie=>(await q.setDownloadedFile(F,k,E,w,I,ie),await C.done({...E,downloadedFile:F}),k==null?[F]:[F,k]),W=this._logger,ne=await q.validateDownloadedPath(F,E,w,W);if(ne!=null)return F=ne,await J(!1);const ce=async()=>(await q.clear().catch(()=>{}),await(0,c.unlink)(F).catch(()=>{})),ue=await(0,s.createTempUpdateFile)(`temp-${I}`,D,W);try{await C.task(ue,S,k,ce),await(0,r.retry)(()=>(0,c.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await ce(),ie instanceof r.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",E)),ie}return W.info(`New version ${$} has been downloaded to ${F}`),await J(!0)}async differentialDownloadInstaller(C,w,S,E,$){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const U=(0,y.blockmapFiles)(C.url,this.app.version,w.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${U[0]}", new: ${U[1]})`);const L=async I=>{const F=await this.httpExecutor.downloadToBuffer(I,{headers:w.requestHeaders,cancellationToken:w.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${I.href}" is empty`);try{return JSON.parse((0,v.gunzipSync)(F).toString())}catch(k){throw new Error(`Cannot parse blockmap "${I.href}", error: ${k}`)}},q={newUrl:C.url,oldFile:f.join(this.downloadedUpdateHelper.cacheDir,$),logger:this._logger,newFile:S,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,requestHeaders:w.requestHeaders,cancellationToken:w.cancellationToken};this.listenerCount(T.DOWNLOAD_PROGRESS)>0&&(q.onProgress=I=>this.emit(T.DOWNLOAD_PROGRESS,I));const D=await Promise.all(U.map(I=>L(I)));return await new p.GenericDifferentialDownloader(C.info,this.httpExecutor,q).download(D[0],D[1]),!1}catch(U){if(this._logger.error(`Cannot download differentially, fallback to full download: ${U.stack||U}`),this._testOnlyOptions!=null)throw U;return!0}}};_t.AppUpdater=R;function O(M){const C=(0,i.prerelease)(M);return C!=null&&C.length>0}class P{info(C){}warn(C){}error(C){}}return _t.NoOpLogger=P,_t}var il;function kt(){if(il)return Bt;il=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.BaseUpdater=void 0;const r=xr,d=aa();let h=class extends d.AppUpdater{constructor(c,l){super(c,l),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(c=!1,l=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(c,c?l:this.autoRunAppAfterInstall)?setImmediate(()=>{ft.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(c){return super.executeDownload({...c,done:l=>(this.dispatchUpdateDownloaded(l),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(c=!1,l=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const a=this.downloadedUpdateHelper,f=this.installerPath,i=a==null?null:a.downloadedFileInfo;if(f==null||i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${c}, isForceRunAfter: ${l}`),this.doInstall({isSilent:c,isForceRunAfter:l,isAdminRightsRequired:i.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(c=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(c!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${c}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:c}=this.app,l=`"${c} would like to update"`,a=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),f=[a];return/kdesudo/i.test(a)?(f.push("--comment",l),f.push("-c")):/gksudo/i.test(a)?f.push("--message",l):/pkexec/i.test(a)&&f.push("--disable-internal-agent"),f.join(" ")}spawnSyncLog(c,l=[],a={}){this._logger.info(`Executing: ${c} with args: ${l}`);const f=(0,r.spawnSync)(c,l,{env:{...process.env,...a},encoding:"utf-8",shell:!0}),{error:i,status:s,stdout:n,stderr:o}=f;if(i!=null)throw this._logger.error(o),i;if(s!=null&&s!==0)throw this._logger.error(o),new Error(`Command ${c} exited with code ${s}`);return n.trim()}async spawnLog(c,l=[],a=void 0,f="ignore"){return this._logger.info(`Executing: ${c} with args: ${l}`),new Promise((i,s)=>{try{const n={stdio:f,env:a,detached:!0},o=(0,r.spawn)(c,l,n);o.on("error",t=>{s(t)}),o.unref(),o.pid!==void 0&&i(!0)}catch(n){s(n)}})}};return Bt.BaseUpdater=h,Bt}var rr={},nr={},al;function ru(){if(al)return nr;al=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const r=ht(),d=eu(),h=Tl;let u=class extends d.DifferentialDownloader{async download(){const f=this.blockAwareFileInfo,i=f.size,s=i-(f.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,i-1);const n=c(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await l(this.options.oldFile),n)}};nr.FileWithEmbeddedBlockMapDifferentialDownloader=u;function c(a){return JSON.parse((0,h.inflateRawSync)(a).toString())}async function l(a){const f=await(0,r.open)(a,"r");try{const i=(await(0,r.fstat)(f)).size,s=Buffer.allocUnsafe(4);await(0,r.read)(f,s,0,s.length,i-s.length);const n=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,r.read)(f,n,0,n.length,i-s.length-n.length),await(0,r.close)(f),c(n)}catch(i){throw await(0,r.close)(f),i}}return nr}var ol;function sl(){if(ol)return rr;ol=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.AppImageUpdater=void 0;const r=$e(),d=xr,h=ht(),u=dt,c=Pe,l=kt(),a=ru(),f=Xe(),i=Ot();let s=class extends l.BaseUpdater{constructor(o,t){super(o,t)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(o){const t=o.updateInfoAndProvider.provider,m=(0,f.findFile)(t.resolveFiles(o.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:m,downloadUpdateOptions:o,task:async(v,y)=>{const p=process.env.APPIMAGE;if(p==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(o.disableDifferentialDownload||await this.downloadDifferential(m,p,v,t,o))&&await this.httpExecutor.download(m.url,v,y),await(0,h.chmod)(v,493)}})}async downloadDifferential(o,t,m,v,y){try{const p={newUrl:o.url,oldFile:t,logger:this._logger,newFile:m,isUseMultipleRangeRequest:v.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(p.onProgress=T=>this.emit(i.DOWNLOAD_PROGRESS,T)),await new a.FileWithEmbeddedBlockMapDifferentialDownloader(o.info,this.httpExecutor,p).download(),!1}catch(p){return this._logger.error(`Cannot download differentially, fallback to full download: ${p.stack||p}`),process.platform==="linux"}}doInstall(o){const t=process.env.APPIMAGE;if(t==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,u.unlinkSync)(t);let m;const v=c.basename(t),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;c.basename(y)===v||!/\d+\.\d+\.\d+/.test(v)?m=t:m=c.join(c.dirname(t),c.basename(y)),(0,d.execFileSync)("mv",["-f",y,m]),m!==t&&this.emit("appimage-filename-updated",m);const p={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return o.isForceRunAfter?this.spawnLog(m,[],p):(p.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(m,[],{env:p})),!0}};return rr.AppImageUpdater=s,rr}var ir={},ll;function ul(){if(ll)return ir;ll=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.DebUpdater=void 0;const r=kt(),d=Xe(),h=Ot();let u=class extends r.BaseUpdater{constructor(l,a){super(l,a)}doDownloadUpdate(l){const a=l.updateInfoAndProvider.provider,f=(0,d.findFile)(a.resolveFiles(l.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(h.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,a;return(a=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&a!==void 0?a:null}doInstall(l){const a=this.wrapSudo(),f=/pkexec/i.test(a)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["dpkg","-i",i,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(a,[`${f}/bin/bash`,"-c",`'${s.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return ir.DebUpdater=u,ir}var ar={},cl;function fl(){if(cl)return ar;cl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PacmanUpdater=void 0;const r=kt(),d=Ot(),h=Xe();let u=class extends r.BaseUpdater{constructor(l,a){super(l,a)}doDownloadUpdate(l){const a=l.updateInfoAndProvider.provider,f=(0,h.findFile)(a.resolveFiles(l.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,a;return(a=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&a!==void 0?a:null}doInstall(l){const a=this.wrapSudo(),f=/pkexec/i.test(a)?"":'"',i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["pacman","-U","--noconfirm",i];return this.spawnSyncLog(a,[`${f}/bin/bash`,"-c",`'${s.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return ar.PacmanUpdater=u,ar}var or={},dl;function hl(){if(dl)return or;dl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.RpmUpdater=void 0;const r=kt(),d=Ot(),h=Xe();let u=class extends r.BaseUpdater{constructor(l,a){super(l,a)}doDownloadUpdate(l){const a=l.updateInfoAndProvider.provider,f=(0,h.findFile)(a.resolveFiles(l.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:f,downloadUpdateOptions:l,task:async(i,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(f.url,i,s)}})}get installerPath(){var l,a;return(a=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&a!==void 0?a:null}doInstall(l){const a=this.wrapSudo(),f=/pkexec/i.test(a)?"":'"',i=this.spawnSyncLog("which zypper"),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let n;return i?n=[i,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:n=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(a,[`${f}/bin/bash`,"-c",`'${n.join(" ")}'${f}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return or.RpmUpdater=u,or}var sr={},pl;function ml(){if(pl)return sr;pl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.MacUpdater=void 0;const r=$e(),d=ht(),h=dt,u=Pe,c=Cl,l=aa(),a=Xe(),f=xr,i=fr;let s=class extends l.AppUpdater{constructor(o,t){super(o,t),this.nativeUpdater=ft.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",m=>{this._logger.warn(m),this.emit("error",m)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(o){this._logger.debug!=null&&this._logger.debug(o)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(o=>{o&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(o){let t=o.updateInfoAndProvider.provider.resolveFiles(o.updateInfoAndProvider.info);const m=this._logger,v="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,f.execFileSync)("sysctl",[v],{encoding:"utf8"}).includes(`${v}: 1`),m.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(M){m.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${M}`)}let p=!1;try{this.debug("Checking for arm64 in uname");const C=(0,f.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");m.info(`Checked 'uname -a': arm64=${C}`),p=p||C}catch(M){m.warn(`uname shell command to check for arm64 failed: ${M}`)}p=p||process.arch==="arm64"||y;const T=M=>{var C;return M.url.pathname.includes("arm64")||((C=M.info.url)===null||C===void 0?void 0:C.includes("arm64"))};p&&t.some(T)?t=t.filter(M=>p===T(M)):t=t.filter(M=>!T(M));const R=(0,a.findFile)(t,"zip",["pkg","dmg"]);if(R==null)throw(0,r.newError)(`ZIP file not provided: ${(0,r.safeStringifyJson)(t)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=o.updateInfoAndProvider.provider,P="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:R,downloadUpdateOptions:o,task:async(M,C)=>{const w=u.join(this.downloadedUpdateHelper.cacheDir,P),S=()=>(0,d.pathExistsSync)(w)?!o.disableDifferentialDownload:(m.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;S()&&(E=await this.differentialDownloadInstaller(R,o,M,O,P)),E&&await this.httpExecutor.download(R.url,M,C)},done:async M=>{if(!o.disableDifferentialDownload)try{const C=u.join(this.downloadedUpdateHelper.cacheDir,P);await(0,d.copyFile)(M.downloadedFile,C)}catch(C){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${C.message}`)}return this.updateDownloaded(R,M)}})}async updateDownloaded(o,t){var m;const v=t.downloadedFile,y=(m=o.info.size)!==null&&m!==void 0?m:(await(0,d.stat)(v)).size,p=this._logger,T=`fileToProxy=${o.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${T})`),this.server=(0,c.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${T})`),this.server.on("close",()=>{p.info(`Proxy server for native Squirrel.Mac is closed (${T})`)});const R=O=>{const P=O.address();return typeof P=="string"?P:`http://127.0.0.1:${P?.port}`};return await new Promise((O,P)=>{const M=(0,i.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),C=Buffer.from(`autoupdater:${M}`,"ascii"),w=`/${(0,i.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(S,E)=>{const $=S.url;if(p.info(`${$} requested`),$==="/"){if(!S.headers.authorization||S.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("No authenthication info");return}const q=S.headers.authorization.split(" ")[1],D=Buffer.from(q,"base64").toString("ascii"),[I,F]=D.split(":");if(I!=="autoupdater"||F!==M){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("Invalid authenthication credentials");return}const k=Buffer.from(`{ "url": "${R(this.server)}${w}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":k.length}),E.end(k);return}if(!$.startsWith(w)){p.warn(`${$} requested, but not supported`),E.writeHead(404),E.end();return}p.info(`${w} requested by Squirrel.Mac, pipe ${v}`);let U=!1;E.on("finish",()=>{U||(this.nativeUpdater.removeListener("error",P),O([]))});const L=(0,h.createReadStream)(v);L.on("error",q=>{try{E.end()}catch(D){p.warn(`cannot end response: ${D}`)}U=!0,this.nativeUpdater.removeListener("error",P),P(new Error(`Cannot pipe "${v}": ${q}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),L.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${T})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${R(this.server)}, ${T})`),this.nativeUpdater.setFeedURL({url:R(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${C.toString("base64")}`}}),this.dispatchUpdateDownloaded(t),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",P),this.nativeUpdater.checkForUpdates()):O([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return sr.MacUpdater=s,sr}var lr={},Fr={},gl;function Tf(){if(gl)return Fr;gl=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.verifySignature=c;const r=$e(),d=xr,h=Lr,u=Pe;function c(i,s,n){return new Promise((o,t)=>{const m=s.replace(/'/g,"''");n.info(`Verifying signature ${m}`),(0,d.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${m}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(v,y,p)=>{var T;try{if(v!=null||p){a(n,v,p,t),o(null);return}const R=l(y);if(R.Status===0){try{const C=u.normalize(R.Path),w=u.normalize(s);if(n.info(`LiteralPath: ${C}. Update Path: ${w}`),C!==w){a(n,new Error(`LiteralPath of ${C} is different than ${w}`),p,t),o(null);return}}catch(C){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(T=C.message)!==null&&T!==void 0?T:C.stack}`)}const P=(0,r.parseDn)(R.SignerCertificate.Subject);let M=!1;for(const C of i){const w=(0,r.parseDn)(C);if(w.size?M=Array.from(w.keys()).every(E=>w.get(E)===P.get(E)):C===P.get("CN")&&(n.warn(`Signature validated using only CN ${C}. Please add your full Distinguished Name (DN) to publisherNames configuration`),M=!0),M){o(null);return}}}const O=`publisherNames: ${i.join(" | ")}, raw info: `+JSON.stringify(R,(P,M)=>P==="RawData"?void 0:M,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),o(O)}catch(R){a(n,R,null,t),o(null);return}})})}function l(i){const s=JSON.parse(i);delete s.PrivateKey,delete s.IsOSBinary,delete s.SignatureType;const n=s.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),s}function a(i,s,n,o){if(f()){i.warn(`Cannot execute Get-AuthenticodeSignature: ${s||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(t){i.warn(`Cannot execute ConvertTo-Json: ${t.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}s!=null&&o(s),n&&o(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function f(){const i=h.release();return i.startsWith("6.")&&!i.startsWith("6.3")}return Fr}var vl;function El(){if(vl)return lr;vl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.NsisUpdater=void 0;const r=$e(),d=Pe,h=kt(),u=ru(),c=Ot(),l=Xe(),a=ht(),f=Tf(),i=Ct;let s=class extends h.BaseUpdater{constructor(o,t){super(o,t),this._verifyUpdateCodeSignature=(m,v)=>(0,f.verifySignature)(m,v,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(o){o&&(this._verifyUpdateCodeSignature=o)}doDownloadUpdate(o){const t=o.updateInfoAndProvider.provider,m=(0,l.findFile)(t.resolveFiles(o.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:o,fileInfo:m,task:async(v,y,p,T)=>{const R=m.packageInfo,O=R!=null&&p!=null;if(O&&o.disableWebInstaller)throw(0,r.newError)(`Unable to download new version ${o.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!o.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||o.disableDifferentialDownload||await this.differentialDownloadInstaller(m,o,v,t,r.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(m.url,v,y);const P=await this.verifySignature(v);if(P!=null)throw await T(),(0,r.newError)(`New version ${o.updateInfoAndProvider.info.version} is not signed by the application owner: ${P}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(o,R,p,t))try{await this.httpExecutor.download(new i.URL(R.path),p,{headers:o.requestHeaders,cancellationToken:o.cancellationToken,sha512:R.sha512})}catch(M){try{await(0,a.unlink)(p)}catch{}throw M}}})}async verifySignature(o){let t;try{if(t=(await this.configOnDisk.value).publisherName,t==null)return null}catch(m){if(m.code==="ENOENT")return null;throw m}return await this._verifyUpdateCodeSignature(Array.isArray(t)?t:[t],o)}doInstall(o){const t=this.installerPath;if(t==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const m=["--updated"];o.isSilent&&m.push("/S"),o.isForceRunAfter&&m.push("--force-run"),this.installDirectory&&m.push(`/D=${this.installDirectory}`);const v=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;v!=null&&m.push(`--package-file=${v}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[t].concat(m)).catch(p=>this.dispatchError(p))};return o.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(t,m).catch(p=>{const T=p.code;this._logger.info(`Cannot run installer: error code: ${T}, error message: "${p.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),T==="UNKNOWN"||T==="EACCES"?y():T==="ENOENT"?ft.shell.openPath(t).catch(R=>this.dispatchError(R)):this.dispatchError(p)}),!0)}async differentialDownloadWebPackage(o,t,m,v){if(t.blockMapSize==null)return!0;try{const y={newUrl:new i.URL(t.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,r.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:m,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:v.isUseMultipleRangeRequest,cancellationToken:o.cancellationToken};this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(y.onProgress=p=>this.emit(c.DOWNLOAD_PROGRESS,p)),await new u.FileWithEmbeddedBlockMapDifferentialDownloader(t,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return lr.NsisUpdater=s,lr}var yl;function Cf(){return yl||(yl=1,(function(r){var d=wt&&wt.__createBinding||(Object.create?(function(p,T,R,O){O===void 0&&(O=R);var P=Object.getOwnPropertyDescriptor(T,R);(!P||("get"in P?!T.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return T[R]}}),Object.defineProperty(p,O,P)}):(function(p,T,R,O){O===void 0&&(O=R),p[O]=T[R]})),h=wt&&wt.__exportStar||function(p,T){for(var R in p)R!=="default"&&!Object.prototype.hasOwnProperty.call(T,R)&&d(T,p,R)};Object.defineProperty(r,"__esModule",{value:!0}),r.NsisUpdater=r.MacUpdater=r.RpmUpdater=r.PacmanUpdater=r.DebUpdater=r.AppImageUpdater=r.Provider=r.NoOpLogger=r.AppUpdater=r.BaseUpdater=void 0;const u=ht(),c=Pe;var l=kt();Object.defineProperty(r,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var a=aa();Object.defineProperty(r,"AppUpdater",{enumerable:!0,get:function(){return a.AppUpdater}}),Object.defineProperty(r,"NoOpLogger",{enumerable:!0,get:function(){return a.NoOpLogger}});var f=Xe();Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return f.Provider}});var i=sl();Object.defineProperty(r,"AppImageUpdater",{enumerable:!0,get:function(){return i.AppImageUpdater}});var s=ul();Object.defineProperty(r,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var n=fl();Object.defineProperty(r,"PacmanUpdater",{enumerable:!0,get:function(){return n.PacmanUpdater}});var o=hl();Object.defineProperty(r,"RpmUpdater",{enumerable:!0,get:function(){return o.RpmUpdater}});var t=ml();Object.defineProperty(r,"MacUpdater",{enumerable:!0,get:function(){return t.MacUpdater}});var m=El();Object.defineProperty(r,"NsisUpdater",{enumerable:!0,get:function(){return m.NsisUpdater}}),h(Ot(),r);let v;function y(){if(process.platform==="win32")v=new(El()).NsisUpdater;else if(process.platform==="darwin")v=new(ml()).MacUpdater;else{v=new(sl()).AppImageUpdater;try{const p=c.join(process.resourcesPath,"package-type");if(!(0,u.existsSync)(p))return v;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const T=(0,u.readFileSync)(p).toString().trim();switch(console.info("Found package-type:",T),T){case"deb":v=new(ul()).DebUpdater;break;case"rpm":v=new(hl()).RpmUpdater;break;case"pacman":v=new(fl()).PacmanUpdater;break;default:break}}catch(p){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",p.message)}}return v}Object.defineProperty(r,"autoUpdater",{enumerable:!0,get:()=>v||y()})})(wt)),wt}var wl;function Rf(){if(wl)return va;wl=1;const{app:r,BrowserWindow:d,Menu:h,shell:u,protocol:c,ipcMain:l}=ft,{autoUpdater:a}=Cf(),f=Pe,{createServer:i}=Cl,{parse:s}=Ct;r.requestSingleInstanceLock()?r.on("second-instance",()=>{t&&(t.isMinimized()&&t.restore(),t.focus())}):r.quit();const o=process.env.NODE_ENV==="development";let t,m=null;const v=5e3;a.checkForUpdatesAndNotify();function y(){m||(m=i((C,w)=>{const S=s(C.url,!0),E=S.pathname,$=S.query;if(E.includes("-callback")){const U=E.replace("/-callback","").replace("/","");if(w.setHeader("Access-Control-Allow-Origin","*"),w.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),w.setHeader("Access-Control-Allow-Headers","Content-Type"),C.method==="OPTIONS"){w.writeHead(200),w.end();return}w.writeHead(200,{"Content-Type":"text/html"}),w.end(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>OAuth Success</title>
          <style>
            body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
            .success { color: #4CAF50; }
            .error { color: #f44336; }
          </style>
        </head>
        <body>
          <h2 class="success"> Authentication Successful!</h2>
          <p>You can close this window and return to SiteWeave.</p>
          <script>
            setTimeout(() => {
              window.close();
            }, 2000);
          <\/script>
        </body>
        </html>
      `),t&&t.webContents.send("oauth-callback",{provider:U,code:$.code,state:$.state,error:$.error,errorDescription:$.error_description})}else w.writeHead(404,{"Content-Type":"text/plain"}),w.end("Not Found")}),m.listen(v,"127.0.0.1",()=>{console.log(`OAuth server listening on http://127.0.0.1:${v}`)}),m.on("error",C=>{C.code==="EADDRINUSE"?console.log(`Port ${v} is already in use`):console.error("OAuth server error:",C)}))}function p(){m&&(m.close(),m=null,console.log("OAuth server stopped"))}const T="siteweave";function R(){t=new d({width:1200,height:800,minWidth:800,minHeight:600,webPreferences:{nodeIntegration:!1,contextIsolation:!0,enableRemoteModule:!1,webSecurity:!0,preload:f.join(__dirname,"preload.js")},icon:f.join(__dirname,"../build/icon.png"),title:"SiteWeave",show:!1,titleBarStyle:"default"}),o?(t.loadURL("http://localhost:5173"),t.webContents.openDevTools()):t.loadFile(f.join(__dirname,"../dist/index.html")),t.once("ready-to-show",()=>{console.log("Window ready to show"),t.show(),t.focus()}),t.webContents.on("did-fail-load",(C,w,S)=>{console.error("Failed to load:",w,S),t.show(),t.focus()}),setTimeout(()=>{t&&!t.isVisible()&&(console.log("Force showing window after timeout"),t.show(),t.focus())},2e3),t.on("closed",()=>{t=null}),t.webContents.setWindowOpenHandler(({url:C})=>(u.openExternal(C),{action:"deny"})),t.webContents.on("will-navigate",(C,w)=>{const S=new URL(w);S.origin!=="http://localhost:5173"&&S.origin!=="file://"&&(C.preventDefault(),u.openExternal(w))})}function O(){const C=[{label:"File",submenu:[{label:"New Project",accelerator:"CmdOrCtrl+N",click:()=>{t.webContents.send("menu-new-project")}},{type:"separator"},{label:"Quit",accelerator:process.platform==="darwin"?"Cmd+Q":"Ctrl+Q",click:()=>{r.quit()}}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"}]},{label:"View",submenu:[{role:"reload"},{role:"forceReload"},{role:"toggleDevTools"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn"},{role:"zoomOut"},{type:"separator"},{role:"togglefullscreen"}]},{label:"Window",submenu:[{role:"minimize"},{role:"close"}]},{label:"Help",submenu:[{label:"About SiteWeave",click:()=>{t.webContents.send("menu-about")}},{label:"Check for Updates",click:()=>{a.checkForUpdatesAndNotify()}}]}],w=h.buildFromTemplate(C);h.setApplicationMenu(w)}function P(){c.registerSchemesAsPrivileged([{scheme:T,privileges:{standard:!0,secure:!0,allowServiceWorkers:!0,supportFetchAPI:!0,corsEnabled:!0}}])}function M(C){if(!t)return;const w=new URL(C),S=w.pathname;t.webContents.send("oauth-callback",{provider:S.replace("/",""),code:w.searchParams.get("code"),state:w.searchParams.get("state"),error:w.searchParams.get("error"),errorDescription:w.searchParams.get("error_description")})}return P(),r.whenReady().then(()=>{console.log("App is ready"),d.getAllWindows().length===0&&(R(),O(),y()),r.on("open-url",(C,w)=>{C.preventDefault(),M(w)}),r.on("activate",()=>{d.getAllWindows().length===0&&R()})}),r.on("window-all-closed",()=>{p(),process.platform!=="darwin"&&console.log("All windows closed, but keeping app running")}),r.on("before-quit",()=>{p()}),a.on("update-available",()=>{t?.webContents.send("update-available")}),a.on("update-downloaded",()=>{t?.webContents.send("update-downloaded")}),a.on("error",C=>{console.error("Auto-updater error:",C),t?.webContents.send("update-error",C.message)}),l.handle("get-app-version",()=>r.getVersion()),l.handle("install-update",()=>{a.quitAndInstall()}),l.handle("check-for-updates",()=>a.checkForUpdates()),l.handle("start-oauth-server",()=>(y(),!0)),l.handle("stop-oauth-server",()=>(p(),!0)),process.platform==="win32"&&(r.setAsDefaultProtocolClient(T),r.on("second-instance",(C,w,S)=>{const E=w.find($=>$.startsWith(`${T}://`));E&&M(E),t&&(t.isMinimized()&&t.restore(),t.focus())})),va}var bf=Rf();const Of=Qu(bf);module.exports=Of;
