"use strict";const gt=require("electron"),Ie=require("path"),ql=require("http"),nt=require("url"),vt=require("fs"),yc=require("constants"),vr=require("stream"),io=require("util"),$l=require("assert"),Hr=require("child_process"),Ml=require("events"),Er=require("crypto"),Bl=require("tty"),jr=require("os"),Hl=require("zlib"),wc=require("https");var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_c={},en={},tn={},Or={},Fo;function ze(){return Fo||(Fo=1,Or.fromCallback=function(e){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")e.apply(this,d);else return new Promise((p,c)=>{d.push((f,l)=>f!=null?c(f):p(l)),e.apply(this,d)})},"name",{value:e.name})},Or.fromPromise=function(e){return Object.defineProperty(function(...d){const p=d[d.length-1];if(typeof p!="function")return e.apply(this,d);d.pop(),e.apply(this,d).then(c=>p(null,c),p)},"name",{value:e.name})}),Or}var rn,xo;function Ac(){if(xo)return rn;xo=1;var e=yc,d=process.cwd,p=null,c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return p||(p=d.call(process)),p};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var f=process.chdir;process.chdir=function(o){p=null,f.call(process,o)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,f)}rn=l;function l(o){e.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&u(o),o.lutimes||a(o),o.chown=r(o.chown),o.fchown=r(o.fchown),o.lchown=r(o.lchown),o.chmod=s(o.chmod),o.fchmod=s(o.fchmod),o.lchmod=s(o.lchmod),o.chownSync=n(o.chownSync),o.fchownSync=n(o.fchownSync),o.lchownSync=n(o.lchownSync),o.chmodSync=i(o.chmodSync),o.fchmodSync=i(o.fchmodSync),o.lchmodSync=i(o.lchmodSync),o.stat=h(o.stat),o.fstat=h(o.fstat),o.lstat=h(o.lstat),o.statSync=g(o.statSync),o.fstatSync=g(o.fstatSync),o.lstatSync=g(o.lstatSync),o.chmod&&!o.lchmod&&(o.lchmod=function(m,w,S){S&&process.nextTick(S)},o.lchmodSync=function(){}),o.chown&&!o.lchown&&(o.lchown=function(m,w,S,O){O&&process.nextTick(O)},o.lchownSync=function(){}),c==="win32"&&(o.rename=typeof o.rename!="function"?o.rename:function(m){function w(S,O,I){var b=Date.now(),P=0;m(S,O,function T(R){if(R&&(R.code==="EACCES"||R.code==="EPERM"||R.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){o.stat(O,function(v,k){v&&v.code==="ENOENT"?m(S,O,T):I(R)})},P),P<100&&(P+=10);return}I&&I(R)})}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w}(o.rename)),o.read=typeof o.read!="function"?o.read:function(m){function w(S,O,I,b,P,T){var R;if(T&&typeof T=="function"){var v=0;R=function(k,q,L){if(k&&k.code==="EAGAIN"&&v<10)return v++,m.call(o,S,O,I,b,P,R);T.apply(this,arguments)}}return m.call(o,S,O,I,b,P,R)}return Object.setPrototypeOf&&Object.setPrototypeOf(w,m),w}(o.read),o.readSync=typeof o.readSync!="function"?o.readSync:function(m){return function(w,S,O,I,b){for(var P=0;;)try{return m.call(o,w,S,O,I,b)}catch(T){if(T.code==="EAGAIN"&&P<10){P++;continue}throw T}}}(o.readSync);function u(m){m.lchmod=function(w,S,O){m.open(w,e.O_WRONLY|e.O_SYMLINK,S,function(I,b){if(I){O&&O(I);return}m.fchmod(b,S,function(P){m.close(b,function(T){O&&O(P||T)})})})},m.lchmodSync=function(w,S){var O=m.openSync(w,e.O_WRONLY|e.O_SYMLINK,S),I=!0,b;try{b=m.fchmodSync(O,S),I=!1}finally{if(I)try{m.closeSync(O)}catch{}else m.closeSync(O)}return b}}function a(m){e.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(w,S,O,I){m.open(w,e.O_SYMLINK,function(b,P){if(b){I&&I(b);return}m.futimes(P,S,O,function(T){m.close(P,function(R){I&&I(T||R)})})})},m.lutimesSync=function(w,S,O){var I=m.openSync(w,e.O_SYMLINK),b,P=!0;try{b=m.futimesSync(I,S,O),P=!1}finally{if(P)try{m.closeSync(I)}catch{}else m.closeSync(I)}return b}):m.futimes&&(m.lutimes=function(w,S,O,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function s(m){return m&&function(w,S,O){return m.call(o,w,S,function(I){y(I)&&(I=null),O&&O.apply(this,arguments)})}}function i(m){return m&&function(w,S){try{return m.call(o,w,S)}catch(O){if(!y(O))throw O}}}function r(m){return m&&function(w,S,O,I){return m.call(o,w,S,O,function(b){y(b)&&(b=null),I&&I.apply(this,arguments)})}}function n(m){return m&&function(w,S,O){try{return m.call(o,w,S,O)}catch(I){if(!y(I))throw I}}}function h(m){return m&&function(w,S,O){typeof S=="function"&&(O=S,S=null);function I(b,P){P&&(P.uid<0&&(P.uid+=4294967296),P.gid<0&&(P.gid+=4294967296)),O&&O.apply(this,arguments)}return S?m.call(o,w,S,I):m.call(o,w,I)}}function g(m){return m&&function(w,S){var O=S?m.call(o,w,S):m.call(o,w);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function y(m){if(!m||m.code==="ENOSYS")return!0;var w=!process.getuid||process.getuid()!==0;return!!(w&&(m.code==="EINVAL"||m.code==="EPERM"))}}return rn}var nn,Lo;function Rc(){if(Lo)return nn;Lo=1;var e=vr.Stream;nn=d;function d(p){return{ReadStream:c,WriteStream:f};function c(l,o){if(!(this instanceof c))return new c(l,o);e.call(this);var u=this;this.path=l,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,o=o||{};for(var a=Object.keys(o),s=0,i=a.length;s<i;s++){var r=a[s];this[r]=o[r]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){u._read()});return}p.open(this.path,this.flags,this.mode,function(n,h){if(n){u.emit("error",n),u.readable=!1;return}u.fd=h,u.emit("open",h),u._read()})}function f(l,o){if(!(this instanceof f))return new f(l,o);e.call(this),this.path=l,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var u=Object.keys(o),a=0,s=u.length;a<s;a++){var i=u[a];this[i]=o[i]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=p.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return nn}var on,Uo;function Sc(){if(Uo)return on;Uo=1,on=d;var e=Object.getPrototypeOf||function(p){return p.__proto__};function d(p){if(p===null||typeof p!="object")return p;if(p instanceof Object)var c={__proto__:e(p)};else var c=Object.create(null);return Object.getOwnPropertyNames(p).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(p,f))}),c}return on}var Pr,ko;function Ve(){if(ko)return Pr;ko=1;var e=vt,d=Ac(),p=Rc(),c=Sc(),f=io,l,o;typeof Symbol=="function"&&typeof Symbol.for=="function"?(l=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(l="___graceful-fs.queue",o="___graceful-fs.previous");function u(){}function a(m,w){Object.defineProperty(m,l,{get:function(){return w}})}var s=u;if(f.debuglog?s=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var m=f.format.apply(f,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!e[l]){var i=Be[l]||[];a(e,i),e.close=function(m){function w(S,O){return m.call(e,S,function(I){I||g(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(w,o,{value:m}),w}(e.close),e.closeSync=function(m){function w(S){m.apply(e,arguments),g()}return Object.defineProperty(w,o,{value:m}),w}(e.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(e[l]),$l.equal(e[l].length,0)})}Be[l]||a(Be,e[l]),Pr=r(c(e)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!e.__patched&&(Pr=r(e),e.__patched=!0);function r(m){d(m),m.gracefulify=r,m.createReadStream=de,m.createWriteStream=ie;var w=m.readFile;m.readFile=S;function S(Q,ge,_){return typeof ge=="function"&&(_=ge,ge=null),E(Q,ge,_);function E(H,F,ce,he){return w(H,F,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?n([E,[H,F,ce],pe,he||Date.now(),Date.now()]):typeof ce=="function"&&ce.apply(this,arguments)})}}var O=m.writeFile;m.writeFile=I;function I(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return O(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?n([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var b=m.appendFile;b&&(m.appendFile=P);function P(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return b(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?n([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var T=m.copyFile;T&&(m.copyFile=R);function R(Q,ge,_,E){return typeof _=="function"&&(E=_,_=0),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return T(F,ce,he,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?n([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var v=m.readdir;m.readdir=q;var k=/^v[0-5]\./;function q(Q,ge,_){typeof ge=="function"&&(_=ge,ge=null);var E=k.test(process.version)?function(ce,he,pe,_e){return v(ce,H(ce,he,pe,_e))}:function(ce,he,pe,_e){return v(ce,he,H(ce,he,pe,_e))};return E(Q,ge,_);function H(F,ce,he,pe){return function(_e,Ee){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?n([E,[F,ce,he],_e,pe||Date.now(),Date.now()]):(Ee&&Ee.sort&&Ee.sort(),typeof he=="function"&&he.call(this,_e,Ee))}}}if(process.version.substr(0,4)==="v0.8"){var L=p(m);D=L.ReadStream,V=L.WriteStream}var $=m.ReadStream;$&&(D.prototype=Object.create($.prototype),D.prototype.open=G);var x=m.WriteStream;x&&(V.prototype=Object.create(x.prototype),V.prototype.open=te),Object.defineProperty(m,"ReadStream",{get:function(){return D},set:function(Q){D=Q},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return V},set:function(Q){V=Q},enumerable:!0,configurable:!0});var N=D;Object.defineProperty(m,"FileReadStream",{get:function(){return N},set:function(Q){N=Q},enumerable:!0,configurable:!0});var j=V;Object.defineProperty(m,"FileWriteStream",{get:function(){return j},set:function(Q){j=Q},enumerable:!0,configurable:!0});function D(Q,ge){return this instanceof D?($.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function G(){var Q=this;ve(Q.path,Q.flags,Q.mode,function(ge,_){ge?(Q.autoClose&&Q.destroy(),Q.emit("error",ge)):(Q.fd=_,Q.emit("open",_),Q.read())})}function V(Q,ge){return this instanceof V?(x.apply(this,arguments),this):V.apply(Object.create(V.prototype),arguments)}function te(){var Q=this;ve(Q.path,Q.flags,Q.mode,function(ge,_){ge?(Q.destroy(),Q.emit("error",ge)):(Q.fd=_,Q.emit("open",_))})}function de(Q,ge){return new m.ReadStream(Q,ge)}function ie(Q,ge){return new m.WriteStream(Q,ge)}var we=m.open;m.open=ve;function ve(Q,ge,_,E){return typeof _=="function"&&(E=_,_=null),H(Q,ge,_,E);function H(F,ce,he,pe,_e){return we(F,ce,he,function(Ee,We){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?n([H,[F,ce,he,pe],Ee,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function n(m){s("ENQUEUE",m[0].name,m[1]),e[l].push(m),y()}var h;function g(){for(var m=Date.now(),w=0;w<e[l].length;++w)e[l][w].length>2&&(e[l][w][3]=m,e[l][w][4]=m);y()}function y(){if(clearTimeout(h),h=void 0,e[l].length!==0){var m=e[l].shift(),w=m[0],S=m[1],O=m[2],I=m[3],b=m[4];if(I===void 0)s("RETRY",w.name,S),w.apply(null,S);else if(Date.now()-I>=6e4){s("TIMEOUT",w.name,S);var P=S.pop();typeof P=="function"&&P.call(null,O)}else{var T=Date.now()-b,R=Math.max(b-I,1),v=Math.min(R*1.2,100);T>=v?(s("RETRY",w.name,S),w.apply(null,S.concat([I]))):e[l].push(m)}h===void 0&&(h=setTimeout(y,0))}}return Pr}var qo;function Mt(){return qo||(qo=1,function(e){const d=ze().fromCallback,p=Ve(),c=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(f=>typeof p[f]=="function");Object.assign(e,p),c.forEach(f=>{e[f]=d(p[f])}),e.exists=function(f,l){return typeof l=="function"?p.exists(f,l):new Promise(o=>p.exists(f,o))},e.read=function(f,l,o,u,a,s){return typeof s=="function"?p.read(f,l,o,u,a,s):new Promise((i,r)=>{p.read(f,l,o,u,a,(n,h,g)=>{if(n)return r(n);i({bytesRead:h,buffer:g})})})},e.write=function(f,l,...o){return typeof o[o.length-1]=="function"?p.write(f,l,...o):new Promise((u,a)=>{p.write(f,l,...o,(s,i,r)=>{if(s)return a(s);u({bytesWritten:i,buffer:r})})})},typeof p.writev=="function"&&(e.writev=function(f,l,...o){return typeof o[o.length-1]=="function"?p.writev(f,l,...o):new Promise((u,a)=>{p.writev(f,l,...o,(s,i,r)=>{if(s)return a(s);u({bytesWritten:i,buffers:r})})})}),typeof p.realpath.native=="function"?e.realpath.native=d(p.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(tn)),tn}var Ir={},an={},$o;function Tc(){if($o)return an;$o=1;const e=Ie;return an.checkPath=function(p){if(process.platform==="win32"&&/[<>:"|?*]/.test(p.replace(e.parse(p).root,""))){const f=new Error(`Path contains invalid characters: ${p}`);throw f.code="EINVAL",f}},an}var Mo;function Cc(){if(Mo)return Ir;Mo=1;const e=Mt(),{checkPath:d}=Tc(),p=c=>{const f={mode:511};return typeof c=="number"?c:{...f,...c}.mode};return Ir.makeDir=async(c,f)=>(d(c),e.mkdir(c,{mode:p(f),recursive:!0})),Ir.makeDirSync=(c,f)=>(d(c),e.mkdirSync(c,{mode:p(f),recursive:!0})),Ir}var sn,Bo;function it(){if(Bo)return sn;Bo=1;const e=ze().fromPromise,{makeDir:d,makeDirSync:p}=Cc(),c=e(d);return sn={mkdirs:c,mkdirsSync:p,mkdirp:c,mkdirpSync:p,ensureDir:c,ensureDirSync:p},sn}var ln,Ho;function Ot(){if(Ho)return ln;Ho=1;const e=ze().fromPromise,d=Mt();function p(c){return d.access(c).then(()=>!0).catch(()=>!1)}return ln={pathExists:e(p),pathExistsSync:d.existsSync},ln}var un,jo;function jl(){if(jo)return un;jo=1;const e=Ve();function d(c,f,l,o){e.open(c,"r+",(u,a)=>{if(u)return o(u);e.futimes(a,f,l,s=>{e.close(a,i=>{o&&o(s||i)})})})}function p(c,f,l){const o=e.openSync(c,"r+");return e.futimesSync(o,f,l),e.closeSync(o)}return un={utimesMillis:d,utimesMillisSync:p},un}var cn,Go;function Bt(){if(Go)return cn;Go=1;const e=Mt(),d=Ie,p=io;function c(n,h,g){const y=g.dereference?m=>e.stat(m,{bigint:!0}):m=>e.lstat(m,{bigint:!0});return Promise.all([y(n),y(h).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,w])=>({srcStat:m,destStat:w}))}function f(n,h,g){let y;const m=g.dereference?S=>e.statSync(S,{bigint:!0}):S=>e.lstatSync(S,{bigint:!0}),w=m(n);try{y=m(h)}catch(S){if(S.code==="ENOENT")return{srcStat:w,destStat:null};throw S}return{srcStat:w,destStat:y}}function l(n,h,g,y,m){p.callbackify(c)(n,h,y,(w,S)=>{if(w)return m(w);const{srcStat:O,destStat:I}=S;if(I){if(s(O,I)){const b=d.basename(n),P=d.basename(h);return g==="move"&&b!==P&&b.toLowerCase()===P.toLowerCase()?m(null,{srcStat:O,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${h}' with directory '${n}'.`));if(!O.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${h}' with non-directory '${n}'.`))}return O.isDirectory()&&i(n,h)?m(new Error(r(n,h,g))):m(null,{srcStat:O,destStat:I})})}function o(n,h,g,y){const{srcStat:m,destStat:w}=f(n,h,y);if(w){if(s(m,w)){const S=d.basename(n),O=d.basename(h);if(g==="move"&&S!==O&&S.toLowerCase()===O.toLowerCase())return{srcStat:m,destStat:w,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!w.isDirectory())throw new Error(`Cannot overwrite non-directory '${h}' with directory '${n}'.`);if(!m.isDirectory()&&w.isDirectory())throw new Error(`Cannot overwrite directory '${h}' with non-directory '${n}'.`)}if(m.isDirectory()&&i(n,h))throw new Error(r(n,h,g));return{srcStat:m,destStat:w}}function u(n,h,g,y,m){const w=d.resolve(d.dirname(n)),S=d.resolve(d.dirname(g));if(S===w||S===d.parse(S).root)return m();e.stat(S,{bigint:!0},(O,I)=>O?O.code==="ENOENT"?m():m(O):s(h,I)?m(new Error(r(n,g,y))):u(n,h,S,y,m))}function a(n,h,g,y){const m=d.resolve(d.dirname(n)),w=d.resolve(d.dirname(g));if(w===m||w===d.parse(w).root)return;let S;try{S=e.statSync(w,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(s(h,S))throw new Error(r(n,g,y));return a(n,h,w,y)}function s(n,h){return h.ino&&h.dev&&h.ino===n.ino&&h.dev===n.dev}function i(n,h){const g=d.resolve(n).split(d.sep).filter(m=>m),y=d.resolve(h).split(d.sep).filter(m=>m);return g.reduce((m,w,S)=>m&&y[S]===w,!0)}function r(n,h,g){return`Cannot ${g} '${n}' to a subdirectory of itself, '${h}'.`}return cn={checkPaths:l,checkPathsSync:o,checkParentPaths:u,checkParentPathsSync:a,isSrcSubdir:i,areIdentical:s},cn}var fn,Wo;function bc(){if(Wo)return fn;Wo=1;const e=Ve(),d=Ie,p=it().mkdirs,c=Ot().pathExists,f=jl().utimesMillis,l=Bt();function o(q,L,$,x){typeof $=="function"&&!x?(x=$,$={}):typeof $=="function"&&($={filter:$}),x=x||function(){},$=$||{},$.clobber="clobber"in $?!!$.clobber:!0,$.overwrite="overwrite"in $?!!$.overwrite:$.clobber,$.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),l.checkPaths(q,L,"copy",$,(N,j)=>{if(N)return x(N);const{srcStat:D,destStat:G}=j;l.checkParentPaths(q,D,L,"copy",V=>V?x(V):$.filter?a(u,G,q,L,$,x):u(G,q,L,$,x))})}function u(q,L,$,x,N){const j=d.dirname($);c(j,(D,G)=>{if(D)return N(D);if(G)return i(q,L,$,x,N);p(j,V=>V?N(V):i(q,L,$,x,N))})}function a(q,L,$,x,N,j){Promise.resolve(N.filter($,x)).then(D=>D?q(L,$,x,N,j):j(),D=>j(D))}function s(q,L,$,x,N){return x.filter?a(i,q,L,$,x,N):i(q,L,$,x,N)}function i(q,L,$,x,N){(x.dereference?e.stat:e.lstat)(L,(D,G)=>D?N(D):G.isDirectory()?I(G,q,L,$,x,N):G.isFile()||G.isCharacterDevice()||G.isBlockDevice()?r(G,q,L,$,x,N):G.isSymbolicLink()?v(q,L,$,x,N):G.isSocket()?N(new Error(`Cannot copy a socket file: ${L}`)):G.isFIFO()?N(new Error(`Cannot copy a FIFO pipe: ${L}`)):N(new Error(`Unknown file: ${L}`)))}function r(q,L,$,x,N,j){return L?n(q,$,x,N,j):h(q,$,x,N,j)}function n(q,L,$,x,N){if(x.overwrite)e.unlink($,j=>j?N(j):h(q,L,$,x,N));else return x.errorOnExist?N(new Error(`'${$}' already exists`)):N()}function h(q,L,$,x,N){e.copyFile(L,$,j=>j?N(j):x.preserveTimestamps?g(q.mode,L,$,N):S($,q.mode,N))}function g(q,L,$,x){return y(q)?m($,q,N=>N?x(N):w(q,L,$,x)):w(q,L,$,x)}function y(q){return(q&128)===0}function m(q,L,$){return S(q,L|128,$)}function w(q,L,$,x){O(L,$,N=>N?x(N):S($,q,x))}function S(q,L,$){return e.chmod(q,L,$)}function O(q,L,$){e.stat(q,(x,N)=>x?$(x):f(L,N.atime,N.mtime,$))}function I(q,L,$,x,N,j){return L?P($,x,N,j):b(q.mode,$,x,N,j)}function b(q,L,$,x,N){e.mkdir($,j=>{if(j)return N(j);P(L,$,x,D=>D?N(D):S($,q,N))})}function P(q,L,$,x){e.readdir(q,(N,j)=>N?x(N):T(j,q,L,$,x))}function T(q,L,$,x,N){const j=q.pop();return j?R(q,j,L,$,x,N):N()}function R(q,L,$,x,N,j){const D=d.join($,L),G=d.join(x,L);l.checkPaths(D,G,"copy",N,(V,te)=>{if(V)return j(V);const{destStat:de}=te;s(de,D,G,N,ie=>ie?j(ie):T(q,$,x,N,j))})}function v(q,L,$,x,N){e.readlink(L,(j,D)=>{if(j)return N(j);if(x.dereference&&(D=d.resolve(process.cwd(),D)),q)e.readlink($,(G,V)=>G?G.code==="EINVAL"||G.code==="UNKNOWN"?e.symlink(D,$,N):N(G):(x.dereference&&(V=d.resolve(process.cwd(),V)),l.isSrcSubdir(D,V)?N(new Error(`Cannot copy '${D}' to a subdirectory of itself, '${V}'.`)):q.isDirectory()&&l.isSrcSubdir(V,D)?N(new Error(`Cannot overwrite '${V}' with '${D}'.`)):k(D,$,N)));else return e.symlink(D,$,N)})}function k(q,L,$){e.unlink(L,x=>x?$(x):e.symlink(q,L,$))}return fn=o,fn}var dn,Vo;function Oc(){if(Vo)return dn;Vo=1;const e=Ve(),d=Ie,p=it().mkdirsSync,c=jl().utimesMillisSync,f=Bt();function l(T,R,v){typeof v=="function"&&(v={filter:v}),v=v||{},v.clobber="clobber"in v?!!v.clobber:!0,v.overwrite="overwrite"in v?!!v.overwrite:v.clobber,v.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:k,destStat:q}=f.checkPathsSync(T,R,"copy",v);return f.checkParentPathsSync(T,k,R,"copy"),o(q,T,R,v)}function o(T,R,v,k){if(k.filter&&!k.filter(R,v))return;const q=d.dirname(v);return e.existsSync(q)||p(q),a(T,R,v,k)}function u(T,R,v,k){if(!(k.filter&&!k.filter(R,v)))return a(T,R,v,k)}function a(T,R,v,k){const L=(k.dereference?e.statSync:e.lstatSync)(R);if(L.isDirectory())return w(L,T,R,v,k);if(L.isFile()||L.isCharacterDevice()||L.isBlockDevice())return s(L,T,R,v,k);if(L.isSymbolicLink())return b(T,R,v,k);throw L.isSocket()?new Error(`Cannot copy a socket file: ${R}`):L.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${R}`):new Error(`Unknown file: ${R}`)}function s(T,R,v,k,q){return R?i(T,v,k,q):r(T,v,k,q)}function i(T,R,v,k){if(k.overwrite)return e.unlinkSync(v),r(T,R,v,k);if(k.errorOnExist)throw new Error(`'${v}' already exists`)}function r(T,R,v,k){return e.copyFileSync(R,v),k.preserveTimestamps&&n(T.mode,R,v),y(v,T.mode)}function n(T,R,v){return h(T)&&g(v,T),m(R,v)}function h(T){return(T&128)===0}function g(T,R){return y(T,R|128)}function y(T,R){return e.chmodSync(T,R)}function m(T,R){const v=e.statSync(T);return c(R,v.atime,v.mtime)}function w(T,R,v,k,q){return R?O(v,k,q):S(T.mode,v,k,q)}function S(T,R,v,k){return e.mkdirSync(v),O(R,v,k),y(v,T)}function O(T,R,v){e.readdirSync(T).forEach(k=>I(k,T,R,v))}function I(T,R,v,k){const q=d.join(R,T),L=d.join(v,T),{destStat:$}=f.checkPathsSync(q,L,"copy",k);return u($,q,L,k)}function b(T,R,v,k){let q=e.readlinkSync(R);if(k.dereference&&(q=d.resolve(process.cwd(),q)),T){let L;try{L=e.readlinkSync(v)}catch($){if($.code==="EINVAL"||$.code==="UNKNOWN")return e.symlinkSync(q,v);throw $}if(k.dereference&&(L=d.resolve(process.cwd(),L)),f.isSrcSubdir(q,L))throw new Error(`Cannot copy '${q}' to a subdirectory of itself, '${L}'.`);if(e.statSync(v).isDirectory()&&f.isSrcSubdir(L,q))throw new Error(`Cannot overwrite '${L}' with '${q}'.`);return P(q,v)}else return e.symlinkSync(q,v)}function P(T,R){return e.unlinkSync(R),e.symlinkSync(T,R)}return dn=l,dn}var hn,Yo;function oo(){if(Yo)return hn;Yo=1;const e=ze().fromCallback;return hn={copy:e(bc()),copySync:Oc()},hn}var pn,zo;function Pc(){if(zo)return pn;zo=1;const e=Ve(),d=Ie,p=$l,c=process.platform==="win32";function f(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||e[m],m=m+"Sync",g[m]=g[m]||e[m]}),g.maxBusyTries=g.maxBusyTries||3}function l(g,y,m){let w=0;typeof y=="function"&&(m=y,y={}),p(g,"rimraf: missing path"),p.strictEqual(typeof g,"string","rimraf: path should be a string"),p.strictEqual(typeof m,"function","rimraf: callback function required"),p(y,"rimraf: invalid options argument provided"),p.strictEqual(typeof y,"object","rimraf: options should be object"),f(y),o(g,y,function S(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&w<y.maxBusyTries){w++;const I=w*100;return setTimeout(()=>o(g,y,S),I)}O.code==="ENOENT"&&(O=null)}m(O)})}function o(g,y,m){p(g),p(y),p(typeof m=="function"),y.lstat(g,(w,S)=>{if(w&&w.code==="ENOENT")return m(null);if(w&&w.code==="EPERM"&&c)return u(g,y,w,m);if(S&&S.isDirectory())return s(g,y,w,m);y.unlink(g,O=>{if(O){if(O.code==="ENOENT")return m(null);if(O.code==="EPERM")return c?u(g,y,O,m):s(g,y,O,m);if(O.code==="EISDIR")return s(g,y,O,m)}return m(O)})})}function u(g,y,m,w){p(g),p(y),p(typeof w=="function"),y.chmod(g,438,S=>{S?w(S.code==="ENOENT"?null:m):y.stat(g,(O,I)=>{O?w(O.code==="ENOENT"?null:m):I.isDirectory()?s(g,y,m,w):y.unlink(g,w)})})}function a(g,y,m){let w;p(g),p(y);try{y.chmodSync(g,438)}catch(S){if(S.code==="ENOENT")return;throw m}try{w=y.statSync(g)}catch(S){if(S.code==="ENOENT")return;throw m}w.isDirectory()?n(g,y,m):y.unlinkSync(g)}function s(g,y,m,w){p(g),p(y),p(typeof w=="function"),y.rmdir(g,S=>{S&&(S.code==="ENOTEMPTY"||S.code==="EEXIST"||S.code==="EPERM")?i(g,y,w):S&&S.code==="ENOTDIR"?w(m):w(S)})}function i(g,y,m){p(g),p(y),p(typeof m=="function"),y.readdir(g,(w,S)=>{if(w)return m(w);let O=S.length,I;if(O===0)return y.rmdir(g,m);S.forEach(b=>{l(d.join(g,b),y,P=>{if(!I){if(P)return m(I=P);--O===0&&y.rmdir(g,m)}})})})}function r(g,y){let m;y=y||{},f(y),p(g,"rimraf: missing path"),p.strictEqual(typeof g,"string","rimraf: path should be a string"),p(y,"rimraf: missing options"),p.strictEqual(typeof y,"object","rimraf: options should be object");try{m=y.lstatSync(g)}catch(w){if(w.code==="ENOENT")return;w.code==="EPERM"&&c&&a(g,y,w)}try{m&&m.isDirectory()?n(g,y,null):y.unlinkSync(g)}catch(w){if(w.code==="ENOENT")return;if(w.code==="EPERM")return c?a(g,y,w):n(g,y,w);if(w.code!=="EISDIR")throw w;n(g,y,w)}}function n(g,y,m){p(g),p(y);try{y.rmdirSync(g)}catch(w){if(w.code==="ENOTDIR")throw m;if(w.code==="ENOTEMPTY"||w.code==="EEXIST"||w.code==="EPERM")h(g,y);else if(w.code!=="ENOENT")throw w}}function h(g,y){if(p(g),p(y),y.readdirSync(g).forEach(m=>r(d.join(g,m),y)),c){const m=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-m<500)}else return y.rmdirSync(g,y)}return pn=l,l.sync=r,pn}var mn,Xo;function Gr(){if(Xo)return mn;Xo=1;const e=Ve(),d=ze().fromCallback,p=Pc();function c(l,o){if(e.rm)return e.rm(l,{recursive:!0,force:!0},o);p(l,o)}function f(l){if(e.rmSync)return e.rmSync(l,{recursive:!0,force:!0});p.sync(l)}return mn={remove:d(c),removeSync:f},mn}var gn,Jo;function Ic(){if(Jo)return gn;Jo=1;const e=ze().fromPromise,d=Mt(),p=Ie,c=it(),f=Gr(),l=e(async function(a){let s;try{s=await d.readdir(a)}catch{return c.mkdirs(a)}return Promise.all(s.map(i=>f.remove(p.join(a,i))))});function o(u){let a;try{a=d.readdirSync(u)}catch{return c.mkdirsSync(u)}a.forEach(s=>{s=p.join(u,s),f.removeSync(s)})}return gn={emptyDirSync:o,emptydirSync:o,emptyDir:l,emptydir:l},gn}var vn,Ko;function Dc(){if(Ko)return vn;Ko=1;const e=ze().fromCallback,d=Ie,p=Ve(),c=it();function f(o,u){function a(){p.writeFile(o,"",s=>{if(s)return u(s);u()})}p.stat(o,(s,i)=>{if(!s&&i.isFile())return u();const r=d.dirname(o);p.stat(r,(n,h)=>{if(n)return n.code==="ENOENT"?c.mkdirs(r,g=>{if(g)return u(g);a()}):u(n);h.isDirectory()?a():p.readdir(r,g=>{if(g)return u(g)})})})}function l(o){let u;try{u=p.statSync(o)}catch{}if(u&&u.isFile())return;const a=d.dirname(o);try{p.statSync(a).isDirectory()||p.readdirSync(a)}catch(s){if(s&&s.code==="ENOENT")c.mkdirsSync(a);else throw s}p.writeFileSync(o,"")}return vn={createFile:e(f),createFileSync:l},vn}var En,Qo;function Nc(){if(Qo)return En;Qo=1;const e=ze().fromCallback,d=Ie,p=Ve(),c=it(),f=Ot().pathExists,{areIdentical:l}=Bt();function o(a,s,i){function r(n,h){p.link(n,h,g=>{if(g)return i(g);i(null)})}p.lstat(s,(n,h)=>{p.lstat(a,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),i(g);if(h&&l(y,h))return i(null);const m=d.dirname(s);f(m,(w,S)=>{if(w)return i(w);if(S)return r(a,s);c.mkdirs(m,O=>{if(O)return i(O);r(a,s)})})})})}function u(a,s){let i;try{i=p.lstatSync(s)}catch{}try{const h=p.lstatSync(a);if(i&&l(h,i))return}catch(h){throw h.message=h.message.replace("lstat","ensureLink"),h}const r=d.dirname(s);return p.existsSync(r)||c.mkdirsSync(r),p.linkSync(a,s)}return En={createLink:e(o),createLinkSync:u},En}var yn,Zo;function Fc(){if(Zo)return yn;Zo=1;const e=Ie,d=Ve(),p=Ot().pathExists;function c(l,o,u){if(e.isAbsolute(l))return d.lstat(l,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),u(a)):u(null,{toCwd:l,toDst:l}));{const a=e.dirname(o),s=e.join(a,l);return p(s,(i,r)=>i?u(i):r?u(null,{toCwd:s,toDst:l}):d.lstat(l,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),u(n)):u(null,{toCwd:l,toDst:e.relative(a,l)})))}}function f(l,o){let u;if(e.isAbsolute(l)){if(u=d.existsSync(l),!u)throw new Error("absolute srcpath does not exist");return{toCwd:l,toDst:l}}else{const a=e.dirname(o),s=e.join(a,l);if(u=d.existsSync(s),u)return{toCwd:s,toDst:l};if(u=d.existsSync(l),!u)throw new Error("relative srcpath does not exist");return{toCwd:l,toDst:e.relative(a,l)}}}return yn={symlinkPaths:c,symlinkPathsSync:f},yn}var wn,ea;function xc(){if(ea)return wn;ea=1;const e=Ve();function d(c,f,l){if(l=typeof f=="function"?f:l,f=typeof f=="function"?!1:f,f)return l(null,f);e.lstat(c,(o,u)=>{if(o)return l(null,"file");f=u&&u.isDirectory()?"dir":"file",l(null,f)})}function p(c,f){let l;if(f)return f;try{l=e.lstatSync(c)}catch{return"file"}return l&&l.isDirectory()?"dir":"file"}return wn={symlinkType:d,symlinkTypeSync:p},wn}var _n,ta;function Lc(){if(ta)return _n;ta=1;const e=ze().fromCallback,d=Ie,p=Mt(),c=it(),f=c.mkdirs,l=c.mkdirsSync,o=Fc(),u=o.symlinkPaths,a=o.symlinkPathsSync,s=xc(),i=s.symlinkType,r=s.symlinkTypeSync,n=Ot().pathExists,{areIdentical:h}=Bt();function g(w,S,O,I){I=typeof O=="function"?O:I,O=typeof O=="function"?!1:O,p.lstat(S,(b,P)=>{!b&&P.isSymbolicLink()?Promise.all([p.stat(w),p.stat(S)]).then(([T,R])=>{if(h(T,R))return I(null);y(w,S,O,I)}):y(w,S,O,I)})}function y(w,S,O,I){u(w,S,(b,P)=>{if(b)return I(b);w=P.toDst,i(P.toCwd,O,(T,R)=>{if(T)return I(T);const v=d.dirname(S);n(v,(k,q)=>{if(k)return I(k);if(q)return p.symlink(w,S,R,I);f(v,L=>{if(L)return I(L);p.symlink(w,S,R,I)})})})})}function m(w,S,O){let I;try{I=p.lstatSync(S)}catch{}if(I&&I.isSymbolicLink()){const R=p.statSync(w),v=p.statSync(S);if(h(R,v))return}const b=a(w,S);w=b.toDst,O=r(b.toCwd,O);const P=d.dirname(S);return p.existsSync(P)||l(P),p.symlinkSync(w,S,O)}return _n={createSymlink:e(g),createSymlinkSync:m},_n}var An,ra;function Uc(){if(ra)return An;ra=1;const{createFile:e,createFileSync:d}=Dc(),{createLink:p,createLinkSync:c}=Nc(),{createSymlink:f,createSymlinkSync:l}=Lc();return An={createFile:e,createFileSync:d,ensureFile:e,ensureFileSync:d,createLink:p,createLinkSync:c,ensureLink:p,ensureLinkSync:c,createSymlink:f,createSymlinkSync:l,ensureSymlink:f,ensureSymlinkSync:l},An}var Rn,na;function ao(){if(na)return Rn;na=1;function e(p,{EOL:c=`
`,finalEOL:f=!0,replacer:l=null,spaces:o}={}){const u=f?c:"";return JSON.stringify(p,l,o).replace(/\n/g,c)+u}function d(p){return Buffer.isBuffer(p)&&(p=p.toString("utf8")),p.replace(/^\uFEFF/,"")}return Rn={stringify:e,stripBom:d},Rn}var Sn,ia;function kc(){if(ia)return Sn;ia=1;let e;try{e=Ve()}catch{e=vt}const d=ze(),{stringify:p,stripBom:c}=ao();async function f(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||e,h="throws"in r?r.throws:!0;let g=await d.fromCallback(n.readFile)(i,r);g=c(g);let y;try{y=JSON.parse(g,r?r.reviver:null)}catch(m){if(h)throw m.message=`${i}: ${m.message}`,m;return null}return y}const l=d.fromPromise(f);function o(i,r={}){typeof r=="string"&&(r={encoding:r});const n=r.fs||e,h="throws"in r?r.throws:!0;try{let g=n.readFileSync(i,r);return g=c(g),JSON.parse(g,r.reviver)}catch(g){if(h)throw g.message=`${i}: ${g.message}`,g;return null}}async function u(i,r,n={}){const h=n.fs||e,g=p(r,n);await d.fromCallback(h.writeFile)(i,g,n)}const a=d.fromPromise(u);function s(i,r,n={}){const h=n.fs||e,g=p(r,n);return h.writeFileSync(i,g,n)}return Sn={readFile:l,readFileSync:o,writeFile:a,writeFileSync:s},Sn}var Tn,oa;function qc(){if(oa)return Tn;oa=1;const e=kc();return Tn={readJson:e.readFile,readJsonSync:e.readFileSync,writeJson:e.writeFile,writeJsonSync:e.writeFileSync},Tn}var Cn,aa;function so(){if(aa)return Cn;aa=1;const e=ze().fromCallback,d=Ve(),p=Ie,c=it(),f=Ot().pathExists;function l(u,a,s,i){typeof s=="function"&&(i=s,s="utf8");const r=p.dirname(u);f(r,(n,h)=>{if(n)return i(n);if(h)return d.writeFile(u,a,s,i);c.mkdirs(r,g=>{if(g)return i(g);d.writeFile(u,a,s,i)})})}function o(u,...a){const s=p.dirname(u);if(d.existsSync(s))return d.writeFileSync(u,...a);c.mkdirsSync(s),d.writeFileSync(u,...a)}return Cn={outputFile:e(l),outputFileSync:o},Cn}var bn,sa;function $c(){if(sa)return bn;sa=1;const{stringify:e}=ao(),{outputFile:d}=so();async function p(c,f,l={}){const o=e(f,l);await d(c,o,l)}return bn=p,bn}var On,la;function Mc(){if(la)return On;la=1;const{stringify:e}=ao(),{outputFileSync:d}=so();function p(c,f,l){const o=e(f,l);d(c,o,l)}return On=p,On}var Pn,ua;function Bc(){if(ua)return Pn;ua=1;const e=ze().fromPromise,d=qc();return d.outputJson=e($c()),d.outputJsonSync=Mc(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,Pn=d,Pn}var In,ca;function Hc(){if(ca)return In;ca=1;const e=Ve(),d=Ie,p=oo().copy,c=Gr().remove,f=it().mkdirp,l=Ot().pathExists,o=Bt();function u(n,h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;o.checkPaths(n,h,"move",g,(w,S)=>{if(w)return y(w);const{srcStat:O,isChangingCase:I=!1}=S;o.checkParentPaths(n,O,h,"move",b=>{if(b)return y(b);if(a(h))return s(n,h,m,I,y);f(d.dirname(h),P=>P?y(P):s(n,h,m,I,y))})})}function a(n){const h=d.dirname(n);return d.parse(h).root===h}function s(n,h,g,y,m){if(y)return i(n,h,g,m);if(g)return c(h,w=>w?m(w):i(n,h,g,m));l(h,(w,S)=>w?m(w):S?m(new Error("dest already exists.")):i(n,h,g,m))}function i(n,h,g,y){e.rename(n,h,m=>m?m.code!=="EXDEV"?y(m):r(n,h,g,y):y())}function r(n,h,g,y){p(n,h,{overwrite:g,errorOnExist:!0},w=>w?y(w):c(n,y))}return In=u,In}var Dn,fa;function jc(){if(fa)return Dn;fa=1;const e=Ve(),d=Ie,p=oo().copySync,c=Gr().removeSync,f=it().mkdirpSync,l=Bt();function o(r,n,h){h=h||{};const g=h.overwrite||h.clobber||!1,{srcStat:y,isChangingCase:m=!1}=l.checkPathsSync(r,n,"move",h);return l.checkParentPathsSync(r,y,n,"move"),u(n)||f(d.dirname(n)),a(r,n,g,m)}function u(r){const n=d.dirname(r);return d.parse(n).root===n}function a(r,n,h,g){if(g)return s(r,n,h);if(h)return c(n),s(r,n,h);if(e.existsSync(n))throw new Error("dest already exists.");return s(r,n,h)}function s(r,n,h){try{e.renameSync(r,n)}catch(g){if(g.code!=="EXDEV")throw g;return i(r,n,h)}}function i(r,n,h){return p(r,n,{overwrite:h,errorOnExist:!0}),c(r)}return Dn=o,Dn}var Nn,da;function Gc(){if(da)return Nn;da=1;const e=ze().fromCallback;return Nn={move:e(Hc()),moveSync:jc()},Nn}var Fn,ha;function Et(){return ha||(ha=1,Fn={...Mt(),...oo(),...Ic(),...Uc(),...Bc(),...it(),...Gc(),...so(),...Ot(),...Gr()}),Fn}var Wt={},St={},xn={},Tt={},pa;function lo(){if(pa)return Tt;pa=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.CancellationError=Tt.CancellationToken=void 0;const e=Ml;let d=class extends e.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(f){this.removeParentCancelHandler(),this._parent=f,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(f){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,f!=null&&(this.parent=f)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(f){this.cancelled?f():this.once("cancel",f)}createPromise(f){if(this.cancelled)return Promise.reject(new p);const l=()=>{if(o!=null)try{this.removeListener("cancel",o),o=null}catch{}};let o=null;return new Promise((u,a)=>{let s=null;if(o=()=>{try{s!=null&&(s(),s=null)}finally{a(new p)}},this.cancelled){o();return}this.onCancel(o),f(u,a,i=>{s=i})}).then(u=>(l(),u)).catch(u=>{throw l(),u})}removeParentCancelHandler(){const f=this._parent;f!=null&&this.parentCancelHandler!=null&&(f.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};Tt.CancellationToken=d;class p extends Error{constructor(){super("cancelled")}}return Tt.CancellationError=p,Tt}var Dr={},ma;function Wr(){if(ma)return Dr;ma=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.newError=e;function e(d,p){const c=new Error(d);return c.code=p,c}return Dr}var qe={},Nr={exports:{}},Fr={exports:{}},Ln,ga;function Wc(){if(ga)return Ln;ga=1;var e=1e3,d=e*60,p=d*60,c=p*24,f=c*7,l=c*365.25;Ln=function(i,r){r=r||{};var n=typeof i;if(n==="string"&&i.length>0)return o(i);if(n==="number"&&isFinite(i))return r.long?a(i):u(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function o(i){if(i=String(i),!(i.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(r){var n=parseFloat(r[1]),h=(r[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"weeks":case"week":case"w":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*p;case"minutes":case"minute":case"mins":case"min":case"m":return n*d;case"seconds":case"second":case"secs":case"sec":case"s":return n*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function u(i){var r=Math.abs(i);return r>=c?Math.round(i/c)+"d":r>=p?Math.round(i/p)+"h":r>=d?Math.round(i/d)+"m":r>=e?Math.round(i/e)+"s":i+"ms"}function a(i){var r=Math.abs(i);return r>=c?s(i,r,c,"day"):r>=p?s(i,r,p,"hour"):r>=d?s(i,r,d,"minute"):r>=e?s(i,r,e,"second"):i+" ms"}function s(i,r,n,h){var g=r>=n*1.5;return Math.round(i/n)+" "+h+(g?"s":"")}return Ln}var Un,va;function Gl(){if(va)return Un;va=1;function e(d){c.debug=c,c.default=c,c.coerce=s,c.disable=u,c.enable=l,c.enabled=a,c.humanize=Wc(),c.destroy=i,Object.keys(d).forEach(r=>{c[r]=d[r]}),c.names=[],c.skips=[],c.formatters={};function p(r){let n=0;for(let h=0;h<r.length;h++)n=(n<<5)-n+r.charCodeAt(h),n|=0;return c.colors[Math.abs(n)%c.colors.length]}c.selectColor=p;function c(r){let n,h=null,g,y;function m(...w){if(!m.enabled)return;const S=m,O=Number(new Date),I=O-(n||O);S.diff=I,S.prev=n,S.curr=O,n=O,w[0]=c.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let b=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(T,R)=>{if(T==="%%")return"%";b++;const v=c.formatters[R];if(typeof v=="function"){const k=w[b];T=v.call(S,k),w.splice(b,1),b--}return T}),c.formatArgs.call(S,w),(S.log||c.log).apply(S,w)}return m.namespace=r,m.useColors=c.useColors(),m.color=c.selectColor(r),m.extend=f,m.destroy=c.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==c.namespaces&&(g=c.namespaces,y=c.enabled(r)),y),set:w=>{h=w}}),typeof c.init=="function"&&c.init(m),m}function f(r,n){const h=c(this.namespace+(typeof n>"u"?":":n)+r);return h.log=this.log,h}function l(r){c.save(r),c.namespaces=r,c.names=[],c.skips=[];const n=(typeof r=="string"?r:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const h of n)h[0]==="-"?c.skips.push(h.slice(1)):c.names.push(h)}function o(r,n){let h=0,g=0,y=-1,m=0;for(;h<r.length;)if(g<n.length&&(n[g]===r[h]||n[g]==="*"))n[g]==="*"?(y=g,m=h,g++):(h++,g++);else if(y!==-1)g=y+1,m++,h=m;else return!1;for(;g<n.length&&n[g]==="*";)g++;return g===n.length}function u(){const r=[...c.names,...c.skips.map(n=>"-"+n)].join(",");return c.enable(""),r}function a(r){for(const n of c.skips)if(o(r,n))return!1;for(const n of c.names)if(o(r,n))return!0;return!1}function s(r){return r instanceof Error?r.stack||r.message:r}function i(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c.enable(c.load()),c}return Un=e,Un}var Ea;function Vc(){return Ea||(Ea=1,function(e,d){d.formatArgs=c,d.save=f,d.load=l,d.useColors=p,d.storage=o(),d.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;a.splice(1,0,s,"color: inherit");let i=0,r=0;a[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(i++,n==="%c"&&(r=i))}),a.splice(r,0,s)}d.log=console.debug||console.log||(()=>{});function f(a){try{a?d.storage.setItem("debug",a):d.storage.removeItem("debug")}catch{}}function l(){let a;try{a=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}function o(){try{return localStorage}catch{}}e.exports=Gl()(d);const{formatters:u}=e.exports;u.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}(Fr,Fr.exports)),Fr.exports}var xr={exports:{}},kn,ya;function Yc(){return ya||(ya=1,kn=(e,d=process.argv)=>{const p=e.startsWith("-")?"":e.length===1?"-":"--",c=d.indexOf(p+e),f=d.indexOf("--");return c!==-1&&(f===-1||c<f)}),kn}var qn,wa;function zc(){if(wa)return qn;wa=1;const e=jr,d=Bl,p=Yc(),{env:c}=process;let f;p("no-color")||p("no-colors")||p("color=false")||p("color=never")?f=0:(p("color")||p("colors")||p("color=true")||p("color=always"))&&(f=1),"FORCE_COLOR"in c&&(c.FORCE_COLOR==="true"?f=1:c.FORCE_COLOR==="false"?f=0:f=c.FORCE_COLOR.length===0?1:Math.min(parseInt(c.FORCE_COLOR,10),3));function l(a){return a===0?!1:{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function o(a,s){if(f===0)return 0;if(p("color=16m")||p("color=full")||p("color=truecolor"))return 3;if(p("color=256"))return 2;if(a&&!s&&f===void 0)return 0;const i=f||0;if(c.TERM==="dumb")return i;if(process.platform==="win32"){const r=e.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in c)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in c)||c.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in c)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(c.TEAMCITY_VERSION)?1:0;if(c.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in c){const r=parseInt((c.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(c.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(c.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(c.TERM)||"COLORTERM"in c?1:i}function u(a){const s=o(a,a&&a.isTTY);return l(s)}return qn={supportsColor:u,stdout:l(o(!0,d.isatty(1))),stderr:l(o(!0,d.isatty(2)))},qn}var _a;function Xc(){return _a||(_a=1,function(e,d){const p=Bl,c=io;d.init=i,d.log=u,d.formatArgs=l,d.save=a,d.load=s,d.useColors=f,d.destroy=c.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const n=zc();n&&(n.stderr||n).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(n=>/^debug_/i.test(n)).reduce((n,h)=>{const g=h.substring(6).toLowerCase().replace(/_([a-z])/g,(m,w)=>w.toUpperCase());let y=process.env[h];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),n[g]=y,n},{});function f(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:p.isatty(process.stderr.fd)}function l(n){const{namespace:h,useColors:g}=this;if(g){const y=this.color,m="\x1B[3"+(y<8?y:"8;5;"+y),w=`  ${m};1m${h} \x1B[0m`;n[0]=w+n[0].split(`
`).join(`
`+w),n.push(m+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else n[0]=o()+h+" "+n[0]}function o(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(...n){return process.stderr.write(c.formatWithOptions(d.inspectOpts,...n)+`
`)}function a(n){n?process.env.DEBUG=n:delete process.env.DEBUG}function s(){return process.env.DEBUG}function i(n){n.inspectOpts={};const h=Object.keys(d.inspectOpts);for(let g=0;g<h.length;g++)n.inspectOpts[h[g]]=d.inspectOpts[h[g]]}e.exports=Gl()(d);const{formatters:r}=e.exports;r.o=function(n){return this.inspectOpts.colors=this.useColors,c.inspect(n,this.inspectOpts).split(`
`).map(h=>h.trim()).join(" ")},r.O=function(n){return this.inspectOpts.colors=this.useColors,c.inspect(n,this.inspectOpts)}}(xr,xr.exports)),xr.exports}var Aa;function Jc(){return Aa||(Aa=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Nr.exports=Vc():Nr.exports=Xc()),Nr.exports}var Vt={},Ra;function Wl(){if(Ra)return Vt;Ra=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.ProgressCallbackTransform=void 0;const e=vr;let d=class extends e.Transform{constructor(c,f,l){super(),this.total=c,this.cancellationToken=f,this.onProgress=l,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(c,f,l){if(this.cancellationToken.cancelled){l(new Error("cancelled"),null);return}this.transferred+=c.length,this.delta+=c.length;const o=Date.now();o>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=o+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((o-this.start)/1e3))}),this.delta=0),l(null,c)}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,c(null)}};return Vt.ProgressCallbackTransform=d,Vt}var Sa;function Kc(){if(Sa)return qe;Sa=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.DigestTransform=qe.HttpExecutor=qe.HttpError=void 0,qe.createHttpError=s,qe.parseJson=n,qe.configureRequestOptionsFromUrl=y,qe.configureRequestUrl=m,qe.safeGetHeader=O,qe.configureRequestOptions=b,qe.safeStringifyJson=P;const e=Er,d=Jc(),p=vt,c=vr,f=nt,l=lo(),o=Wr(),u=Wl(),a=(0,d.default)("electron-builder");function s(T,R=null){return new r(T.statusCode||-1,`${T.statusCode} ${T.statusMessage}`+(R==null?"":`
`+JSON.stringify(R,null,"  "))+`
Headers: `+P(T.headers),R)}const i=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class r extends Error{constructor(R,v=`HTTP error: ${i.get(R)||R}`,k=null){super(v),this.statusCode=R,this.description=k,this.name="HttpError",this.code=`HTTP_ERROR_${R}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}qe.HttpError=r;function n(T){return T.then(R=>R==null||R.length===0?null:JSON.parse(R))}class h{constructor(){this.maxRedirects=10}request(R,v=new l.CancellationToken,k){b(R);const q=k==null?void 0:JSON.stringify(k),L=q?Buffer.from(q):void 0;if(L!=null){a(q);const{headers:$,...x}=R;R={method:"post",headers:{"Content-Type":"application/json","Content-Length":L.length,...$},...x}}return this.doApiRequest(R,v,$=>$.end(L))}doApiRequest(R,v,k,q=0){return a.enabled&&a(`Request: ${P(R)}`),v.createPromise((L,$,x)=>{const N=this.createRequest(R,j=>{try{this.handleResponse(j,R,v,L,$,q,k)}catch(D){$(D)}});this.addErrorAndTimeoutHandlers(N,$,R.timeout),this.addRedirectHandlers(N,R,$,q,j=>{this.doApiRequest(j,v,k,q).then(L).catch($)}),k(N,$),x(()=>N.abort())})}addRedirectHandlers(R,v,k,q,L){}addErrorAndTimeoutHandlers(R,v,k=60*1e3){this.addTimeOutHandler(R,v,k),R.on("error",v),R.on("aborted",()=>{v(new Error("Request has been aborted by the server"))})}handleResponse(R,v,k,q,L,$,x){var N;if(a.enabled&&a(`Response: ${R.statusCode} ${R.statusMessage}, request options: ${P(v)}`),R.statusCode===404){L(s(R,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(R.statusCode===204){q();return}const j=(N=R.statusCode)!==null&&N!==void 0?N:0,D=j>=300&&j<400,G=O(R,"location");if(D&&G!=null){if($>this.maxRedirects){L(this.createMaxRedirectError());return}this.doApiRequest(h.prepareRedirectUrlOptions(G,v),k,x,$).then(q).catch(L);return}R.setEncoding("utf8");let V="";R.on("error",L),R.on("data",te=>V+=te),R.on("end",()=>{try{if(R.statusCode!=null&&R.statusCode>=400){const te=O(R,"content-type"),de=te!=null&&(Array.isArray(te)?te.find(ie=>ie.includes("json"))!=null:te.includes("json"));L(s(R,`method: ${v.method||"GET"} url: ${v.protocol||"https:"}//${v.hostname}${v.port?`:${v.port}`:""}${v.path}

          Data:
          ${de?JSON.stringify(JSON.parse(V)):V}
          `))}else q(V.length===0?null:V)}catch(te){L(te)}})}async downloadToBuffer(R,v){return await v.cancellationToken.createPromise((k,q,L)=>{const $=[],x={headers:v.headers||void 0,redirect:"manual"};m(R,x),b(x),this.doDownload(x,{destination:null,options:v,onCancel:L,callback:N=>{N==null?k(Buffer.concat($)):q(N)},responseHandler:(N,j)=>{let D=0;N.on("data",G=>{if(D+=G.length,D>524288e3){j(new Error("Maximum allowed size is 500 MB"));return}$.push(G)}),N.on("end",()=>{j(null)})}},0)})}doDownload(R,v,k){const q=this.createRequest(R,L=>{if(L.statusCode>=400){v.callback(new Error(`Cannot download "${R.protocol||"https:"}//${R.hostname}${R.path}", status ${L.statusCode}: ${L.statusMessage}`));return}L.on("error",v.callback);const $=O(L,"location");if($!=null){k<this.maxRedirects?this.doDownload(h.prepareRedirectUrlOptions($,R),v,k++):v.callback(this.createMaxRedirectError());return}v.responseHandler==null?I(v,L):v.responseHandler(L,v.callback)});this.addErrorAndTimeoutHandlers(q,v.callback,R.timeout),this.addRedirectHandlers(q,R,v.callback,k,L=>{this.doDownload(L,v,k++)}),q.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(R,v,k){R.on("socket",q=>{q.setTimeout(k,()=>{R.abort(),v(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(R,v){const k=y(R,{...v}),q=k.headers;if(q!=null&&q.authorization){const L=h.reconstructOriginalUrl(v),$=g(R,v);h.isCrossOriginRedirect(L,$)&&(a.enabled&&a(`Given the cross-origin redirect (from ${L.host} to ${$.host}), the Authorization header will be stripped out.`),delete q.authorization)}return k}static reconstructOriginalUrl(R){const v=R.protocol||"https:";if(!R.hostname)throw new Error("Missing hostname in request options");const k=R.hostname,q=R.port?`:${R.port}`:"",L=R.path||"/";return new f.URL(`${v}//${k}${q}${L}`)}static isCrossOriginRedirect(R,v){if(R.hostname.toLowerCase()!==v.hostname.toLowerCase())return!0;if(R.protocol==="http:"&&["80",""].includes(R.port)&&v.protocol==="https:"&&["443",""].includes(v.port))return!1;if(R.protocol!==v.protocol)return!0;const k=R.port,q=v.port;return k!==q}static retryOnServerError(R,v=3){for(let k=0;;k++)try{return R()}catch(q){if(k<v&&(q instanceof r&&q.isServerError()||q.code==="EPIPE"))continue;throw q}}}qe.HttpExecutor=h;function g(T,R){try{return new f.URL(T)}catch{const v=R.hostname,k=R.protocol||"https:",q=R.port?`:${R.port}`:"",L=`${k}//${v}${q}`;return new f.URL(T,L)}}function y(T,R){const v=b(R),k=g(T,R);return m(k,v),v}function m(T,R){R.protocol=T.protocol,R.hostname=T.hostname,T.port?R.port=T.port:R.port&&delete R.port,R.path=T.pathname+T.search}class w extends c.Transform{get actual(){return this._actual}constructor(R,v="sha512",k="base64"){super(),this.expected=R,this.algorithm=v,this.encoding=k,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,e.createHash)(v)}_transform(R,v,k){this.digester.update(R),k(null,R)}_flush(R){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(v){R(v);return}R(null)}validate(){if(this._actual==null)throw(0,o.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,o.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}qe.DigestTransform=w;function S(T,R,v){return T!=null&&R!=null&&T!==R?(v(new Error(`checksum mismatch: expected ${R} but got ${T} (X-Checksum-Sha2 header)`)),!1):!0}function O(T,R){const v=T.headers[R];return v==null?null:Array.isArray(v)?v.length===0?null:v[v.length-1]:v}function I(T,R){if(!S(O(R,"X-Checksum-Sha2"),T.options.sha2,T.callback))return;const v=[];if(T.options.onProgress!=null){const $=O(R,"content-length");$!=null&&v.push(new u.ProgressCallbackTransform(parseInt($,10),T.options.cancellationToken,T.options.onProgress))}const k=T.options.sha512;k!=null?v.push(new w(k,"sha512",k.length===128&&!k.includes("+")&&!k.includes("Z")&&!k.includes("=")?"hex":"base64")):T.options.sha2!=null&&v.push(new w(T.options.sha2,"sha256","hex"));const q=(0,p.createWriteStream)(T.destination);v.push(q);let L=R;for(const $ of v)$.on("error",x=>{q.close(),T.options.cancellationToken.cancelled||T.callback(x)}),L=L.pipe($);q.on("finish",()=>{q.close(T.callback)})}function b(T,R,v){v!=null&&(T.method=v),T.headers={...T.headers};const k=T.headers;return R!=null&&(k.authorization=R.startsWith("Basic")||R.startsWith("Bearer")?R:`token ${R}`),k["User-Agent"]==null&&(k["User-Agent"]="electron-builder"),(v==null||v==="GET"||k["Cache-Control"]==null)&&(k["Cache-Control"]="no-cache"),T.protocol==null&&process.versions.electron!=null&&(T.protocol="https:"),T}function P(T,R){return JSON.stringify(T,(v,k)=>v.endsWith("Authorization")||v.endsWith("authorization")||v.endsWith("Password")||v.endsWith("PASSWORD")||v.endsWith("Token")||v.includes("password")||v.includes("token")||R!=null&&R.has(v)?"<stripped sensitive data>":k,2)}return qe}var Yt={},Ta;function Qc(){if(Ta)return Yt;Ta=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.MemoLazy=void 0;let e=class{constructor(c,f){this.selector=c,this.creator=f,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const c=this.selector();if(this._value!==void 0&&d(this.selected,c))return this._value;this.selected=c;const f=this.creator(c);return this.value=f,f}set value(c){this._value=c}};Yt.MemoLazy=e;function d(p,c){if(typeof p=="object"&&p!==null&&(typeof c=="object"&&c!==null)){const o=Object.keys(p),u=Object.keys(c);return o.length===u.length&&o.every(a=>d(p[a],c[a]))}return p===c}return Yt}var xt={},Ca;function Zc(){if(Ca)return xt;Ca=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.githubUrl=e,xt.githubTagPrefix=d,xt.getS3LikeProviderBaseUrl=p;function e(o,u="github.com"){return`${o.protocol||"https"}://${o.host||u}`}function d(o){var u;return o.tagNamePrefix?o.tagNamePrefix:!((u=o.vPrefixedTagName)!==null&&u!==void 0)||u?"v":""}function p(o){const u=o.provider;if(u==="s3")return c(o);if(u==="spaces")return l(o);throw new Error(`Not supported provider: ${u}`)}function c(o){let u;if(o.accelerate==!0)u=`https://${o.bucket}.s3-accelerate.amazonaws.com`;else if(o.endpoint!=null)u=`${o.endpoint}/${o.bucket}`;else if(o.bucket.includes(".")){if(o.region==null)throw new Error(`Bucket name "${o.bucket}" includes a dot, but S3 region is missing`);o.region==="us-east-1"?u=`https://s3.amazonaws.com/${o.bucket}`:u=`https://s3-${o.region}.amazonaws.com/${o.bucket}`}else o.region==="cn-north-1"?u=`https://${o.bucket}.s3.${o.region}.amazonaws.com.cn`:u=`https://${o.bucket}.s3.amazonaws.com`;return f(u,o.path)}function f(o,u){return u!=null&&u.length>0&&(u.startsWith("/")||(o+="/"),o+=u),o}function l(o){if(o.name==null)throw new Error("name is missing");if(o.region==null)throw new Error("region is missing");return f(`https://${o.name}.${o.region}.digitaloceanspaces.com`,o.path)}return xt}var Lr={},ba;function ef(){if(ba)return Lr;ba=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.retry=d;const e=lo();async function d(p,c){var f;const{retries:l,interval:o,backoff:u=0,attempt:a=0,shouldRetry:s,cancellationToken:i=new e.CancellationToken}=c;try{return await p()}catch(r){if(await Promise.resolve((f=s==null?void 0:s(r))!==null&&f!==void 0?f:!0)&&l>0&&!i.cancelled)return await new Promise(n=>setTimeout(n,o+u*a)),await d(p,{...c,retries:l-1,attempt:a+1});throw r}}return Lr}var Ur={},Oa;function tf(){if(Oa)return Ur;Oa=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.parseDn=e;function e(d){let p=!1,c=null,f="",l=0;d=d.trim();const o=new Map;for(let u=0;u<=d.length;u++){if(u===d.length){c!==null&&o.set(c,f);break}const a=d[u];if(p){if(a==='"'){p=!1;continue}}else{if(a==='"'){p=!0;continue}if(a==="\\"){u++;const s=parseInt(d.slice(u,u+2),16);Number.isNaN(s)?f+=d[u]:(u++,f+=String.fromCharCode(s));continue}if(c===null&&a==="="){c=f,f="";continue}if(a===","||a===";"||a==="+"){c!==null&&o.set(c,f),c=null,f="";continue}}if(a===" "&&!p){if(f.length===0)continue;if(u>l){let s=u;for(;d[s]===" ";)s++;l=s}if(l>=d.length||d[l]===","||d[l]===";"||c===null&&d[l]==="="||c!==null&&d[l]==="+"){u=l-1;continue}}f+=a}return o}return Ur}var Ct={},Pa;function rf(){if(Pa)return Ct;Pa=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.nil=Ct.UUID=void 0;const e=Er,d=Wr(),p="options.name must be either a string or a Buffer",c=(0,e.randomBytes)(16);c[0]=c[0]|1;const f={},l=[];for(let r=0;r<256;r++){const n=(r+256).toString(16).substr(1);f[n]=r,l[r]=n}class o{constructor(n){this.ascii=null,this.binary=null;const h=o.check(n);if(!h)throw new Error("not a UUID");this.version=h.version,h.format==="ascii"?this.ascii=n:this.binary=n}static v5(n,h){return s(n,"sha1",80,h)}toString(){return this.ascii==null&&(this.ascii=i(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(n,h=0){if(typeof n=="string")return n=n.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(n)?n==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(f[n[14]+n[15]]&240)>>4,variant:u((f[n[19]+n[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(n)){if(n.length<h+16)return!1;let g=0;for(;g<16&&n[h+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(n[h+6]&240)>>4,variant:u((n[h+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(n){const h=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)h[y]=f[n[g++]+n[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return h}}Ct.UUID=o,o.OID=o.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function u(r){switch(r){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var a;(function(r){r[r.ASCII=0]="ASCII",r[r.BINARY=1]="BINARY",r[r.OBJECT=2]="OBJECT"})(a||(a={}));function s(r,n,h,g,y=a.ASCII){const m=(0,e.createHash)(n);if(typeof r!="string"&&!Buffer.isBuffer(r))throw(0,d.newError)(p,"ERR_INVALID_UUID_NAME");m.update(g),m.update(r);const S=m.digest();let O;switch(y){case a.BINARY:S[6]=S[6]&15|h,S[8]=S[8]&63|128,O=S;break;case a.OBJECT:S[6]=S[6]&15|h,S[8]=S[8]&63|128,O=new o(S);break;default:O=l[S[0]]+l[S[1]]+l[S[2]]+l[S[3]]+"-"+l[S[4]]+l[S[5]]+"-"+l[S[6]&15|h]+l[S[7]]+"-"+l[S[8]&63|128]+l[S[9]]+"-"+l[S[10]]+l[S[11]]+l[S[12]]+l[S[13]]+l[S[14]]+l[S[15]];break}return O}function i(r){return l[r[0]]+l[r[1]]+l[r[2]]+l[r[3]]+"-"+l[r[4]]+l[r[5]]+"-"+l[r[6]]+l[r[7]]+"-"+l[r[8]]+l[r[9]]+"-"+l[r[10]]+l[r[11]]+l[r[12]]+l[r[13]]+l[r[14]]+l[r[15]]}return Ct.nil=new o("00000000-0000-0000-0000-000000000000"),Ct}var Lt={},$n={},Ia;function nf(){return Ia||(Ia=1,function(e){(function(d){d.parser=function(_,E){return new c(_,E)},d.SAXParser=c,d.SAXStream=i,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var p=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(_,E){if(!(this instanceof c))return new c(_,E);var H=this;l(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=E||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!_,H.noscript=!!(_||H.opt.noscript),H.state=v.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!_),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),q(H,"onready")}Object.create||(Object.create=function(_){function E(){}E.prototype=_;var H=new E;return H}),Object.keys||(Object.keys=function(_){var E=[];for(var H in _)_.hasOwnProperty(H)&&E.push(H);return E});function f(_){for(var E=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,F=0,ce=p.length;F<ce;F++){var he=_[p[F]].length;if(he>E)switch(p[F]){case"textNode":$(_);break;case"cdata":L(_,"oncdata",_.cdata),_.cdata="";break;case"script":L(_,"onscript",_.script),_.script="";break;default:N(_,"Max buffer length exceeded: "+p[F])}H=Math.max(H,he)}var pe=d.MAX_BUFFER_LENGTH-H;_.bufferCheckPosition=pe+_.position}function l(_){for(var E=0,H=p.length;E<H;E++)_[p[E]]=""}function o(_){$(_),_.cdata!==""&&(L(_,"oncdata",_.cdata),_.cdata=""),_.script!==""&&(L(_,"onscript",_.script),_.script="")}c.prototype={end:function(){j(this)},write:ge,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var u;try{u=require("stream").Stream}catch{u=function(){}}u||(u=function(){});var a=d.EVENTS.filter(function(_){return _!=="error"&&_!=="end"});function s(_,E){return new i(_,E)}function i(_,E){if(!(this instanceof i))return new i(_,E);u.apply(this),this._parser=new c(_,E),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(F){H.emit("error",F),H._parser.error=null},this._decoder=null,a.forEach(function(F){Object.defineProperty(H,"on"+F,{get:function(){return H._parser["on"+F]},set:function(ce){if(!ce)return H.removeAllListeners(F),H._parser["on"+F]=ce,ce;H.on(F,ce)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(u.prototype,{constructor:{value:i}}),i.prototype.write=function(_){return typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(_)&&(this._decoder||(this._decoder=new TextDecoder("utf8")),_=this._decoder.decode(_,{stream:!0})),this._parser.write(_.toString()),this.emit("data",_),!0},i.prototype.end=function(_){if(_&&_.length&&this.write(_),this._decoder){var E=this._decoder.decode();E&&(this._parser.write(E),this.emit("data",E))}return this._parser.end(),!0},i.prototype.on=function(_,E){var H=this;return!H._parser["on"+_]&&a.indexOf(_)!==-1&&(H._parser["on"+_]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,_),H.emit.apply(H,F)}),u.prototype.on.call(H,_,E)};var r="[CDATA[",n="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:h,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(_){return _===" "||_===`
`||_==="\r"||_==="	"}function b(_){return _==='"'||_==="'"}function P(_){return _===">"||I(_)}function T(_,E){return _.test(E)}function R(_,E){return!T(_,E)}var v=0;d.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(_){var E=d.ENTITIES[_],H=typeof E=="number"?String.fromCharCode(E):E;d.ENTITIES[_]=H});for(var k in d.STATE)d.STATE[d.STATE[k]]=k;v=d.STATE;function q(_,E,H){_[E]&&_[E](H)}function L(_,E,H){_.textNode&&$(_),q(_,E,H)}function $(_){_.textNode=x(_.opt,_.textNode),_.textNode&&q(_,"ontext",_.textNode),_.textNode=""}function x(_,E){return _.trim&&(E=E.trim()),_.normalize&&(E=E.replace(/\s+/g," ")),E}function N(_,E){return $(_),_.trackPosition&&(E+=`
Line: `+_.line+`
Column: `+_.column+`
Char: `+_.c),E=new Error(E),_.error=E,q(_,"onerror",E),_}function j(_){return _.sawRoot&&!_.closedRoot&&D(_,"Unclosed root tag"),_.state!==v.BEGIN&&_.state!==v.BEGIN_WHITESPACE&&_.state!==v.TEXT&&N(_,"Unexpected end"),$(_),_.c="",_.closed=!0,q(_,"onend"),c.call(_,_.strict,_.opt),_}function D(_,E){if(typeof _!="object"||!(_ instanceof c))throw new Error("bad call to strictFail");_.strict&&N(_,E)}function G(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var E=_.tags[_.tags.length-1]||_,H=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(H.ns=E.ns),_.attribList.length=0,L(_,"onopentagstart",H)}function V(_,E){var H=_.indexOf(":"),F=H<0?["",_]:_.split(":"),ce=F[0],he=F[1];return E&&_==="xmlns"&&(ce="xmlns",he=""),{prefix:ce,local:he}}function te(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),_.attribList.indexOf(_.attribName)!==-1||_.tag.attributes.hasOwnProperty(_.attribName)){_.attribName=_.attribValue="";return}if(_.opt.xmlns){var E=V(_.attribName,!0),H=E.prefix,F=E.local;if(H==="xmlns")if(F==="xml"&&_.attribValue!==h)D(_,"xml: prefix must be bound to "+h+`
Actual: `+_.attribValue);else if(F==="xmlns"&&_.attribValue!==g)D(_,"xmlns: prefix must be bound to "+g+`
Actual: `+_.attribValue);else{var ce=_.tag,he=_.tags[_.tags.length-1]||_;ce.ns===he.ns&&(ce.ns=Object.create(he.ns)),ce.ns[F]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,L(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}function de(_,E){if(_.opt.xmlns){var H=_.tag,F=V(_.tagName);H.prefix=F.prefix,H.local=F.local,H.uri=H.ns[F.prefix]||"",H.prefix&&!H.uri&&(D(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),H.uri=F.prefix);var ce=_.tags[_.tags.length-1]||_;H.ns&&ce.ns!==H.ns&&Object.keys(H.ns).forEach(function(t){L(_,"onopennamespace",{prefix:t,uri:H.ns[t]})});for(var he=0,pe=_.attribList.length;he<pe;he++){var _e=_.attribList[he],Ee=_e[0],We=_e[1],Se=V(Ee,!0),Me=Se.prefix,ct=Se.local,ot=Me===""?"":H.ns[Me]||"",rt={name:Ee,value:We,prefix:Me,local:ct,uri:ot};Me&&Me!=="xmlns"&&!ot&&(D(_,"Unbound namespace prefix: "+JSON.stringify(Me)),rt.uri=Me),_.tag.attributes[Ee]=rt,L(_,"onattribute",rt)}_.attribList.length=0}_.tag.isSelfClosing=!!E,_.sawRoot=!0,_.tags.push(_.tag),L(_,"onopentag",_.tag),E||(!_.noscript&&_.tagName.toLowerCase()==="script"?_.state=v.SCRIPT:_.state=v.TEXT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function ie(_){if(!_.tagName){D(_,"Weird empty close tag."),_.textNode+="</>",_.state=v.TEXT;return}if(_.script){if(_.tagName!=="script"){_.script+="</"+_.tagName+">",_.tagName="",_.state=v.SCRIPT;return}L(_,"onscript",_.script),_.script=""}var E=_.tags.length,H=_.tagName;_.strict||(H=H[_.looseCase]());for(var F=H;E--;){var ce=_.tags[E];if(ce.name!==F)D(_,"Unexpected close tag");else break}if(E<0){D(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",_.state=v.TEXT;return}_.tagName=H;for(var he=_.tags.length;he-- >E;){var pe=_.tag=_.tags.pop();_.tagName=_.tag.name,L(_,"onclosetag",_.tagName);var _e={};for(var Ee in pe.ns)_e[Ee]=pe.ns[Ee];var We=_.tags[_.tags.length-1]||_;_.opt.xmlns&&pe.ns!==We.ns&&Object.keys(pe.ns).forEach(function(Se){var Me=pe.ns[Se];L(_,"onclosenamespace",{prefix:Se,uri:Me})})}E===0&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=v.TEXT}function we(_){var E=_.entity,H=E.toLowerCase(),F,ce="";return _.ENTITIES[E]?_.ENTITIES[E]:_.ENTITIES[H]?_.ENTITIES[H]:(E=H,E.charAt(0)==="#"&&(E.charAt(1)==="x"?(E=E.slice(2),F=parseInt(E,16),ce=F.toString(16)):(E=E.slice(1),F=parseInt(E,10),ce=F.toString(10))),E=E.replace(/^0+/,""),isNaN(F)||ce.toLowerCase()!==E||F<0||F>1114111?(D(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(F))}function ve(_,E){E==="<"?(_.state=v.OPEN_WAKA,_.startTagPosition=_.position):I(E)||(D(_,"Non-whitespace before first tag."),_.textNode=E,_.state=v.TEXT)}function Q(_,E){var H="";return E<_.length&&(H=_.charAt(E)),H}function ge(_){var E=this;if(this.error)throw this.error;if(E.closed)return N(E,"Cannot write after close. Assign an onready handler.");if(_===null)return j(E);typeof _=="object"&&(_=_.toString());for(var H=0,F="";F=Q(_,H++),E.c=F,!!F;)switch(E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++),E.state){case v.BEGIN:if(E.state=v.BEGIN_WHITESPACE,F==="\uFEFF")continue;ve(E,F);continue;case v.BEGIN_WHITESPACE:ve(E,F);continue;case v.TEXT:if(E.sawRoot&&!E.closedRoot){for(var he=H-1;F&&F!=="<"&&F!=="&";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.textNode+=_.substring(he,H-1)}F==="<"&&!(E.sawRoot&&E.closedRoot&&!E.strict)?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):(!I(F)&&(!E.sawRoot||E.closedRoot)&&D(E,"Text data outside of root node."),F==="&"?E.state=v.TEXT_ENTITY:E.textNode+=F);continue;case v.SCRIPT:F==="<"?E.state=v.SCRIPT_ENDING:E.script+=F;continue;case v.SCRIPT_ENDING:F==="/"?E.state=v.CLOSE_TAG:(E.script+="<"+F,E.state=v.SCRIPT);continue;case v.OPEN_WAKA:if(F==="!")E.state=v.SGML_DECL,E.sgmlDecl="";else if(!I(F))if(T(m,F))E.state=v.OPEN_TAG,E.tagName=F;else if(F==="/")E.state=v.CLOSE_TAG,E.tagName="";else if(F==="?")E.state=v.PROC_INST,E.procInstName=E.procInstBody="";else{if(D(E,"Unencoded <"),E.startTagPosition+1<E.position){var ce=E.position-E.startTagPosition;F=new Array(ce).join(" ")+F}E.textNode+="<"+F,E.state=v.TEXT}continue;case v.SGML_DECL:if(E.sgmlDecl+F==="--"){E.state=v.COMMENT,E.comment="",E.sgmlDecl="";continue}E.doctype&&E.doctype!==!0&&E.sgmlDecl?(E.state=v.DOCTYPE_DTD,E.doctype+="<!"+E.sgmlDecl+F,E.sgmlDecl=""):(E.sgmlDecl+F).toUpperCase()===r?(L(E,"onopencdata"),E.state=v.CDATA,E.sgmlDecl="",E.cdata=""):(E.sgmlDecl+F).toUpperCase()===n?(E.state=v.DOCTYPE,(E.doctype||E.sawRoot)&&D(E,"Inappropriately located doctype declaration"),E.doctype="",E.sgmlDecl=""):F===">"?(L(E,"onsgmldeclaration",E.sgmlDecl),E.sgmlDecl="",E.state=v.TEXT):(b(F)&&(E.state=v.SGML_DECL_QUOTED),E.sgmlDecl+=F);continue;case v.SGML_DECL_QUOTED:F===E.q&&(E.state=v.SGML_DECL,E.q=""),E.sgmlDecl+=F;continue;case v.DOCTYPE:F===">"?(E.state=v.TEXT,L(E,"ondoctype",E.doctype),E.doctype=!0):(E.doctype+=F,F==="["?E.state=v.DOCTYPE_DTD:b(F)&&(E.state=v.DOCTYPE_QUOTED,E.q=F));continue;case v.DOCTYPE_QUOTED:E.doctype+=F,F===E.q&&(E.q="",E.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:F==="]"?(E.doctype+=F,E.state=v.DOCTYPE):F==="<"?(E.state=v.OPEN_WAKA,E.startTagPosition=E.position):b(F)?(E.doctype+=F,E.state=v.DOCTYPE_DTD_QUOTED,E.q=F):E.doctype+=F;continue;case v.DOCTYPE_DTD_QUOTED:E.doctype+=F,F===E.q&&(E.state=v.DOCTYPE_DTD,E.q="");continue;case v.COMMENT:F==="-"?E.state=v.COMMENT_ENDING:E.comment+=F;continue;case v.COMMENT_ENDING:F==="-"?(E.state=v.COMMENT_ENDED,E.comment=x(E.opt,E.comment),E.comment&&L(E,"oncomment",E.comment),E.comment=""):(E.comment+="-"+F,E.state=v.COMMENT);continue;case v.COMMENT_ENDED:F!==">"?(D(E,"Malformed comment"),E.comment+="--"+F,E.state=v.COMMENT):E.doctype&&E.doctype!==!0?E.state=v.DOCTYPE_DTD:E.state=v.TEXT;continue;case v.CDATA:for(var he=H-1;F&&F!=="]";)F=Q(_,H++),F&&E.trackPosition&&(E.position++,F===`
`?(E.line++,E.column=0):E.column++);E.cdata+=_.substring(he,H-1),F==="]"&&(E.state=v.CDATA_ENDING);continue;case v.CDATA_ENDING:F==="]"?E.state=v.CDATA_ENDING_2:(E.cdata+="]"+F,E.state=v.CDATA);continue;case v.CDATA_ENDING_2:F===">"?(E.cdata&&L(E,"oncdata",E.cdata),L(E,"onclosecdata"),E.cdata="",E.state=v.TEXT):F==="]"?E.cdata+="]":(E.cdata+="]]"+F,E.state=v.CDATA);continue;case v.PROC_INST:F==="?"?E.state=v.PROC_INST_ENDING:I(F)?E.state=v.PROC_INST_BODY:E.procInstName+=F;continue;case v.PROC_INST_BODY:if(!E.procInstBody&&I(F))continue;F==="?"?E.state=v.PROC_INST_ENDING:E.procInstBody+=F;continue;case v.PROC_INST_ENDING:F===">"?(L(E,"onprocessinginstruction",{name:E.procInstName,body:E.procInstBody}),E.procInstName=E.procInstBody="",E.state=v.TEXT):(E.procInstBody+="?"+F,E.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:T(w,F)?E.tagName+=F:(G(E),F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:(I(F)||D(E,"Invalid character in tag name"),E.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:F===">"?(de(E,!0),ie(E)):(D(E,"Forward-slash in opening tag not followed by >"),E.state=v.ATTRIB);continue;case v.ATTRIB:if(I(F))continue;F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:T(m,F)?(E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME:F==="="?E.state=v.ATTRIB_VALUE:F===">"?(D(E,"Attribute without value"),E.attribValue=E.attribName,te(E),de(E)):I(F)?E.state=v.ATTRIB_NAME_SAW_WHITE:T(w,F)?E.attribName+=F:D(E,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if(F==="=")E.state=v.ATTRIB_VALUE;else{if(I(F))continue;D(E,"Attribute without value"),E.tag.attributes[E.attribName]="",E.attribValue="",L(E,"onattribute",{name:E.attribName,value:""}),E.attribName="",F===">"?de(E):T(m,F)?(E.attribName=F,E.state=v.ATTRIB_NAME):(D(E,"Invalid attribute name"),E.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(I(F))continue;b(F)?(E.q=F,E.state=v.ATTRIB_VALUE_QUOTED):(E.opt.unquotedAttributeValues||N(E,"Unquoted attribute value"),E.state=v.ATTRIB_VALUE_UNQUOTED,E.attribValue=F);continue;case v.ATTRIB_VALUE_QUOTED:if(F!==E.q){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_Q:E.attribValue+=F;continue}te(E),E.q="",E.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:I(F)?E.state=v.ATTRIB:F===">"?de(E):F==="/"?E.state=v.OPEN_TAG_SLASH:T(m,F)?(D(E,"No whitespace between attributes"),E.attribName=F,E.attribValue="",E.state=v.ATTRIB_NAME):D(E,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!P(F)){F==="&"?E.state=v.ATTRIB_VALUE_ENTITY_U:E.attribValue+=F;continue}te(E),F===">"?de(E):E.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(E.tagName)F===">"?ie(E):T(w,F)?E.tagName+=F:E.script?(E.script+="</"+E.tagName+F,E.tagName="",E.state=v.SCRIPT):(I(F)||D(E,"Invalid tagname in closing tag"),E.state=v.CLOSE_TAG_SAW_WHITE);else{if(I(F))continue;R(m,F)?E.script?(E.script+="</"+F,E.state=v.SCRIPT):D(E,"Invalid tagname in closing tag."):E.tagName=F}continue;case v.CLOSE_TAG_SAW_WHITE:if(I(F))continue;F===">"?ie(E):D(E,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(E.state){case v.TEXT_ENTITY:pe=v.TEXT,_e="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:pe=v.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:pe=v.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(F===";"){var Ee=we(E);E.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(Ee)?(E.entity="",E.state=pe,E.write(Ee)):(E[_e]+=Ee,E.entity="",E.state=pe)}else T(E.entity.length?O:S,F)?E.entity+=F:(D(E,"Invalid character in entity name"),E[_e]+="&"+E.entity+F,E.entity="",E.state=pe);continue;default:throw new Error(E,"Unknown state: "+E.state)}return E.position>=E.bufferCheckPosition&&f(E),E}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var _=String.fromCharCode,E=Math.floor,H=function(){var F=16384,ce=[],he,pe,_e=-1,Ee=arguments.length;if(!Ee)return"";for(var We="";++_e<Ee;){var Se=Number(arguments[_e]);if(!isFinite(Se)||Se<0||Se>1114111||E(Se)!==Se)throw RangeError("Invalid code point: "+Se);Se<=65535?ce.push(Se):(Se-=65536,he=(Se>>10)+55296,pe=Se%1024+56320,ce.push(he,pe)),(_e+1===Ee||ce.length>F)&&(We+=_.apply(null,ce),ce.length=0)}return We};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H}()})(e)}($n)),$n}var Da;function of(){if(Da)return Lt;Da=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.XElement=void 0,Lt.parseXml=o;const e=nf(),d=Wr();class p{constructor(a){if(this.name=a,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!a)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!f(a))throw(0,d.newError)(`Invalid element name: ${a}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(a){const s=this.attributes===null?null:this.attributes[a];if(s==null)throw(0,d.newError)(`No attribute "${a}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(a){this.attributes!==null&&delete this.attributes[a]}element(a,s=!1,i=null){const r=this.elementOrNull(a,s);if(r===null)throw(0,d.newError)(i||`No element "${a}"`,"ERR_XML_MISSED_ELEMENT");return r}elementOrNull(a,s=!1){if(this.elements===null)return null;for(const i of this.elements)if(l(i,a,s))return i;return null}getElements(a,s=!1){return this.elements===null?[]:this.elements.filter(i=>l(i,a,s))}elementValueOrEmpty(a,s=!1){const i=this.elementOrNull(a,s);return i===null?"":i.value}}Lt.XElement=p;const c=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function f(u){return c.test(u)}function l(u,a,s){const i=u.name;return i===a||s===!0&&i.length===a.length&&i.toLowerCase()===a.toLowerCase()}function o(u){let a=null;const s=e.parser(!0,{}),i=[];return s.onopentag=r=>{const n=new p(r.name);if(n.attributes=r.attributes,a===null)a=n;else{const h=i[i.length-1];h.elements==null&&(h.elements=[]),h.elements.push(n)}i.push(n)},s.onclosetag=()=>{i.pop()},s.ontext=r=>{i.length>0&&(i[i.length-1].value=r)},s.oncdata=r=>{const n=i[i.length-1];n.value=r,n.isCData=!0},s.onerror=r=>{throw r},s.write(u),a}return Lt}var Na;function Le(){return Na||(Na=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.UUID=e.parseDn=e.retry=e.githubTagPrefix=e.githubUrl=e.getS3LikeProviderBaseUrl=e.ProgressCallbackTransform=e.MemoLazy=e.safeStringifyJson=e.safeGetHeader=e.parseJson=e.HttpExecutor=e.HttpError=e.DigestTransform=e.createHttpError=e.configureRequestUrl=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.newError=e.CancellationToken=e.CancellationError=void 0,e.asArray=r;var d=lo();Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var p=Wr();Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return p.newError}});var c=Kc();Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return c.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return c.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return c.configureRequestUrl}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return c.createHttpError}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return c.DigestTransform}}),Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return c.HttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return c.HttpExecutor}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return c.parseJson}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return c.safeGetHeader}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return c.safeStringifyJson}});var f=Qc();Object.defineProperty(e,"MemoLazy",{enumerable:!0,get:function(){return f.MemoLazy}});var l=Wl();Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return l.ProgressCallbackTransform}});var o=Zc();Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return o.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return o.githubUrl}}),Object.defineProperty(e,"githubTagPrefix",{enumerable:!0,get:function(){return o.githubTagPrefix}});var u=ef();Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return u.retry}});var a=tf();Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return a.parseDn}});var s=rf();Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return s.UUID}});var i=of();Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return i.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return i.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function r(n){return n==null?[]:Array.isArray(n)?n:[n]}}(xn)),xn}var $e={},kr={},pt={},Fa;function yr(){if(Fa)return pt;Fa=1;function e(o){return typeof o>"u"||o===null}function d(o){return typeof o=="object"&&o!==null}function p(o){return Array.isArray(o)?o:e(o)?[]:[o]}function c(o,u){var a,s,i,r;if(u)for(r=Object.keys(u),a=0,s=r.length;a<s;a+=1)i=r[a],o[i]=u[i];return o}function f(o,u){var a="",s;for(s=0;s<u;s+=1)a+=o;return a}function l(o){return o===0&&Number.NEGATIVE_INFINITY===1/o}return pt.isNothing=e,pt.isObject=d,pt.toArray=p,pt.repeat=f,pt.isNegativeZero=l,pt.extend=c,pt}var Mn,xa;function wr(){if(xa)return Mn;xa=1;function e(p,c){var f="",l=p.reason||"(unknown reason)";return p.mark?(p.mark.name&&(f+='in "'+p.mark.name+'" '),f+="("+(p.mark.line+1)+":"+(p.mark.column+1)+")",!c&&p.mark.snippet&&(f+=`

`+p.mark.snippet),l+" "+f):l}function d(p,c){Error.call(this),this.name="YAMLException",this.reason=p,this.mark=c,this.message=e(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(c){return this.name+": "+e(this,c)},Mn=d,Mn}var Bn,La;function af(){if(La)return Bn;La=1;var e=yr();function d(f,l,o,u,a){var s="",i="",r=Math.floor(a/2)-1;return u-l>r&&(s=" ... ",l=u-r+s.length),o-u>r&&(i=" ...",o=u+r-i.length),{str:s+f.slice(l,o).replace(/\t/g,"")+i,pos:u-l+s.length}}function p(f,l){return e.repeat(" ",l-f.length)+f}function c(f,l){if(l=Object.create(l||null),!f.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var o=/\r?\n|\r|\0/g,u=[0],a=[],s,i=-1;s=o.exec(f.buffer);)a.push(s.index),u.push(s.index+s[0].length),f.position<=s.index&&i<0&&(i=u.length-2);i<0&&(i=u.length-1);var r="",n,h,g=Math.min(f.line+l.linesAfter,a.length).toString().length,y=l.maxLength-(l.indent+g+3);for(n=1;n<=l.linesBefore&&!(i-n<0);n++)h=d(f.buffer,u[i-n],a[i-n],f.position-(u[i]-u[i-n]),y),r=e.repeat(" ",l.indent)+p((f.line-n+1).toString(),g)+" | "+h.str+`
`+r;for(h=d(f.buffer,u[i],a[i],f.position,y),r+=e.repeat(" ",l.indent)+p((f.line+1).toString(),g)+" | "+h.str+`
`,r+=e.repeat("-",l.indent+g+3+h.pos)+`^
`,n=1;n<=l.linesAfter&&!(i+n>=a.length);n++)h=d(f.buffer,u[i+n],a[i+n],f.position-(u[i]-u[i+n]),y),r+=e.repeat(" ",l.indent)+p((f.line+n+1).toString(),g)+" | "+h.str+`
`;return r.replace(/\n$/,"")}return Bn=c,Bn}var Hn,Ua;function je(){if(Ua)return Hn;Ua=1;var e=wr(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],p=["scalar","sequence","mapping"];function c(l){var o={};return l!==null&&Object.keys(l).forEach(function(u){l[u].forEach(function(a){o[String(a)]=u})}),o}function f(l,o){if(o=o||{},Object.keys(o).forEach(function(u){if(d.indexOf(u)===-1)throw new e('Unknown option "'+u+'" is met in definition of "'+l+'" YAML type.')}),this.options=o,this.tag=l,this.kind=o.kind||null,this.resolve=o.resolve||function(){return!0},this.construct=o.construct||function(u){return u},this.instanceOf=o.instanceOf||null,this.predicate=o.predicate||null,this.represent=o.represent||null,this.representName=o.representName||null,this.defaultStyle=o.defaultStyle||null,this.multi=o.multi||!1,this.styleAliases=c(o.styleAliases||null),p.indexOf(this.kind)===-1)throw new e('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}return Hn=f,Hn}var jn,ka;function Vl(){if(ka)return jn;ka=1;var e=wr(),d=je();function p(l,o){var u=[];return l[o].forEach(function(a){var s=u.length;u.forEach(function(i,r){i.tag===a.tag&&i.kind===a.kind&&i.multi===a.multi&&(s=r)}),u[s]=a}),u}function c(){var l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},o,u;function a(s){s.multi?(l.multi[s.kind].push(s),l.multi.fallback.push(s)):l[s.kind][s.tag]=l.fallback[s.tag]=s}for(o=0,u=arguments.length;o<u;o+=1)arguments[o].forEach(a);return l}function f(l){return this.extend(l)}return f.prototype.extend=function(o){var u=[],a=[];if(o instanceof d)a.push(o);else if(Array.isArray(o))a=a.concat(o);else if(o&&(Array.isArray(o.implicit)||Array.isArray(o.explicit)))o.implicit&&(u=u.concat(o.implicit)),o.explicit&&(a=a.concat(o.explicit));else throw new e("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");u.forEach(function(i){if(!(i instanceof d))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new e("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new e("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(i){if(!(i instanceof d))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(f.prototype);return s.implicit=(this.implicit||[]).concat(u),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=p(s,"implicit"),s.compiledExplicit=p(s,"explicit"),s.compiledTypeMap=c(s.compiledImplicit,s.compiledExplicit),s},jn=f,jn}var Gn,qa;function Yl(){if(qa)return Gn;qa=1;var e=je();return Gn=new e("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),Gn}var Wn,$a;function zl(){if($a)return Wn;$a=1;var e=je();return Wn=new e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),Wn}var Vn,Ma;function Xl(){if(Ma)return Vn;Ma=1;var e=je();return Vn=new e("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),Vn}var Yn,Ba;function Jl(){if(Ba)return Yn;Ba=1;var e=Vl();return Yn=new e({explicit:[Yl(),zl(),Xl()]}),Yn}var zn,Ha;function Kl(){if(Ha)return zn;Ha=1;var e=je();function d(f){if(f===null)return!0;var l=f.length;return l===1&&f==="~"||l===4&&(f==="null"||f==="Null"||f==="NULL")}function p(){return null}function c(f){return f===null}return zn=new e("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:p,predicate:c,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),zn}var Xn,ja;function Ql(){if(ja)return Xn;ja=1;var e=je();function d(f){if(f===null)return!1;var l=f.length;return l===4&&(f==="true"||f==="True"||f==="TRUE")||l===5&&(f==="false"||f==="False"||f==="FALSE")}function p(f){return f==="true"||f==="True"||f==="TRUE"}function c(f){return Object.prototype.toString.call(f)==="[object Boolean]"}return Xn=new e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:p,predicate:c,represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"}),Xn}var Jn,Ga;function Zl(){if(Ga)return Jn;Ga=1;var e=yr(),d=je();function p(a){return 48<=a&&a<=57||65<=a&&a<=70||97<=a&&a<=102}function c(a){return 48<=a&&a<=55}function f(a){return 48<=a&&a<=57}function l(a){if(a===null)return!1;var s=a.length,i=0,r=!1,n;if(!s)return!1;if(n=a[i],(n==="-"||n==="+")&&(n=a[++i]),n==="0"){if(i+1===s)return!0;if(n=a[++i],n==="b"){for(i++;i<s;i++)if(n=a[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<s;i++)if(n=a[i],n!=="_"){if(!p(a.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<s;i++)if(n=a[i],n!=="_"){if(!c(a.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<s;i++)if(n=a[i],n!=="_"){if(!f(a.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function o(a){var s=a,i=1,r;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),r=s[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),s=s.slice(1),r=s[0]),s==="0")return 0;if(r==="0"){if(s[1]==="b")return i*parseInt(s.slice(2),2);if(s[1]==="x")return i*parseInt(s.slice(2),16);if(s[1]==="o")return i*parseInt(s.slice(2),8)}return i*parseInt(s,10)}function u(a){return Object.prototype.toString.call(a)==="[object Number]"&&a%1===0&&!e.isNegativeZero(a)}return Jn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:l,construct:o,predicate:u,represent:{binary:function(a){return a>=0?"0b"+a.toString(2):"-0b"+a.toString(2).slice(1)},octal:function(a){return a>=0?"0o"+a.toString(8):"-0o"+a.toString(8).slice(1)},decimal:function(a){return a.toString(10)},hexadecimal:function(a){return a>=0?"0x"+a.toString(16).toUpperCase():"-0x"+a.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Jn}var Kn,Wa;function eu(){if(Wa)return Kn;Wa=1;var e=yr(),d=je(),p=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function c(a){return!(a===null||!p.test(a)||a[a.length-1]==="_")}function f(a){var s,i;return s=a.replace(/_/g,"").toLowerCase(),i=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:i*parseFloat(s,10)}var l=/^[-+]?[0-9]+e/;function o(a,s){var i;if(isNaN(a))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===a)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===a)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(e.isNegativeZero(a))return"-0.0";return i=a.toString(10),l.test(i)?i.replace("e",".e"):i}function u(a){return Object.prototype.toString.call(a)==="[object Number]"&&(a%1!==0||e.isNegativeZero(a))}return Kn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:c,construct:f,predicate:u,represent:o,defaultStyle:"lowercase"}),Kn}var Qn,Va;function tu(){return Va||(Va=1,Qn=Jl().extend({implicit:[Kl(),Ql(),Zl(),eu()]})),Qn}var Zn,Ya;function ru(){return Ya||(Ya=1,Zn=tu()),Zn}var ei,za;function nu(){if(za)return ei;za=1;var e=je(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),p=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function c(o){return o===null?!1:d.exec(o)!==null||p.exec(o)!==null}function f(o){var u,a,s,i,r,n,h,g=0,y=null,m,w,S;if(u=d.exec(o),u===null&&(u=p.exec(o)),u===null)throw new Error("Date resolve error");if(a=+u[1],s=+u[2]-1,i=+u[3],!u[4])return new Date(Date.UTC(a,s,i));if(r=+u[4],n=+u[5],h=+u[6],u[7]){for(g=u[7].slice(0,3);g.length<3;)g+="0";g=+g}return u[9]&&(m=+u[10],w=+(u[11]||0),y=(m*60+w)*6e4,u[9]==="-"&&(y=-y)),S=new Date(Date.UTC(a,s,i,r,n,h,g)),y&&S.setTime(S.getTime()-y),S}function l(o){return o.toISOString()}return ei=new e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:c,construct:f,instanceOf:Date,represent:l}),ei}var ti,Xa;function iu(){if(Xa)return ti;Xa=1;var e=je();function d(p){return p==="<<"||p===null}return ti=new e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),ti}var ri,Ja;function ou(){if(Ja)return ri;Ja=1;var e=je(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function p(o){if(o===null)return!1;var u,a,s=0,i=o.length,r=d;for(a=0;a<i;a++)if(u=r.indexOf(o.charAt(a)),!(u>64)){if(u<0)return!1;s+=6}return s%8===0}function c(o){var u,a,s=o.replace(/[\r\n=]/g,""),i=s.length,r=d,n=0,h=[];for(u=0;u<i;u++)u%4===0&&u&&(h.push(n>>16&255),h.push(n>>8&255),h.push(n&255)),n=n<<6|r.indexOf(s.charAt(u));return a=i%4*6,a===0?(h.push(n>>16&255),h.push(n>>8&255),h.push(n&255)):a===18?(h.push(n>>10&255),h.push(n>>2&255)):a===12&&h.push(n>>4&255),new Uint8Array(h)}function f(o){var u="",a=0,s,i,r=o.length,n=d;for(s=0;s<r;s++)s%3===0&&s&&(u+=n[a>>18&63],u+=n[a>>12&63],u+=n[a>>6&63],u+=n[a&63]),a=(a<<8)+o[s];return i=r%3,i===0?(u+=n[a>>18&63],u+=n[a>>12&63],u+=n[a>>6&63],u+=n[a&63]):i===2?(u+=n[a>>10&63],u+=n[a>>4&63],u+=n[a<<2&63],u+=n[64]):i===1&&(u+=n[a>>2&63],u+=n[a<<4&63],u+=n[64],u+=n[64]),u}function l(o){return Object.prototype.toString.call(o)==="[object Uint8Array]"}return ri=new e("tag:yaml.org,2002:binary",{kind:"scalar",resolve:p,construct:c,predicate:l,represent:f}),ri}var ni,Ka;function au(){if(Ka)return ni;Ka=1;var e=je(),d=Object.prototype.hasOwnProperty,p=Object.prototype.toString;function c(l){if(l===null)return!0;var o=[],u,a,s,i,r,n=l;for(u=0,a=n.length;u<a;u+=1){if(s=n[u],r=!1,p.call(s)!=="[object Object]")return!1;for(i in s)if(d.call(s,i))if(!r)r=!0;else return!1;if(!r)return!1;if(o.indexOf(i)===-1)o.push(i);else return!1}return!0}function f(l){return l!==null?l:[]}return ni=new e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:c,construct:f}),ni}var ii,Qa;function su(){if(Qa)return ii;Qa=1;var e=je(),d=Object.prototype.toString;function p(f){if(f===null)return!0;var l,o,u,a,s,i=f;for(s=new Array(i.length),l=0,o=i.length;l<o;l+=1){if(u=i[l],d.call(u)!=="[object Object]"||(a=Object.keys(u),a.length!==1))return!1;s[l]=[a[0],u[a[0]]]}return!0}function c(f){if(f===null)return[];var l,o,u,a,s,i=f;for(s=new Array(i.length),l=0,o=i.length;l<o;l+=1)u=i[l],a=Object.keys(u),s[l]=[a[0],u[a[0]]];return s}return ii=new e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:p,construct:c}),ii}var oi,Za;function lu(){if(Za)return oi;Za=1;var e=je(),d=Object.prototype.hasOwnProperty;function p(f){if(f===null)return!0;var l,o=f;for(l in o)if(d.call(o,l)&&o[l]!==null)return!1;return!0}function c(f){return f!==null?f:{}}return oi=new e("tag:yaml.org,2002:set",{kind:"mapping",resolve:p,construct:c}),oi}var ai,es;function uo(){return es||(es=1,ai=ru().extend({implicit:[nu(),iu()],explicit:[ou(),au(),su(),lu()]})),ai}var ts;function sf(){if(ts)return kr;ts=1;var e=yr(),d=wr(),p=af(),c=uo(),f=Object.prototype.hasOwnProperty,l=1,o=2,u=3,a=4,s=1,i=2,r=3,n=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(t){return Object.prototype.toString.call(t)}function S(t){return t===10||t===13}function O(t){return t===9||t===32}function I(t){return t===9||t===32||t===10||t===13}function b(t){return t===44||t===91||t===93||t===123||t===125}function P(t){var B;return 48<=t&&t<=57?t-48:(B=t|32,97<=B&&B<=102?B-97+10:-1)}function T(t){return t===120?2:t===117?4:t===85?8:0}function R(t){return 48<=t&&t<=57?t-48:-1}function v(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function k(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function q(t,B,W){B==="__proto__"?Object.defineProperty(t,B,{configurable:!0,enumerable:!0,writable:!0,value:W}):t[B]=W}for(var L=new Array(256),$=new Array(256),x=0;x<256;x++)L[x]=v(x)?1:0,$[x]=v(x);function N(t,B){this.input=t,this.filename=B.filename||null,this.schema=B.schema||c,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function j(t,B){var W={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return W.snippet=p(W),new d(B,W)}function D(t,B){throw j(t,B)}function G(t,B){t.onWarning&&t.onWarning.call(null,j(t,B))}var V={YAML:function(B,W,ne){var Y,re,Z;B.version!==null&&D(B,"duplication of %YAML directive"),ne.length!==1&&D(B,"YAML directive accepts exactly one argument"),Y=/^([0-9]+)\.([0-9]+)$/.exec(ne[0]),Y===null&&D(B,"ill-formed argument of the YAML directive"),re=parseInt(Y[1],10),Z=parseInt(Y[2],10),re!==1&&D(B,"unacceptable YAML version of the document"),B.version=ne[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&G(B,"unsupported YAML version of the document")},TAG:function(B,W,ne){var Y,re;ne.length!==2&&D(B,"TAG directive accepts exactly two arguments"),Y=ne[0],re=ne[1],y.test(Y)||D(B,"ill-formed tag handle (first argument) of the TAG directive"),f.call(B.tagMap,Y)&&D(B,'there is a previously declared suffix for "'+Y+'" tag handle'),m.test(re)||D(B,"ill-formed tag prefix (second argument) of the TAG directive");try{re=decodeURIComponent(re)}catch{D(B,"tag prefix is malformed: "+re)}B.tagMap[Y]=re}};function te(t,B,W,ne){var Y,re,Z,ae;if(B<W){if(ae=t.input.slice(B,W),ne)for(Y=0,re=ae.length;Y<re;Y+=1)Z=ae.charCodeAt(Y),Z===9||32<=Z&&Z<=1114111||D(t,"expected valid JSON character");else n.test(ae)&&D(t,"the stream contains non-printable characters");t.result+=ae}}function de(t,B,W,ne){var Y,re,Z,ae;for(e.isObject(W)||D(t,"cannot merge mappings; the provided source object is unacceptable"),Y=Object.keys(W),Z=0,ae=Y.length;Z<ae;Z+=1)re=Y[Z],f.call(B,re)||(q(B,re,W[re]),ne[re]=!0)}function ie(t,B,W,ne,Y,re,Z,ae,ue){var Te,Ce;if(Array.isArray(Y))for(Y=Array.prototype.slice.call(Y),Te=0,Ce=Y.length;Te<Ce;Te+=1)Array.isArray(Y[Te])&&D(t,"nested arrays are not supported inside keys"),typeof Y=="object"&&w(Y[Te])==="[object Object]"&&(Y[Te]="[object Object]");if(typeof Y=="object"&&w(Y)==="[object Object]"&&(Y="[object Object]"),Y=String(Y),B===null&&(B={}),ne==="tag:yaml.org,2002:merge")if(Array.isArray(re))for(Te=0,Ce=re.length;Te<Ce;Te+=1)de(t,B,re[Te],W);else de(t,B,re,W);else!t.json&&!f.call(W,Y)&&f.call(B,Y)&&(t.line=Z||t.line,t.lineStart=ae||t.lineStart,t.position=ue||t.position,D(t,"duplicated mapping key")),q(B,Y,re),delete W[Y];return B}function we(t){var B;B=t.input.charCodeAt(t.position),B===10?t.position++:B===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):D(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ve(t,B,W){for(var ne=0,Y=t.input.charCodeAt(t.position);Y!==0;){for(;O(Y);)Y===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),Y=t.input.charCodeAt(++t.position);if(B&&Y===35)do Y=t.input.charCodeAt(++t.position);while(Y!==10&&Y!==13&&Y!==0);if(S(Y))for(we(t),Y=t.input.charCodeAt(t.position),ne++,t.lineIndent=0;Y===32;)t.lineIndent++,Y=t.input.charCodeAt(++t.position);else break}return W!==-1&&ne!==0&&t.lineIndent<W&&G(t,"deficient indentation"),ne}function Q(t){var B=t.position,W;return W=t.input.charCodeAt(B),!!((W===45||W===46)&&W===t.input.charCodeAt(B+1)&&W===t.input.charCodeAt(B+2)&&(B+=3,W=t.input.charCodeAt(B),W===0||I(W)))}function ge(t,B){B===1?t.result+=" ":B>1&&(t.result+=e.repeat(`
`,B-1))}function _(t,B,W){var ne,Y,re,Z,ae,ue,Te,Ce,me=t.kind,A=t.result,M;if(M=t.input.charCodeAt(t.position),I(M)||b(M)||M===35||M===38||M===42||M===33||M===124||M===62||M===39||M===34||M===37||M===64||M===96||(M===63||M===45)&&(Y=t.input.charCodeAt(t.position+1),I(Y)||W&&b(Y)))return!1;for(t.kind="scalar",t.result="",re=Z=t.position,ae=!1;M!==0;){if(M===58){if(Y=t.input.charCodeAt(t.position+1),I(Y)||W&&b(Y))break}else if(M===35){if(ne=t.input.charCodeAt(t.position-1),I(ne))break}else{if(t.position===t.lineStart&&Q(t)||W&&b(M))break;if(S(M))if(ue=t.line,Te=t.lineStart,Ce=t.lineIndent,ve(t,!1,-1),t.lineIndent>=B){ae=!0,M=t.input.charCodeAt(t.position);continue}else{t.position=Z,t.line=ue,t.lineStart=Te,t.lineIndent=Ce;break}}ae&&(te(t,re,Z,!1),ge(t,t.line-ue),re=Z=t.position,ae=!1),O(M)||(Z=t.position+1),M=t.input.charCodeAt(++t.position)}return te(t,re,Z,!1),t.result?!0:(t.kind=me,t.result=A,!1)}function E(t,B){var W,ne,Y;if(W=t.input.charCodeAt(t.position),W!==39)return!1;for(t.kind="scalar",t.result="",t.position++,ne=Y=t.position;(W=t.input.charCodeAt(t.position))!==0;)if(W===39)if(te(t,ne,t.position,!0),W=t.input.charCodeAt(++t.position),W===39)ne=t.position,t.position++,Y=t.position;else return!0;else S(W)?(te(t,ne,Y,!0),ge(t,ve(t,!1,B)),ne=Y=t.position):t.position===t.lineStart&&Q(t)?D(t,"unexpected end of the document within a single quoted scalar"):(t.position++,Y=t.position);D(t,"unexpected end of the stream within a single quoted scalar")}function H(t,B){var W,ne,Y,re,Z,ae;if(ae=t.input.charCodeAt(t.position),ae!==34)return!1;for(t.kind="scalar",t.result="",t.position++,W=ne=t.position;(ae=t.input.charCodeAt(t.position))!==0;){if(ae===34)return te(t,W,t.position,!0),t.position++,!0;if(ae===92){if(te(t,W,t.position,!0),ae=t.input.charCodeAt(++t.position),S(ae))ve(t,!1,B);else if(ae<256&&L[ae])t.result+=$[ae],t.position++;else if((Z=T(ae))>0){for(Y=Z,re=0;Y>0;Y--)ae=t.input.charCodeAt(++t.position),(Z=P(ae))>=0?re=(re<<4)+Z:D(t,"expected hexadecimal character");t.result+=k(re),t.position++}else D(t,"unknown escape sequence");W=ne=t.position}else S(ae)?(te(t,W,ne,!0),ge(t,ve(t,!1,B)),W=ne=t.position):t.position===t.lineStart&&Q(t)?D(t,"unexpected end of the document within a double quoted scalar"):(t.position++,ne=t.position)}D(t,"unexpected end of the stream within a double quoted scalar")}function F(t,B){var W=!0,ne,Y,re,Z=t.tag,ae,ue=t.anchor,Te,Ce,me,A,M,z=Object.create(null),X,J,oe,ee;if(ee=t.input.charCodeAt(t.position),ee===91)Ce=93,M=!1,ae=[];else if(ee===123)Ce=125,M=!0,ae={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=ae),ee=t.input.charCodeAt(++t.position);ee!==0;){if(ve(t,!0,B),ee=t.input.charCodeAt(t.position),ee===Ce)return t.position++,t.tag=Z,t.anchor=ue,t.kind=M?"mapping":"sequence",t.result=ae,!0;W?ee===44&&D(t,"expected the node content, but found ','"):D(t,"missed comma between flow collection entries"),J=X=oe=null,me=A=!1,ee===63&&(Te=t.input.charCodeAt(t.position+1),I(Te)&&(me=A=!0,t.position++,ve(t,!0,B))),ne=t.line,Y=t.lineStart,re=t.position,Se(t,B,l,!1,!0),J=t.tag,X=t.result,ve(t,!0,B),ee=t.input.charCodeAt(t.position),(A||t.line===ne)&&ee===58&&(me=!0,ee=t.input.charCodeAt(++t.position),ve(t,!0,B),Se(t,B,l,!1,!0),oe=t.result),M?ie(t,ae,z,J,X,oe,ne,Y,re):me?ae.push(ie(t,null,z,J,X,oe,ne,Y,re)):ae.push(X),ve(t,!0,B),ee=t.input.charCodeAt(t.position),ee===44?(W=!0,ee=t.input.charCodeAt(++t.position)):W=!1}D(t,"unexpected end of the stream within a flow collection")}function ce(t,B){var W,ne,Y=s,re=!1,Z=!1,ae=B,ue=0,Te=!1,Ce,me;if(me=t.input.charCodeAt(t.position),me===124)ne=!1;else if(me===62)ne=!0;else return!1;for(t.kind="scalar",t.result="";me!==0;)if(me=t.input.charCodeAt(++t.position),me===43||me===45)s===Y?Y=me===43?r:i:D(t,"repeat of a chomping mode identifier");else if((Ce=R(me))>=0)Ce===0?D(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?D(t,"repeat of an indentation width identifier"):(ae=B+Ce-1,Z=!0);else break;if(O(me)){do me=t.input.charCodeAt(++t.position);while(O(me));if(me===35)do me=t.input.charCodeAt(++t.position);while(!S(me)&&me!==0)}for(;me!==0;){for(we(t),t.lineIndent=0,me=t.input.charCodeAt(t.position);(!Z||t.lineIndent<ae)&&me===32;)t.lineIndent++,me=t.input.charCodeAt(++t.position);if(!Z&&t.lineIndent>ae&&(ae=t.lineIndent),S(me)){ue++;continue}if(t.lineIndent<ae){Y===r?t.result+=e.repeat(`
`,re?1+ue:ue):Y===s&&re&&(t.result+=`
`);break}for(ne?O(me)?(Te=!0,t.result+=e.repeat(`
`,re?1+ue:ue)):Te?(Te=!1,t.result+=e.repeat(`
`,ue+1)):ue===0?re&&(t.result+=" "):t.result+=e.repeat(`
`,ue):t.result+=e.repeat(`
`,re?1+ue:ue),re=!0,Z=!0,ue=0,W=t.position;!S(me)&&me!==0;)me=t.input.charCodeAt(++t.position);te(t,W,t.position,!1)}return!0}function he(t,B){var W,ne=t.tag,Y=t.anchor,re=[],Z,ae=!1,ue;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=re),ue=t.input.charCodeAt(t.position);ue!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,D(t,"tab characters must not be used in indentation")),!(ue!==45||(Z=t.input.charCodeAt(t.position+1),!I(Z))));){if(ae=!0,t.position++,ve(t,!0,-1)&&t.lineIndent<=B){re.push(null),ue=t.input.charCodeAt(t.position);continue}if(W=t.line,Se(t,B,u,!1,!0),re.push(t.result),ve(t,!0,-1),ue=t.input.charCodeAt(t.position),(t.line===W||t.lineIndent>B)&&ue!==0)D(t,"bad indentation of a sequence entry");else if(t.lineIndent<B)break}return ae?(t.tag=ne,t.anchor=Y,t.kind="sequence",t.result=re,!0):!1}function pe(t,B,W){var ne,Y,re,Z,ae,ue,Te=t.tag,Ce=t.anchor,me={},A=Object.create(null),M=null,z=null,X=null,J=!1,oe=!1,ee;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=me),ee=t.input.charCodeAt(t.position);ee!==0;){if(!J&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,D(t,"tab characters must not be used in indentation")),ne=t.input.charCodeAt(t.position+1),re=t.line,(ee===63||ee===58)&&I(ne))ee===63?(J&&(ie(t,me,A,M,z,null,Z,ae,ue),M=z=X=null),oe=!0,J=!0,Y=!0):J?(J=!1,Y=!0):D(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,ee=ne;else{if(Z=t.line,ae=t.lineStart,ue=t.position,!Se(t,W,o,!1,!0))break;if(t.line===re){for(ee=t.input.charCodeAt(t.position);O(ee);)ee=t.input.charCodeAt(++t.position);if(ee===58)ee=t.input.charCodeAt(++t.position),I(ee)||D(t,"a whitespace character is expected after the key-value separator within a block mapping"),J&&(ie(t,me,A,M,z,null,Z,ae,ue),M=z=X=null),oe=!0,J=!1,Y=!1,M=t.tag,z=t.result;else if(oe)D(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=Te,t.anchor=Ce,!0}else if(oe)D(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=Te,t.anchor=Ce,!0}if((t.line===re||t.lineIndent>B)&&(J&&(Z=t.line,ae=t.lineStart,ue=t.position),Se(t,B,a,!0,Y)&&(J?z=t.result:X=t.result),J||(ie(t,me,A,M,z,X,Z,ae,ue),M=z=X=null),ve(t,!0,-1),ee=t.input.charCodeAt(t.position)),(t.line===re||t.lineIndent>B)&&ee!==0)D(t,"bad indentation of a mapping entry");else if(t.lineIndent<B)break}return J&&ie(t,me,A,M,z,null,Z,ae,ue),oe&&(t.tag=Te,t.anchor=Ce,t.kind="mapping",t.result=me),oe}function _e(t){var B,W=!1,ne=!1,Y,re,Z;if(Z=t.input.charCodeAt(t.position),Z!==33)return!1;if(t.tag!==null&&D(t,"duplication of a tag property"),Z=t.input.charCodeAt(++t.position),Z===60?(W=!0,Z=t.input.charCodeAt(++t.position)):Z===33?(ne=!0,Y="!!",Z=t.input.charCodeAt(++t.position)):Y="!",B=t.position,W){do Z=t.input.charCodeAt(++t.position);while(Z!==0&&Z!==62);t.position<t.length?(re=t.input.slice(B,t.position),Z=t.input.charCodeAt(++t.position)):D(t,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(ne?D(t,"tag suffix cannot contain exclamation marks"):(Y=t.input.slice(B-1,t.position+1),y.test(Y)||D(t,"named tag handle cannot contain such characters"),ne=!0,B=t.position+1)),Z=t.input.charCodeAt(++t.position);re=t.input.slice(B,t.position),g.test(re)&&D(t,"tag suffix cannot contain flow indicator characters")}re&&!m.test(re)&&D(t,"tag name cannot contain such characters: "+re);try{re=decodeURIComponent(re)}catch{D(t,"tag name is malformed: "+re)}return W?t.tag=re:f.call(t.tagMap,Y)?t.tag=t.tagMap[Y]+re:Y==="!"?t.tag="!"+re:Y==="!!"?t.tag="tag:yaml.org,2002:"+re:D(t,'undeclared tag handle "'+Y+'"'),!0}function Ee(t){var B,W;if(W=t.input.charCodeAt(t.position),W!==38)return!1;for(t.anchor!==null&&D(t,"duplication of an anchor property"),W=t.input.charCodeAt(++t.position),B=t.position;W!==0&&!I(W)&&!b(W);)W=t.input.charCodeAt(++t.position);return t.position===B&&D(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(B,t.position),!0}function We(t){var B,W,ne;if(ne=t.input.charCodeAt(t.position),ne!==42)return!1;for(ne=t.input.charCodeAt(++t.position),B=t.position;ne!==0&&!I(ne)&&!b(ne);)ne=t.input.charCodeAt(++t.position);return t.position===B&&D(t,"name of an alias node must contain at least one character"),W=t.input.slice(B,t.position),f.call(t.anchorMap,W)||D(t,'unidentified alias "'+W+'"'),t.result=t.anchorMap[W],ve(t,!0,-1),!0}function Se(t,B,W,ne,Y){var re,Z,ae,ue=1,Te=!1,Ce=!1,me,A,M,z,X,J;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,re=Z=ae=a===W||u===W,ne&&ve(t,!0,-1)&&(Te=!0,t.lineIndent>B?ue=1:t.lineIndent===B?ue=0:t.lineIndent<B&&(ue=-1)),ue===1)for(;_e(t)||Ee(t);)ve(t,!0,-1)?(Te=!0,ae=re,t.lineIndent>B?ue=1:t.lineIndent===B?ue=0:t.lineIndent<B&&(ue=-1)):ae=!1;if(ae&&(ae=Te||Y),(ue===1||a===W)&&(l===W||o===W?X=B:X=B+1,J=t.position-t.lineStart,ue===1?ae&&(he(t,J)||pe(t,J,X))||F(t,X)?Ce=!0:(Z&&ce(t,X)||E(t,X)||H(t,X)?Ce=!0:We(t)?(Ce=!0,(t.tag!==null||t.anchor!==null)&&D(t,"alias node should not have any properties")):_(t,X,l===W)&&(Ce=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ue===0&&(Ce=ae&&he(t,J))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&D(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),me=0,A=t.implicitTypes.length;me<A;me+=1)if(z=t.implicitTypes[me],z.resolve(t.result)){t.result=z.construct(t.result),t.tag=z.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(f.call(t.typeMap[t.kind||"fallback"],t.tag))z=t.typeMap[t.kind||"fallback"][t.tag];else for(z=null,M=t.typeMap.multi[t.kind||"fallback"],me=0,A=M.length;me<A;me+=1)if(t.tag.slice(0,M[me].tag.length)===M[me].tag){z=M[me];break}z||D(t,"unknown tag !<"+t.tag+">"),t.result!==null&&z.kind!==t.kind&&D(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+z.kind+'", not "'+t.kind+'"'),z.resolve(t.result,t.tag)?(t.result=z.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):D(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||Ce}function Me(t){var B=t.position,W,ne,Y,re=!1,Z;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(Z=t.input.charCodeAt(t.position))!==0&&(ve(t,!0,-1),Z=t.input.charCodeAt(t.position),!(t.lineIndent>0||Z!==37));){for(re=!0,Z=t.input.charCodeAt(++t.position),W=t.position;Z!==0&&!I(Z);)Z=t.input.charCodeAt(++t.position);for(ne=t.input.slice(W,t.position),Y=[],ne.length<1&&D(t,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=t.input.charCodeAt(++t.position);if(Z===35){do Z=t.input.charCodeAt(++t.position);while(Z!==0&&!S(Z));break}if(S(Z))break;for(W=t.position;Z!==0&&!I(Z);)Z=t.input.charCodeAt(++t.position);Y.push(t.input.slice(W,t.position))}Z!==0&&we(t),f.call(V,ne)?V[ne](t,ne,Y):G(t,'unknown document directive "'+ne+'"')}if(ve(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ve(t,!0,-1)):re&&D(t,"directives end mark is expected"),Se(t,t.lineIndent-1,a,!1,!0),ve(t,!0,-1),t.checkLineBreaks&&h.test(t.input.slice(B,t.position))&&G(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Q(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ve(t,!0,-1));return}if(t.position<t.length-1)D(t,"end of the stream or a document separator is expected");else return}function ct(t,B){t=String(t),B=B||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var W=new N(t,B),ne=t.indexOf("\0");for(ne!==-1&&(W.position=ne,D(W,"null byte is not allowed in input")),W.input+="\0";W.input.charCodeAt(W.position)===32;)W.lineIndent+=1,W.position+=1;for(;W.position<W.length-1;)Me(W);return W.documents}function ot(t,B,W){B!==null&&typeof B=="object"&&typeof W>"u"&&(W=B,B=null);var ne=ct(t,W);if(typeof B!="function")return ne;for(var Y=0,re=ne.length;Y<re;Y+=1)B(ne[Y])}function rt(t,B){var W=ct(t,B);if(W.length!==0){if(W.length===1)return W[0];throw new d("expected a single document in the stream, but found more")}}return kr.loadAll=ot,kr.load=rt,kr}var si={},rs;function lf(){if(rs)return si;rs=1;var e=yr(),d=wr(),p=uo(),c=Object.prototype.toString,f=Object.prototype.hasOwnProperty,l=65279,o=9,u=10,a=13,s=32,i=33,r=34,n=35,h=37,g=38,y=39,m=42,w=44,S=45,O=58,I=61,b=62,P=63,T=64,R=91,v=93,k=96,q=123,L=124,$=125,x={};x[0]="\\0",x[7]="\\a",x[8]="\\b",x[9]="\\t",x[10]="\\n",x[11]="\\v",x[12]="\\f",x[13]="\\r",x[27]="\\e",x[34]='\\"',x[92]="\\\\",x[133]="\\N",x[160]="\\_",x[8232]="\\L",x[8233]="\\P";var N=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],j=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function D(A,M){var z,X,J,oe,ee,se,fe;if(M===null)return{};for(z={},X=Object.keys(M),J=0,oe=X.length;J<oe;J+=1)ee=X[J],se=String(M[ee]),ee.slice(0,2)==="!!"&&(ee="tag:yaml.org,2002:"+ee.slice(2)),fe=A.compiledTypeMap.fallback[ee],fe&&f.call(fe.styleAliases,se)&&(se=fe.styleAliases[se]),z[ee]=se;return z}function G(A){var M,z,X;if(M=A.toString(16).toUpperCase(),A<=255)z="x",X=2;else if(A<=65535)z="u",X=4;else if(A<=4294967295)z="U",X=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+z+e.repeat("0",X-M.length)+M}var V=1,te=2;function de(A){this.schema=A.schema||p,this.indent=Math.max(1,A.indent||2),this.noArrayIndent=A.noArrayIndent||!1,this.skipInvalid=A.skipInvalid||!1,this.flowLevel=e.isNothing(A.flowLevel)?-1:A.flowLevel,this.styleMap=D(this.schema,A.styles||null),this.sortKeys=A.sortKeys||!1,this.lineWidth=A.lineWidth||80,this.noRefs=A.noRefs||!1,this.noCompatMode=A.noCompatMode||!1,this.condenseFlow=A.condenseFlow||!1,this.quotingType=A.quotingType==='"'?te:V,this.forceQuotes=A.forceQuotes||!1,this.replacer=typeof A.replacer=="function"?A.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ie(A,M){for(var z=e.repeat(" ",M),X=0,J=-1,oe="",ee,se=A.length;X<se;)J=A.indexOf(`
`,X),J===-1?(ee=A.slice(X),X=se):(ee=A.slice(X,J+1),X=J+1),ee.length&&ee!==`
`&&(oe+=z),oe+=ee;return oe}function we(A,M){return`
`+e.repeat(" ",A.indent*M)}function ve(A,M){var z,X,J;for(z=0,X=A.implicitTypes.length;z<X;z+=1)if(J=A.implicitTypes[z],J.resolve(M))return!0;return!1}function Q(A){return A===s||A===o}function ge(A){return 32<=A&&A<=126||161<=A&&A<=55295&&A!==8232&&A!==8233||57344<=A&&A<=65533&&A!==l||65536<=A&&A<=1114111}function _(A){return ge(A)&&A!==l&&A!==a&&A!==u}function E(A,M,z){var X=_(A),J=X&&!Q(A);return(z?X:X&&A!==w&&A!==R&&A!==v&&A!==q&&A!==$)&&A!==n&&!(M===O&&!J)||_(M)&&!Q(M)&&A===n||M===O&&J}function H(A){return ge(A)&&A!==l&&!Q(A)&&A!==S&&A!==P&&A!==O&&A!==w&&A!==R&&A!==v&&A!==q&&A!==$&&A!==n&&A!==g&&A!==m&&A!==i&&A!==L&&A!==I&&A!==b&&A!==y&&A!==r&&A!==h&&A!==T&&A!==k}function F(A){return!Q(A)&&A!==O}function ce(A,M){var z=A.charCodeAt(M),X;return z>=55296&&z<=56319&&M+1<A.length&&(X=A.charCodeAt(M+1),X>=56320&&X<=57343)?(z-55296)*1024+X-56320+65536:z}function he(A){var M=/^\n* /;return M.test(A)}var pe=1,_e=2,Ee=3,We=4,Se=5;function Me(A,M,z,X,J,oe,ee,se){var fe,ye=0,Oe=null,Ne=!1,be=!1,Nt=X!==-1,Qe=-1,yt=H(ce(A,0))&&F(ce(A,A.length-1));if(M||ee)for(fe=0;fe<A.length;ye>=65536?fe+=2:fe++){if(ye=ce(A,fe),!ge(ye))return Se;yt=yt&&E(ye,Oe,se),Oe=ye}else{for(fe=0;fe<A.length;ye>=65536?fe+=2:fe++){if(ye=ce(A,fe),ye===u)Ne=!0,Nt&&(be=be||fe-Qe-1>X&&A[Qe+1]!==" ",Qe=fe);else if(!ge(ye))return Se;yt=yt&&E(ye,Oe,se),Oe=ye}be=be||Nt&&fe-Qe-1>X&&A[Qe+1]!==" "}return!Ne&&!be?yt&&!ee&&!J(A)?pe:oe===te?Se:_e:z>9&&he(A)?Se:ee?oe===te?Se:_e:be?We:Ee}function ct(A,M,z,X,J){A.dump=function(){if(M.length===0)return A.quotingType===te?'""':"''";if(!A.noCompatMode&&(N.indexOf(M)!==-1||j.test(M)))return A.quotingType===te?'"'+M+'"':"'"+M+"'";var oe=A.indent*Math.max(1,z),ee=A.lineWidth===-1?-1:Math.max(Math.min(A.lineWidth,40),A.lineWidth-oe),se=X||A.flowLevel>-1&&z>=A.flowLevel;function fe(ye){return ve(A,ye)}switch(Me(M,se,A.indent,ee,fe,A.quotingType,A.forceQuotes&&!X,J)){case pe:return M;case _e:return"'"+M.replace(/'/g,"''")+"'";case Ee:return"|"+ot(M,A.indent)+rt(ie(M,oe));case We:return">"+ot(M,A.indent)+rt(ie(t(M,ee),oe));case Se:return'"'+W(M)+'"';default:throw new d("impossible error: invalid scalar style")}}()}function ot(A,M){var z=he(A)?String(M):"",X=A[A.length-1]===`
`,J=X&&(A[A.length-2]===`
`||A===`
`),oe=J?"+":X?"":"-";return z+oe+`
`}function rt(A){return A[A.length-1]===`
`?A.slice(0,-1):A}function t(A,M){for(var z=/(\n+)([^\n]*)/g,X=function(){var ye=A.indexOf(`
`);return ye=ye!==-1?ye:A.length,z.lastIndex=ye,B(A.slice(0,ye),M)}(),J=A[0]===`
`||A[0]===" ",oe,ee;ee=z.exec(A);){var se=ee[1],fe=ee[2];oe=fe[0]===" ",X+=se+(!J&&!oe&&fe!==""?`
`:"")+B(fe,M),J=oe}return X}function B(A,M){if(A===""||A[0]===" ")return A;for(var z=/ [^ ]/g,X,J=0,oe,ee=0,se=0,fe="";X=z.exec(A);)se=X.index,se-J>M&&(oe=ee>J?ee:se,fe+=`
`+A.slice(J,oe),J=oe+1),ee=se;return fe+=`
`,A.length-J>M&&ee>J?fe+=A.slice(J,ee)+`
`+A.slice(ee+1):fe+=A.slice(J),fe.slice(1)}function W(A){for(var M="",z=0,X,J=0;J<A.length;z>=65536?J+=2:J++)z=ce(A,J),X=x[z],!X&&ge(z)?(M+=A[J],z>=65536&&(M+=A[J+1])):M+=X||G(z);return M}function ne(A,M,z){var X="",J=A.tag,oe,ee,se;for(oe=0,ee=z.length;oe<ee;oe+=1)se=z[oe],A.replacer&&(se=A.replacer.call(z,String(oe),se)),(ue(A,M,se,!1,!1)||typeof se>"u"&&ue(A,M,null,!1,!1))&&(X!==""&&(X+=","+(A.condenseFlow?"":" ")),X+=A.dump);A.tag=J,A.dump="["+X+"]"}function Y(A,M,z,X){var J="",oe=A.tag,ee,se,fe;for(ee=0,se=z.length;ee<se;ee+=1)fe=z[ee],A.replacer&&(fe=A.replacer.call(z,String(ee),fe)),(ue(A,M+1,fe,!0,!0,!1,!0)||typeof fe>"u"&&ue(A,M+1,null,!0,!0,!1,!0))&&((!X||J!=="")&&(J+=we(A,M)),A.dump&&u===A.dump.charCodeAt(0)?J+="-":J+="- ",J+=A.dump);A.tag=oe,A.dump=J||"[]"}function re(A,M,z){var X="",J=A.tag,oe=Object.keys(z),ee,se,fe,ye,Oe;for(ee=0,se=oe.length;ee<se;ee+=1)Oe="",X!==""&&(Oe+=", "),A.condenseFlow&&(Oe+='"'),fe=oe[ee],ye=z[fe],A.replacer&&(ye=A.replacer.call(z,fe,ye)),ue(A,M,fe,!1,!1)&&(A.dump.length>1024&&(Oe+="? "),Oe+=A.dump+(A.condenseFlow?'"':"")+":"+(A.condenseFlow?"":" "),ue(A,M,ye,!1,!1)&&(Oe+=A.dump,X+=Oe));A.tag=J,A.dump="{"+X+"}"}function Z(A,M,z,X){var J="",oe=A.tag,ee=Object.keys(z),se,fe,ye,Oe,Ne,be;if(A.sortKeys===!0)ee.sort();else if(typeof A.sortKeys=="function")ee.sort(A.sortKeys);else if(A.sortKeys)throw new d("sortKeys must be a boolean or a function");for(se=0,fe=ee.length;se<fe;se+=1)be="",(!X||J!=="")&&(be+=we(A,M)),ye=ee[se],Oe=z[ye],A.replacer&&(Oe=A.replacer.call(z,ye,Oe)),ue(A,M+1,ye,!0,!0,!0)&&(Ne=A.tag!==null&&A.tag!=="?"||A.dump&&A.dump.length>1024,Ne&&(A.dump&&u===A.dump.charCodeAt(0)?be+="?":be+="? "),be+=A.dump,Ne&&(be+=we(A,M)),ue(A,M+1,Oe,!0,Ne)&&(A.dump&&u===A.dump.charCodeAt(0)?be+=":":be+=": ",be+=A.dump,J+=be));A.tag=oe,A.dump=J||"{}"}function ae(A,M,z){var X,J,oe,ee,se,fe;for(J=z?A.explicitTypes:A.implicitTypes,oe=0,ee=J.length;oe<ee;oe+=1)if(se=J[oe],(se.instanceOf||se.predicate)&&(!se.instanceOf||typeof M=="object"&&M instanceof se.instanceOf)&&(!se.predicate||se.predicate(M))){if(z?se.multi&&se.representName?A.tag=se.representName(M):A.tag=se.tag:A.tag="?",se.represent){if(fe=A.styleMap[se.tag]||se.defaultStyle,c.call(se.represent)==="[object Function]")X=se.represent(M,fe);else if(f.call(se.represent,fe))X=se.represent[fe](M,fe);else throw new d("!<"+se.tag+'> tag resolver accepts not "'+fe+'" style');A.dump=X}return!0}return!1}function ue(A,M,z,X,J,oe,ee){A.tag=null,A.dump=z,ae(A,z,!1)||ae(A,z,!0);var se=c.call(A.dump),fe=X,ye;X&&(X=A.flowLevel<0||A.flowLevel>M);var Oe=se==="[object Object]"||se==="[object Array]",Ne,be;if(Oe&&(Ne=A.duplicates.indexOf(z),be=Ne!==-1),(A.tag!==null&&A.tag!=="?"||be||A.indent!==2&&M>0)&&(J=!1),be&&A.usedDuplicates[Ne])A.dump="*ref_"+Ne;else{if(Oe&&be&&!A.usedDuplicates[Ne]&&(A.usedDuplicates[Ne]=!0),se==="[object Object]")X&&Object.keys(A.dump).length!==0?(Z(A,M,A.dump,J),be&&(A.dump="&ref_"+Ne+A.dump)):(re(A,M,A.dump),be&&(A.dump="&ref_"+Ne+" "+A.dump));else if(se==="[object Array]")X&&A.dump.length!==0?(A.noArrayIndent&&!ee&&M>0?Y(A,M-1,A.dump,J):Y(A,M,A.dump,J),be&&(A.dump="&ref_"+Ne+A.dump)):(ne(A,M,A.dump),be&&(A.dump="&ref_"+Ne+" "+A.dump));else if(se==="[object String]")A.tag!=="?"&&ct(A,A.dump,M,oe,fe);else{if(se==="[object Undefined]")return!1;if(A.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+se)}A.tag!==null&&A.tag!=="?"&&(ye=encodeURI(A.tag[0]==="!"?A.tag.slice(1):A.tag).replace(/!/g,"%21"),A.tag[0]==="!"?ye="!"+ye:ye.slice(0,18)==="tag:yaml.org,2002:"?ye="!!"+ye.slice(18):ye="!<"+ye+">",A.dump=ye+" "+A.dump)}return!0}function Te(A,M){var z=[],X=[],J,oe;for(Ce(A,z,X),J=0,oe=X.length;J<oe;J+=1)M.duplicates.push(z[X[J]]);M.usedDuplicates=new Array(oe)}function Ce(A,M,z){var X,J,oe;if(A!==null&&typeof A=="object")if(J=M.indexOf(A),J!==-1)z.indexOf(J)===-1&&z.push(J);else if(M.push(A),Array.isArray(A))for(J=0,oe=A.length;J<oe;J+=1)Ce(A[J],M,z);else for(X=Object.keys(A),J=0,oe=X.length;J<oe;J+=1)Ce(A[X[J]],M,z)}function me(A,M){M=M||{};var z=new de(M);z.noRefs||Te(A,z);var X=A;return z.replacer&&(X=z.replacer.call({"":X},"",X)),ue(z,0,X,!0,!0)?z.dump+`
`:""}return si.dump=me,si}var ns;function co(){if(ns)return $e;ns=1;var e=sf(),d=lf();function p(c,f){return function(){throw new Error("Function yaml."+c+" is removed in js-yaml 4. Use yaml."+f+" instead, which is now safe by default.")}}return $e.Type=je(),$e.Schema=Vl(),$e.FAILSAFE_SCHEMA=Jl(),$e.JSON_SCHEMA=tu(),$e.CORE_SCHEMA=ru(),$e.DEFAULT_SCHEMA=uo(),$e.load=e.load,$e.loadAll=e.loadAll,$e.dump=d.dump,$e.YAMLException=wr(),$e.types={binary:ou(),float:eu(),map:Xl(),null:Kl(),pairs:su(),set:lu(),timestamp:nu(),bool:Ql(),int:Zl(),merge:iu(),omap:au(),seq:zl(),str:Yl()},$e.safeLoad=p("safeLoad","load"),$e.safeLoadAll=p("safeLoadAll","loadAll"),$e.safeDump=p("safeDump","dump"),$e}var zt={},is;function uf(){if(is)return zt;is=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.Lazy=void 0;class e{constructor(p){this._value=null,this.creator=p}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const p=this.creator();return this.value=p,p}set value(p){this._value=p,this.creator=null}}return zt.Lazy=e,zt}var qr={exports:{}},li,os;function Vr(){if(os)return li;os=1;const e="2.0.0",d=256,p=Number.MAX_SAFE_INTEGER||9007199254740991,c=16,f=d-6;return li={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:c,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:p,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},li}var ui,as;function Yr(){return as||(as=1,ui=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),ui}var ss;function _r(){return ss||(ss=1,function(e,d){const{MAX_SAFE_COMPONENT_LENGTH:p,MAX_SAFE_BUILD_LENGTH:c,MAX_LENGTH:f}=Vr(),l=Yr();d=e.exports={};const o=d.re=[],u=d.safeRe=[],a=d.src=[],s=d.safeSrc=[],i=d.t={};let r=0;const n="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",f],[n,c]],g=m=>{for(const[w,S]of h)m=m.split(`${w}*`).join(`${w}{0,${S}}`).split(`${w}+`).join(`${w}{1,${S}}`);return m},y=(m,w,S)=>{const O=g(w),I=r++;l(m,I,w),i[m]=I,a[I]=w,s[I]=O,o[I]=new RegExp(w,S?"g":void 0),u[I]=new RegExp(O,S?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${n}*`),y("MAINVERSION",`(${a[i.NUMERICIDENTIFIER]})\\.(${a[i.NUMERICIDENTIFIER]})\\.(${a[i.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${a[i.NUMERICIDENTIFIERLOOSE]})\\.(${a[i.NUMERICIDENTIFIERLOOSE]})\\.(${a[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${a[i.NONNUMERICIDENTIFIER]}|${a[i.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${a[i.NONNUMERICIDENTIFIER]}|${a[i.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${a[i.PRERELEASEIDENTIFIER]}(?:\\.${a[i.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${a[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[i.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${n}+`),y("BUILD",`(?:\\+(${a[i.BUILDIDENTIFIER]}(?:\\.${a[i.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${a[i.MAINVERSION]}${a[i.PRERELEASE]}?${a[i.BUILD]}?`),y("FULL",`^${a[i.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${a[i.MAINVERSIONLOOSE]}${a[i.PRERELEASELOOSE]}?${a[i.BUILD]}?`),y("LOOSE",`^${a[i.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${a[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${a[i.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${a[i.XRANGEIDENTIFIER]})(?:\\.(${a[i.XRANGEIDENTIFIER]})(?:\\.(${a[i.XRANGEIDENTIFIER]})(?:${a[i.PRERELEASE]})?${a[i.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${a[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[i.XRANGEIDENTIFIERLOOSE]})(?:${a[i.PRERELEASELOOSE]})?${a[i.BUILD]}?)?)?`),y("XRANGE",`^${a[i.GTLT]}\\s*${a[i.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${a[i.GTLT]}\\s*${a[i.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${p}})(?:\\.(\\d{1,${p}}))?(?:\\.(\\d{1,${p}}))?`),y("COERCE",`${a[i.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",a[i.COERCEPLAIN]+`(?:${a[i.PRERELEASE]})?(?:${a[i.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",a[i.COERCE],!0),y("COERCERTLFULL",a[i.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${a[i.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${a[i.LONETILDE]}${a[i.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${a[i.LONETILDE]}${a[i.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${a[i.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${a[i.LONECARET]}${a[i.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${a[i.LONECARET]}${a[i.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${a[i.GTLT]}\\s*(${a[i.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${a[i.GTLT]}\\s*(${a[i.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${a[i.GTLT]}\\s*(${a[i.LOOSEPLAIN]}|${a[i.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${a[i.XRANGEPLAIN]})\\s+-\\s+(${a[i.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${a[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[i.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(qr,qr.exports)),qr.exports}var ci,ls;function fo(){if(ls)return ci;ls=1;const e=Object.freeze({loose:!0}),d=Object.freeze({});return ci=c=>c?typeof c!="object"?e:c:d,ci}var fi,us;function uu(){if(us)return fi;us=1;const e=/^[0-9]+$/,d=(c,f)=>{if(typeof c=="number"&&typeof f=="number")return c===f?0:c<f?-1:1;const l=e.test(c),o=e.test(f);return l&&o&&(c=+c,f=+f),c===f?0:l&&!o?-1:o&&!l?1:c<f?-1:1};return fi={compareIdentifiers:d,rcompareIdentifiers:(c,f)=>d(f,c)},fi}var di,cs;function Ge(){if(cs)return di;cs=1;const e=Yr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:p}=Vr(),{safeRe:c,t:f}=_r(),l=fo(),{compareIdentifiers:o}=uu();class u{constructor(s,i){if(i=l(i),s instanceof u){if(s.loose===!!i.loose&&s.includePrerelease===!!i.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);e("SemVer",s,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const r=s.trim().match(i.loose?c[f.LOOSE]:c[f.FULL]);if(!r)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>p||this.major<0)throw new TypeError("Invalid major version");if(this.minor>p||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>p||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const h=+n;if(h>=0&&h<p)return h}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(e("SemVer.compare",this.version,this.options,s),!(s instanceof u)){if(typeof s=="string"&&s===this.version)return 0;s=new u(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof u||(s=new u(s,this.options)),this.major<s.major?-1:this.major>s.major?1:this.minor<s.minor?-1:this.minor>s.minor?1:this.patch<s.patch?-1:this.patch>s.patch?1:0}comparePre(s){if(s instanceof u||(s=new u(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let i=0;do{const r=this.prerelease[i],n=s.prerelease[i];if(e("prerelease compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return o(r,n)}while(++i)}compareBuild(s){s instanceof u||(s=new u(s,this.options));let i=0;do{const r=this.build[i],n=s.build[i];if(e("build compare",i,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return o(r,n)}while(++i)}inc(s,i,r){if(s.startsWith("pre")){if(!i&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(i){const n=`-${i}`.match(this.options.loose?c[f.PRERELEASELOOSE]:c[f.PRERELEASE]);if(!n||n[1]!==i)throw new Error(`invalid identifier: ${i}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,r),this.inc("pre",i,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,r),this.inc("pre",i,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(i===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(i){let h=[i,n];r===!1&&(h=[i]),o(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return di=u,di}var hi,fs;function Ht(){if(fs)return hi;fs=1;const e=Ge();return hi=(p,c,f=!1)=>{if(p instanceof e)return p;try{return new e(p,c)}catch(l){if(!f)return null;throw l}},hi}var pi,ds;function cf(){if(ds)return pi;ds=1;const e=Ht();return pi=(p,c)=>{const f=e(p,c);return f?f.version:null},pi}var mi,hs;function ff(){if(hs)return mi;hs=1;const e=Ht();return mi=(p,c)=>{const f=e(p.trim().replace(/^[=v]+/,""),c);return f?f.version:null},mi}var gi,ps;function df(){if(ps)return gi;ps=1;const e=Ge();return gi=(p,c,f,l,o)=>{typeof f=="string"&&(o=l,l=f,f=void 0);try{return new e(p instanceof e?p.version:p,f).inc(c,l,o).version}catch{return null}},gi}var vi,ms;function hf(){if(ms)return vi;ms=1;const e=Ht();return vi=(p,c)=>{const f=e(p,null,!0),l=e(c,null,!0),o=f.compare(l);if(o===0)return null;const u=o>0,a=u?f:l,s=u?l:f,i=!!a.prerelease.length;if(!!s.prerelease.length&&!i){if(!s.patch&&!s.minor)return"major";if(s.compareMain(a)===0)return s.minor&&!s.patch?"minor":"patch"}const n=i?"pre":"";return f.major!==l.major?n+"major":f.minor!==l.minor?n+"minor":f.patch!==l.patch?n+"patch":"prerelease"},vi}var Ei,gs;function pf(){if(gs)return Ei;gs=1;const e=Ge();return Ei=(p,c)=>new e(p,c).major,Ei}var yi,vs;function mf(){if(vs)return yi;vs=1;const e=Ge();return yi=(p,c)=>new e(p,c).minor,yi}var wi,Es;function gf(){if(Es)return wi;Es=1;const e=Ge();return wi=(p,c)=>new e(p,c).patch,wi}var _i,ys;function vf(){if(ys)return _i;ys=1;const e=Ht();return _i=(p,c)=>{const f=e(p,c);return f&&f.prerelease.length?f.prerelease:null},_i}var Ai,ws;function et(){if(ws)return Ai;ws=1;const e=Ge();return Ai=(p,c,f)=>new e(p,f).compare(new e(c,f)),Ai}var Ri,_s;function Ef(){if(_s)return Ri;_s=1;const e=et();return Ri=(p,c,f)=>e(c,p,f),Ri}var Si,As;function yf(){if(As)return Si;As=1;const e=et();return Si=(p,c)=>e(p,c,!0),Si}var Ti,Rs;function ho(){if(Rs)return Ti;Rs=1;const e=Ge();return Ti=(p,c,f)=>{const l=new e(p,f),o=new e(c,f);return l.compare(o)||l.compareBuild(o)},Ti}var Ci,Ss;function wf(){if(Ss)return Ci;Ss=1;const e=ho();return Ci=(p,c)=>p.sort((f,l)=>e(f,l,c)),Ci}var bi,Ts;function _f(){if(Ts)return bi;Ts=1;const e=ho();return bi=(p,c)=>p.sort((f,l)=>e(l,f,c)),bi}var Oi,Cs;function zr(){if(Cs)return Oi;Cs=1;const e=et();return Oi=(p,c,f)=>e(p,c,f)>0,Oi}var Pi,bs;function po(){if(bs)return Pi;bs=1;const e=et();return Pi=(p,c,f)=>e(p,c,f)<0,Pi}var Ii,Os;function cu(){if(Os)return Ii;Os=1;const e=et();return Ii=(p,c,f)=>e(p,c,f)===0,Ii}var Di,Ps;function fu(){if(Ps)return Di;Ps=1;const e=et();return Di=(p,c,f)=>e(p,c,f)!==0,Di}var Ni,Is;function mo(){if(Is)return Ni;Is=1;const e=et();return Ni=(p,c,f)=>e(p,c,f)>=0,Ni}var Fi,Ds;function go(){if(Ds)return Fi;Ds=1;const e=et();return Fi=(p,c,f)=>e(p,c,f)<=0,Fi}var xi,Ns;function du(){if(Ns)return xi;Ns=1;const e=cu(),d=fu(),p=zr(),c=mo(),f=po(),l=go();return xi=(u,a,s,i)=>{switch(a){case"===":return typeof u=="object"&&(u=u.version),typeof s=="object"&&(s=s.version),u===s;case"!==":return typeof u=="object"&&(u=u.version),typeof s=="object"&&(s=s.version),u!==s;case"":case"=":case"==":return e(u,s,i);case"!=":return d(u,s,i);case">":return p(u,s,i);case">=":return c(u,s,i);case"<":return f(u,s,i);case"<=":return l(u,s,i);default:throw new TypeError(`Invalid operator: ${a}`)}},xi}var Li,Fs;function Af(){if(Fs)return Li;Fs=1;const e=Ge(),d=Ht(),{safeRe:p,t:c}=_r();return Li=(l,o)=>{if(l instanceof e)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;o=o||{};let u=null;if(!o.rtl)u=l.match(o.includePrerelease?p[c.COERCEFULL]:p[c.COERCE]);else{const h=o.includePrerelease?p[c.COERCERTLFULL]:p[c.COERCERTL];let g;for(;(g=h.exec(l))&&(!u||u.index+u[0].length!==l.length);)(!u||g.index+g[0].length!==u.index+u[0].length)&&(u=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(u===null)return null;const a=u[2],s=u[3]||"0",i=u[4]||"0",r=o.includePrerelease&&u[5]?`-${u[5]}`:"",n=o.includePrerelease&&u[6]?`+${u[6]}`:"";return d(`${a}.${s}.${i}${r}${n}`,o)},Li}var Ui,xs;function Rf(){if(xs)return Ui;xs=1;class e{constructor(){this.max=1e3,this.map=new Map}get(p){const c=this.map.get(p);if(c!==void 0)return this.map.delete(p),this.map.set(p,c),c}delete(p){return this.map.delete(p)}set(p,c){if(!this.delete(p)&&c!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(p,c)}return this}}return Ui=e,Ui}var ki,Ls;function tt(){if(Ls)return ki;Ls=1;const e=/\s+/g;class d{constructor(N,j){if(j=f(j),N instanceof d)return N.loose===!!j.loose&&N.includePrerelease===!!j.includePrerelease?N:new d(N.raw,j);if(N instanceof l)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(G=>!y(G[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const j=this.set[N];for(let D=0;D<j.length;D++)D>0&&(this.formatted+=" "),this.formatted+=j[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const D=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+N,G=c.get(D);if(G)return G;const V=this.options.loose,te=V?a[s.HYPHENRANGELOOSE]:a[s.HYPHENRANGE];N=N.replace(te,L(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(a[s.COMPARATORTRIM],i),o("comparator trim",N),N=N.replace(a[s.TILDETRIM],r),o("tilde trim",N),N=N.replace(a[s.CARETTRIM],n),o("caret trim",N);let de=N.split(" ").map(Q=>S(Q,this.options)).join(" ").split(/\s+/).map(Q=>q(Q,this.options));V&&(de=de.filter(Q=>(o("loose invalid filter",Q,this.options),!!Q.match(a[s.COMPARATORLOOSE])))),o("range list",de);const ie=new Map,we=de.map(Q=>new l(Q,this.options));for(const Q of we){if(y(Q))return[Q];ie.set(Q.value,Q)}ie.size>1&&ie.has("")&&ie.delete("");const ve=[...ie.values()];return c.set(D,ve),ve}intersects(N,j){if(!(N instanceof d))throw new TypeError("a Range is required");return this.set.some(D=>w(D,j)&&N.set.some(G=>w(G,j)&&D.every(V=>G.every(te=>V.intersects(te,j)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new u(N,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if($(this.set[j],N,this.options))return!0;return!1}}ki=d;const p=Rf(),c=new p,f=fo(),l=Xr(),o=Yr(),u=Ge(),{safeRe:a,t:s,comparatorTrimReplace:i,tildeTrimReplace:r,caretTrimReplace:n}=_r(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=Vr(),y=x=>x.value==="<0.0.0-0",m=x=>x.value==="",w=(x,N)=>{let j=!0;const D=x.slice();let G=D.pop();for(;j&&D.length;)j=D.every(V=>G.intersects(V,N)),G=D.pop();return j},S=(x,N)=>(x=x.replace(a[s.BUILD],""),o("comp",x,N),x=P(x,N),o("caret",x),x=I(x,N),o("tildes",x),x=R(x,N),o("xrange",x),x=k(x,N),o("stars",x),x),O=x=>!x||x.toLowerCase()==="x"||x==="*",I=(x,N)=>x.trim().split(/\s+/).map(j=>b(j,N)).join(" "),b=(x,N)=>{const j=N.loose?a[s.TILDELOOSE]:a[s.TILDE];return x.replace(j,(D,G,V,te,de)=>{o("tilde",x,D,G,V,te,de);let ie;return O(G)?ie="":O(V)?ie=`>=${G}.0.0 <${+G+1}.0.0-0`:O(te)?ie=`>=${G}.${V}.0 <${G}.${+V+1}.0-0`:de?(o("replaceTilde pr",de),ie=`>=${G}.${V}.${te}-${de} <${G}.${+V+1}.0-0`):ie=`>=${G}.${V}.${te} <${G}.${+V+1}.0-0`,o("tilde return",ie),ie})},P=(x,N)=>x.trim().split(/\s+/).map(j=>T(j,N)).join(" "),T=(x,N)=>{o("caret",x,N);const j=N.loose?a[s.CARETLOOSE]:a[s.CARET],D=N.includePrerelease?"-0":"";return x.replace(j,(G,V,te,de,ie)=>{o("caret",x,G,V,te,de,ie);let we;return O(V)?we="":O(te)?we=`>=${V}.0.0${D} <${+V+1}.0.0-0`:O(de)?V==="0"?we=`>=${V}.${te}.0${D} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.0${D} <${+V+1}.0.0-0`:ie?(o("replaceCaret pr",ie),V==="0"?te==="0"?we=`>=${V}.${te}.${de}-${ie} <${V}.${te}.${+de+1}-0`:we=`>=${V}.${te}.${de}-${ie} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.${de}-${ie} <${+V+1}.0.0-0`):(o("no pr"),V==="0"?te==="0"?we=`>=${V}.${te}.${de}${D} <${V}.${te}.${+de+1}-0`:we=`>=${V}.${te}.${de}${D} <${V}.${+te+1}.0-0`:we=`>=${V}.${te}.${de} <${+V+1}.0.0-0`),o("caret return",we),we})},R=(x,N)=>(o("replaceXRanges",x,N),x.split(/\s+/).map(j=>v(j,N)).join(" ")),v=(x,N)=>{x=x.trim();const j=N.loose?a[s.XRANGELOOSE]:a[s.XRANGE];return x.replace(j,(D,G,V,te,de,ie)=>{o("xRange",x,D,G,V,te,de,ie);const we=O(V),ve=we||O(te),Q=ve||O(de),ge=Q;return G==="="&&ge&&(G=""),ie=N.includePrerelease?"-0":"",we?G===">"||G==="<"?D="<0.0.0-0":D="*":G&&ge?(ve&&(te=0),de=0,G===">"?(G=">=",ve?(V=+V+1,te=0,de=0):(te=+te+1,de=0)):G==="<="&&(G="<",ve?V=+V+1:te=+te+1),G==="<"&&(ie="-0"),D=`${G+V}.${te}.${de}${ie}`):ve?D=`>=${V}.0.0${ie} <${+V+1}.0.0-0`:Q&&(D=`>=${V}.${te}.0${ie} <${V}.${+te+1}.0-0`),o("xRange return",D),D})},k=(x,N)=>(o("replaceStars",x,N),x.trim().replace(a[s.STAR],"")),q=(x,N)=>(o("replaceGTE0",x,N),x.trim().replace(a[N.includePrerelease?s.GTE0PRE:s.GTE0],"")),L=x=>(N,j,D,G,V,te,de,ie,we,ve,Q,ge)=>(O(D)?j="":O(G)?j=`>=${D}.0.0${x?"-0":""}`:O(V)?j=`>=${D}.${G}.0${x?"-0":""}`:te?j=`>=${j}`:j=`>=${j}${x?"-0":""}`,O(we)?ie="":O(ve)?ie=`<${+we+1}.0.0-0`:O(Q)?ie=`<${we}.${+ve+1}.0-0`:ge?ie=`<=${we}.${ve}.${Q}-${ge}`:x?ie=`<${we}.${ve}.${+Q+1}-0`:ie=`<=${ie}`,`${j} ${ie}`.trim()),$=(x,N,j)=>{for(let D=0;D<x.length;D++)if(!x[D].test(N))return!1;if(N.prerelease.length&&!j.includePrerelease){for(let D=0;D<x.length;D++)if(o(x[D].semver),x[D].semver!==l.ANY&&x[D].semver.prerelease.length>0){const G=x[D].semver;if(G.major===N.major&&G.minor===N.minor&&G.patch===N.patch)return!0}return!1}return!0};return ki}var qi,Us;function Xr(){if(Us)return qi;Us=1;const e=Symbol("SemVer ANY");class d{static get ANY(){return e}constructor(i,r){if(r=p(r),i instanceof d){if(i.loose===!!r.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),o("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(i){const r=this.options.loose?c[f.COMPARATORLOOSE]:c[f.COMPARATOR],n=i.match(r);if(!n)throw new TypeError(`Invalid comparator: ${i}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new u(n[2],this.options.loose):this.semver=e}toString(){return this.value}test(i){if(o("Comparator.test",i,this.options.loose),this.semver===e||i===e)return!0;if(typeof i=="string")try{i=new u(i,this.options)}catch{return!1}return l(i,this.operator,this.semver,this.options)}intersects(i,r){if(!(i instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(i.value,r).test(this.value):i.operator===""?i.value===""?!0:new a(this.value,r).test(i.semver):(r=p(r),r.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||l(this.semver,"<",i.semver,r)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||l(this.semver,">",i.semver,r)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}qi=d;const p=fo(),{safeRe:c,t:f}=_r(),l=du(),o=Yr(),u=Ge(),a=tt();return qi}var $i,ks;function Jr(){if(ks)return $i;ks=1;const e=tt();return $i=(p,c,f)=>{try{c=new e(c,f)}catch{return!1}return c.test(p)},$i}var Mi,qs;function Sf(){if(qs)return Mi;qs=1;const e=tt();return Mi=(p,c)=>new e(p,c).set.map(f=>f.map(l=>l.value).join(" ").trim().split(" ")),Mi}var Bi,$s;function Tf(){if($s)return Bi;$s=1;const e=Ge(),d=tt();return Bi=(c,f,l)=>{let o=null,u=null,a=null;try{a=new d(f,l)}catch{return null}return c.forEach(s=>{a.test(s)&&(!o||u.compare(s)===-1)&&(o=s,u=new e(o,l))}),o},Bi}var Hi,Ms;function Cf(){if(Ms)return Hi;Ms=1;const e=Ge(),d=tt();return Hi=(c,f,l)=>{let o=null,u=null,a=null;try{a=new d(f,l)}catch{return null}return c.forEach(s=>{a.test(s)&&(!o||u.compare(s)===1)&&(o=s,u=new e(o,l))}),o},Hi}var ji,Bs;function bf(){if(Bs)return ji;Bs=1;const e=Ge(),d=tt(),p=zr();return ji=(f,l)=>{f=new d(f,l);let o=new e("0.0.0");if(f.test(o)||(o=new e("0.0.0-0"),f.test(o)))return o;o=null;for(let u=0;u<f.set.length;++u){const a=f.set[u];let s=null;a.forEach(i=>{const r=new e(i.semver.version);switch(i.operator){case">":r.prerelease.length===0?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":(!s||p(r,s))&&(s=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),s&&(!o||p(o,s))&&(o=s)}return o&&f.test(o)?o:null},ji}var Gi,Hs;function Of(){if(Hs)return Gi;Hs=1;const e=tt();return Gi=(p,c)=>{try{return new e(p,c).range||"*"}catch{return null}},Gi}var Wi,js;function vo(){if(js)return Wi;js=1;const e=Ge(),d=Xr(),{ANY:p}=d,c=tt(),f=Jr(),l=zr(),o=po(),u=go(),a=mo();return Wi=(i,r,n,h)=>{i=new e(i,h),r=new c(r,h);let g,y,m,w,S;switch(n){case">":g=l,y=u,m=o,w=">",S=">=";break;case"<":g=o,y=a,m=l,w="<",S="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(i,r,h))return!1;for(let O=0;O<r.set.length;++O){const I=r.set[O];let b=null,P=null;if(I.forEach(T=>{T.semver===p&&(T=new d(">=0.0.0")),b=b||T,P=P||T,g(T.semver,b.semver,h)?b=T:m(T.semver,P.semver,h)&&(P=T)}),b.operator===w||b.operator===S||(!P.operator||P.operator===w)&&y(i,P.semver))return!1;if(P.operator===S&&m(i,P.semver))return!1}return!0},Wi}var Vi,Gs;function Pf(){if(Gs)return Vi;Gs=1;const e=vo();return Vi=(p,c,f)=>e(p,c,">",f),Vi}var Yi,Ws;function If(){if(Ws)return Yi;Ws=1;const e=vo();return Yi=(p,c,f)=>e(p,c,"<",f),Yi}var zi,Vs;function Df(){if(Vs)return zi;Vs=1;const e=tt();return zi=(p,c,f)=>(p=new e(p,f),c=new e(c,f),p.intersects(c,f)),zi}var Xi,Ys;function Nf(){if(Ys)return Xi;Ys=1;const e=Jr(),d=et();return Xi=(p,c,f)=>{const l=[];let o=null,u=null;const a=p.sort((n,h)=>d(n,h,f));for(const n of a)e(n,c,f)?(u=n,o||(o=n)):(u&&l.push([o,u]),u=null,o=null);o&&l.push([o,null]);const s=[];for(const[n,h]of l)n===h?s.push(n):!h&&n===a[0]?s.push("*"):h?n===a[0]?s.push(`<=${h}`):s.push(`${n} - ${h}`):s.push(`>=${n}`);const i=s.join(" || "),r=typeof c.raw=="string"?c.raw:String(c);return i.length<r.length?i:c},Xi}var Ji,zs;function Ff(){if(zs)return Ji;zs=1;const e=tt(),d=Xr(),{ANY:p}=d,c=Jr(),f=et(),l=(r,n,h={})=>{if(r===n)return!0;r=new e(r,h),n=new e(n,h);let g=!1;e:for(const y of r.set){for(const m of n.set){const w=a(y,m,h);if(g=g||w!==null,w)continue e}if(g)return!1}return!0},o=[new d(">=0.0.0-0")],u=[new d(">=0.0.0")],a=(r,n,h)=>{if(r===n)return!0;if(r.length===1&&r[0].semver===p){if(n.length===1&&n[0].semver===p)return!0;h.includePrerelease?r=o:r=u}if(n.length===1&&n[0].semver===p){if(h.includePrerelease)return!0;n=u}const g=new Set;let y,m;for(const R of r)R.operator===">"||R.operator===">="?y=s(y,R,h):R.operator==="<"||R.operator==="<="?m=i(m,R,h):g.add(R.semver);if(g.size>1)return null;let w;if(y&&m){if(w=f(y.semver,m.semver,h),w>0)return null;if(w===0&&(y.operator!==">="||m.operator!=="<="))return null}for(const R of g){if(y&&!c(R,String(y),h)||m&&!c(R,String(m),h))return null;for(const v of n)if(!c(R,String(v),h))return!1;return!0}let S,O,I,b,P=m&&!h.includePrerelease&&m.semver.prerelease.length?m.semver:!1,T=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;P&&P.prerelease.length===1&&m.operator==="<"&&P.prerelease[0]===0&&(P=!1);for(const R of n){if(b=b||R.operator===">"||R.operator===">=",I=I||R.operator==="<"||R.operator==="<=",y){if(T&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===T.major&&R.semver.minor===T.minor&&R.semver.patch===T.patch&&(T=!1),R.operator===">"||R.operator===">="){if(S=s(y,R,h),S===R&&S!==y)return!1}else if(y.operator===">="&&!c(y.semver,String(R),h))return!1}if(m){if(P&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===P.major&&R.semver.minor===P.minor&&R.semver.patch===P.patch&&(P=!1),R.operator==="<"||R.operator==="<="){if(O=i(m,R,h),O===R&&O!==m)return!1}else if(m.operator==="<="&&!c(m.semver,String(R),h))return!1}if(!R.operator&&(m||y)&&w!==0)return!1}return!(y&&I&&!m&&w!==0||m&&b&&!y&&w!==0||T||P)},s=(r,n,h)=>{if(!r)return n;const g=f(r.semver,n.semver,h);return g>0?r:g<0||n.operator===">"&&r.operator===">="?n:r},i=(r,n,h)=>{if(!r)return n;const g=f(r.semver,n.semver,h);return g<0?r:g>0||n.operator==="<"&&r.operator==="<="?n:r};return Ji=l,Ji}var Ki,Xs;function hu(){if(Xs)return Ki;Xs=1;const e=_r(),d=Vr(),p=Ge(),c=uu(),f=Ht(),l=cf(),o=ff(),u=df(),a=hf(),s=pf(),i=mf(),r=gf(),n=vf(),h=et(),g=Ef(),y=yf(),m=ho(),w=wf(),S=_f(),O=zr(),I=po(),b=cu(),P=fu(),T=mo(),R=go(),v=du(),k=Af(),q=Xr(),L=tt(),$=Jr(),x=Sf(),N=Tf(),j=Cf(),D=bf(),G=Of(),V=vo(),te=Pf(),de=If(),ie=Df(),we=Nf(),ve=Ff();return Ki={parse:f,valid:l,clean:o,inc:u,diff:a,major:s,minor:i,patch:r,prerelease:n,compare:h,rcompare:g,compareLoose:y,compareBuild:m,sort:w,rsort:S,gt:O,lt:I,eq:b,neq:P,gte:T,lte:R,cmp:v,coerce:k,Comparator:q,Range:L,satisfies:$,toComparators:x,maxSatisfying:N,minSatisfying:j,minVersion:D,validRange:G,outside:V,gtr:te,ltr:de,intersects:ie,simplifyRange:we,subset:ve,SemVer:p,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:c.compareIdentifiers,rcompareIdentifiers:c.rcompareIdentifiers},Ki}var Ut={},gr={exports:{}};gr.exports;var Js;function xf(){return Js||(Js=1,function(e,d){var p=200,c="__lodash_hash_undefined__",f=1,l=2,o=9007199254740991,u="[object Arguments]",a="[object Array]",s="[object AsyncFunction]",i="[object Boolean]",r="[object Date]",n="[object Error]",h="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",w="[object Null]",S="[object Object]",O="[object Promise]",I="[object Proxy]",b="[object RegExp]",P="[object Set]",T="[object String]",R="[object Symbol]",v="[object Undefined]",k="[object WeakMap]",q="[object ArrayBuffer]",L="[object DataView]",$="[object Float32Array]",x="[object Float64Array]",N="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",te="[object Uint16Array]",de="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,we=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,Q={};Q[$]=Q[x]=Q[N]=Q[j]=Q[D]=Q[G]=Q[V]=Q[te]=Q[de]=!0,Q[u]=Q[a]=Q[q]=Q[i]=Q[L]=Q[r]=Q[n]=Q[h]=Q[y]=Q[m]=Q[S]=Q[b]=Q[P]=Q[T]=Q[k]=!1;var ge=typeof Be=="object"&&Be&&Be.Object===Object&&Be,_=typeof self=="object"&&self&&self.Object===Object&&self,E=ge||_||Function("return this")(),H=d&&!d.nodeType&&d,F=H&&!0&&e&&!e.nodeType&&e,ce=F&&F.exports===H,he=ce&&ge.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),_e=pe&&pe.isTypedArray;function Ee(C,U){for(var K=-1,le=C==null?0:C.length,Pe=0,Ae=[];++K<le;){var Fe=C[K];U(Fe,K,C)&&(Ae[Pe++]=Fe)}return Ae}function We(C,U){for(var K=-1,le=U.length,Pe=C.length;++K<le;)C[Pe+K]=U[K];return C}function Se(C,U){for(var K=-1,le=C==null?0:C.length;++K<le;)if(U(C[K],K,C))return!0;return!1}function Me(C,U){for(var K=-1,le=Array(C);++K<C;)le[K]=U(K);return le}function ct(C){return function(U){return C(U)}}function ot(C,U){return C.has(U)}function rt(C,U){return C==null?void 0:C[U]}function t(C){var U=-1,K=Array(C.size);return C.forEach(function(le,Pe){K[++U]=[Pe,le]}),K}function B(C,U){return function(K){return C(U(K))}}function W(C){var U=-1,K=Array(C.size);return C.forEach(function(le){K[++U]=le}),K}var ne=Array.prototype,Y=Function.prototype,re=Object.prototype,Z=E["__core-js_shared__"],ae=Y.toString,ue=re.hasOwnProperty,Te=function(){var C=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),Ce=re.toString,me=RegExp("^"+ae.call(ue).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=ce?E.Buffer:void 0,M=E.Symbol,z=E.Uint8Array,X=re.propertyIsEnumerable,J=ne.splice,oe=M?M.toStringTag:void 0,ee=Object.getOwnPropertySymbols,se=A?A.isBuffer:void 0,fe=B(Object.keys,Object),ye=Ft(E,"DataView"),Oe=Ft(E,"Map"),Ne=Ft(E,"Promise"),be=Ft(E,"Set"),Nt=Ft(E,"WeakMap"),Qe=Ft(Object,"create"),yt=At(ye),Cu=At(Oe),bu=At(Ne),Ou=At(be),Pu=At(Nt),Ao=M?M.prototype:void 0,Qr=Ao?Ao.valueOf:void 0;function wt(C){var U=-1,K=C==null?0:C.length;for(this.clear();++U<K;){var le=C[U];this.set(le[0],le[1])}}function Iu(){this.__data__=Qe?Qe(null):{},this.size=0}function Du(C){var U=this.has(C)&&delete this.__data__[C];return this.size-=U?1:0,U}function Nu(C){var U=this.__data__;if(Qe){var K=U[C];return K===c?void 0:K}return ue.call(U,C)?U[C]:void 0}function Fu(C){var U=this.__data__;return Qe?U[C]!==void 0:ue.call(U,C)}function xu(C,U){var K=this.__data__;return this.size+=this.has(C)?0:1,K[C]=Qe&&U===void 0?c:U,this}wt.prototype.clear=Iu,wt.prototype.delete=Du,wt.prototype.get=Nu,wt.prototype.has=Fu,wt.prototype.set=xu;function at(C){var U=-1,K=C==null?0:C.length;for(this.clear();++U<K;){var le=C[U];this.set(le[0],le[1])}}function Lu(){this.__data__=[],this.size=0}function Uu(C){var U=this.__data__,K=Rr(U,C);if(K<0)return!1;var le=U.length-1;return K==le?U.pop():J.call(U,K,1),--this.size,!0}function ku(C){var U=this.__data__,K=Rr(U,C);return K<0?void 0:U[K][1]}function qu(C){return Rr(this.__data__,C)>-1}function $u(C,U){var K=this.__data__,le=Rr(K,C);return le<0?(++this.size,K.push([C,U])):K[le][1]=U,this}at.prototype.clear=Lu,at.prototype.delete=Uu,at.prototype.get=ku,at.prototype.has=qu,at.prototype.set=$u;function _t(C){var U=-1,K=C==null?0:C.length;for(this.clear();++U<K;){var le=C[U];this.set(le[0],le[1])}}function Mu(){this.size=0,this.__data__={hash:new wt,map:new(Oe||at),string:new wt}}function Bu(C){var U=Sr(this,C).delete(C);return this.size-=U?1:0,U}function Hu(C){return Sr(this,C).get(C)}function ju(C){return Sr(this,C).has(C)}function Gu(C,U){var K=Sr(this,C),le=K.size;return K.set(C,U),this.size+=K.size==le?0:1,this}_t.prototype.clear=Mu,_t.prototype.delete=Bu,_t.prototype.get=Hu,_t.prototype.has=ju,_t.prototype.set=Gu;function Ar(C){var U=-1,K=C==null?0:C.length;for(this.__data__=new _t;++U<K;)this.add(C[U])}function Wu(C){return this.__data__.set(C,c),this}function Vu(C){return this.__data__.has(C)}Ar.prototype.add=Ar.prototype.push=Wu,Ar.prototype.has=Vu;function ft(C){var U=this.__data__=new at(C);this.size=U.size}function Yu(){this.__data__=new at,this.size=0}function zu(C){var U=this.__data__,K=U.delete(C);return this.size=U.size,K}function Xu(C){return this.__data__.get(C)}function Ju(C){return this.__data__.has(C)}function Ku(C,U){var K=this.__data__;if(K instanceof at){var le=K.__data__;if(!Oe||le.length<p-1)return le.push([C,U]),this.size=++K.size,this;K=this.__data__=new _t(le)}return K.set(C,U),this.size=K.size,this}ft.prototype.clear=Yu,ft.prototype.delete=zu,ft.prototype.get=Xu,ft.prototype.has=Ju,ft.prototype.set=Ku;function Qu(C,U){var K=Tr(C),le=!K&&hc(C),Pe=!K&&!le&&Zr(C),Ae=!K&&!le&&!Pe&&Do(C),Fe=K||le||Pe||Ae,xe=Fe?Me(C.length,String):[],Ue=xe.length;for(var De in C)ue.call(C,De)&&!(Fe&&(De=="length"||Pe&&(De=="offset"||De=="parent")||Ae&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||lc(De,Ue)))&&xe.push(De);return xe}function Rr(C,U){for(var K=C.length;K--;)if(bo(C[K][0],U))return K;return-1}function Zu(C,U,K){var le=U(C);return Tr(C)?le:We(le,K(C))}function jt(C){return C==null?C===void 0?v:w:oe&&oe in Object(C)?ac(C):dc(C)}function Ro(C){return Gt(C)&&jt(C)==u}function So(C,U,K,le,Pe){return C===U?!0:C==null||U==null||!Gt(C)&&!Gt(U)?C!==C&&U!==U:ec(C,U,K,le,So,Pe)}function ec(C,U,K,le,Pe,Ae){var Fe=Tr(C),xe=Tr(U),Ue=Fe?a:dt(C),De=xe?a:dt(U);Ue=Ue==u?S:Ue,De=De==u?S:De;var Ye=Ue==S,Ze=De==S,ke=Ue==De;if(ke&&Zr(C)){if(!Zr(U))return!1;Fe=!0,Ye=!1}if(ke&&!Ye)return Ae||(Ae=new ft),Fe||Do(C)?To(C,U,K,le,Pe,Ae):ic(C,U,Ue,K,le,Pe,Ae);if(!(K&f)){var Je=Ye&&ue.call(C,"__wrapped__"),Ke=Ze&&ue.call(U,"__wrapped__");if(Je||Ke){var ht=Je?C.value():C,st=Ke?U.value():U;return Ae||(Ae=new ft),Pe(ht,st,K,le,Ae)}}return ke?(Ae||(Ae=new ft),oc(C,U,K,le,Pe,Ae)):!1}function tc(C){if(!Io(C)||cc(C))return!1;var U=Oo(C)?me:we;return U.test(At(C))}function rc(C){return Gt(C)&&Po(C.length)&&!!Q[jt(C)]}function nc(C){if(!fc(C))return fe(C);var U=[];for(var K in Object(C))ue.call(C,K)&&K!="constructor"&&U.push(K);return U}function To(C,U,K,le,Pe,Ae){var Fe=K&f,xe=C.length,Ue=U.length;if(xe!=Ue&&!(Fe&&Ue>xe))return!1;var De=Ae.get(C);if(De&&Ae.get(U))return De==U;var Ye=-1,Ze=!0,ke=K&l?new Ar:void 0;for(Ae.set(C,U),Ae.set(U,C);++Ye<xe;){var Je=C[Ye],Ke=U[Ye];if(le)var ht=Fe?le(Ke,Je,Ye,U,C,Ae):le(Je,Ke,Ye,C,U,Ae);if(ht!==void 0){if(ht)continue;Ze=!1;break}if(ke){if(!Se(U,function(st,Rt){if(!ot(ke,Rt)&&(Je===st||Pe(Je,st,K,le,Ae)))return ke.push(Rt)})){Ze=!1;break}}else if(!(Je===Ke||Pe(Je,Ke,K,le,Ae))){Ze=!1;break}}return Ae.delete(C),Ae.delete(U),Ze}function ic(C,U,K,le,Pe,Ae,Fe){switch(K){case L:if(C.byteLength!=U.byteLength||C.byteOffset!=U.byteOffset)return!1;C=C.buffer,U=U.buffer;case q:return!(C.byteLength!=U.byteLength||!Ae(new z(C),new z(U)));case i:case r:case m:return bo(+C,+U);case n:return C.name==U.name&&C.message==U.message;case b:case T:return C==U+"";case y:var xe=t;case P:var Ue=le&f;if(xe||(xe=W),C.size!=U.size&&!Ue)return!1;var De=Fe.get(C);if(De)return De==U;le|=l,Fe.set(C,U);var Ye=To(xe(C),xe(U),le,Pe,Ae,Fe);return Fe.delete(C),Ye;case R:if(Qr)return Qr.call(C)==Qr.call(U)}return!1}function oc(C,U,K,le,Pe,Ae){var Fe=K&f,xe=Co(C),Ue=xe.length,De=Co(U),Ye=De.length;if(Ue!=Ye&&!Fe)return!1;for(var Ze=Ue;Ze--;){var ke=xe[Ze];if(!(Fe?ke in U:ue.call(U,ke)))return!1}var Je=Ae.get(C);if(Je&&Ae.get(U))return Je==U;var Ke=!0;Ae.set(C,U),Ae.set(U,C);for(var ht=Fe;++Ze<Ue;){ke=xe[Ze];var st=C[ke],Rt=U[ke];if(le)var No=Fe?le(Rt,st,ke,U,C,Ae):le(st,Rt,ke,C,U,Ae);if(!(No===void 0?st===Rt||Pe(st,Rt,K,le,Ae):No)){Ke=!1;break}ht||(ht=ke=="constructor")}if(Ke&&!ht){var Cr=C.constructor,br=U.constructor;Cr!=br&&"constructor"in C&&"constructor"in U&&!(typeof Cr=="function"&&Cr instanceof Cr&&typeof br=="function"&&br instanceof br)&&(Ke=!1)}return Ae.delete(C),Ae.delete(U),Ke}function Co(C){return Zu(C,gc,sc)}function Sr(C,U){var K=C.__data__;return uc(U)?K[typeof U=="string"?"string":"hash"]:K.map}function Ft(C,U){var K=rt(C,U);return tc(K)?K:void 0}function ac(C){var U=ue.call(C,oe),K=C[oe];try{C[oe]=void 0;var le=!0}catch{}var Pe=Ce.call(C);return le&&(U?C[oe]=K:delete C[oe]),Pe}var sc=ee?function(C){return C==null?[]:(C=Object(C),Ee(ee(C),function(U){return X.call(C,U)}))}:vc,dt=jt;(ye&&dt(new ye(new ArrayBuffer(1)))!=L||Oe&&dt(new Oe)!=y||Ne&&dt(Ne.resolve())!=O||be&&dt(new be)!=P||Nt&&dt(new Nt)!=k)&&(dt=function(C){var U=jt(C),K=U==S?C.constructor:void 0,le=K?At(K):"";if(le)switch(le){case yt:return L;case Cu:return y;case bu:return O;case Ou:return P;case Pu:return k}return U});function lc(C,U){return U=U??o,!!U&&(typeof C=="number"||ve.test(C))&&C>-1&&C%1==0&&C<U}function uc(C){var U=typeof C;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?C!=="__proto__":C===null}function cc(C){return!!Te&&Te in C}function fc(C){var U=C&&C.constructor,K=typeof U=="function"&&U.prototype||re;return C===K}function dc(C){return Ce.call(C)}function At(C){if(C!=null){try{return ae.call(C)}catch{}try{return C+""}catch{}}return""}function bo(C,U){return C===U||C!==C&&U!==U}var hc=Ro(function(){return arguments}())?Ro:function(C){return Gt(C)&&ue.call(C,"callee")&&!X.call(C,"callee")},Tr=Array.isArray;function pc(C){return C!=null&&Po(C.length)&&!Oo(C)}var Zr=se||Ec;function mc(C,U){return So(C,U)}function Oo(C){if(!Io(C))return!1;var U=jt(C);return U==h||U==g||U==s||U==I}function Po(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=o}function Io(C){var U=typeof C;return C!=null&&(U=="object"||U=="function")}function Gt(C){return C!=null&&typeof C=="object"}var Do=_e?ct(_e):rc;function gc(C){return pc(C)?Qu(C):nc(C)}function vc(){return[]}function Ec(){return!1}e.exports=mc}(gr,gr.exports)),gr.exports}var Ks;function Lf(){if(Ks)return Ut;Ks=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.DownloadedUpdateHelper=void 0,Ut.createTempUpdateFile=u;const e=Er,d=vt,p=xf(),c=Et(),f=Ie;let l=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return f.join(this.cacheDir,"pending")}async validateDownloadedPath(s,i,r,n){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return p(this.versionInfo,i)&&p(this.fileInfo.info,r.info)&&await(0,c.pathExists)(s)?s:null;const h=await this.getValidCachedUpdateFile(r,n);return h===null?null:(n.info(`Update has already been downloaded to ${s}).`),this._file=h,h)}async setDownloadedFile(s,i,r,n,h,g){this._file=s,this._packageFile=i,this.versionInfo=r,this.fileInfo=n,this._downloadedFileInfo={fileName:h,sha512:n.info.sha512,isAdminRightsRequired:n.info.isAdminRightsRequired===!0},g&&await(0,c.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,c.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,i){const r=this.getUpdateInfoFile();if(!await(0,c.pathExists)(r))return null;let h;try{h=await(0,c.readJson)(r)}catch(w){let S="No cached update info available";return w.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),S+=` (error on read: ${w.message})`),i.info(S),null}if(!((h==null?void 0:h.fileName)!==null))return i.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==h.sha512)return i.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${h.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=f.join(this.cacheDirForPendingUpdate,h.fileName);if(!await(0,c.pathExists)(y))return i.info("Cached update file doesn't exist"),null;const m=await o(y);return s.info.sha512!==m?(i.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=h,y)}getUpdateInfoFile(){return f.join(this.cacheDirForPendingUpdate,"update-info.json")}};Ut.DownloadedUpdateHelper=l;function o(a,s="sha512",i="base64",r){return new Promise((n,h)=>{const g=(0,e.createHash)(s);g.on("error",h).setEncoding(i),(0,d.createReadStream)(a,{...r,highWaterMark:1024*1024}).on("error",h).on("end",()=>{g.end(),n(g.read())}).pipe(g,{end:!1})})}async function u(a,s,i){let r=0,n=f.join(s,a);for(let h=0;h<3;h++)try{return await(0,c.unlink)(n),n}catch(g){if(g.code==="ENOENT")return n;i.warn(`Error on remove temp update file: ${g}`),n=f.join(s,`${r++}-${a}`)}return n}return Ut}var Xt={},$r={},Qs;function Uf(){if(Qs)return $r;Qs=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.getAppCacheDir=p;const e=Ie,d=jr;function p(){const c=(0,d.homedir)();let f;return process.platform==="win32"?f=process.env.LOCALAPPDATA||e.join(c,"AppData","Local"):process.platform==="darwin"?f=e.join(c,"Library","Caches"):f=process.env.XDG_CACHE_HOME||e.join(c,".cache"),f}return $r}var Zs;function kf(){if(Zs)return Xt;Zs=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.ElectronAppAdapter=void 0;const e=Ie,d=Uf();let p=class{constructor(f=gt.app){this.app=f}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?e.join(process.resourcesPath,"app-update.yml"):e.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(f){this.app.once("quit",(l,o)=>f(o))}};return Xt.ElectronAppAdapter=p,Xt}var Qi={},el;function qf(){return el||(el=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.NET_SESSION_NAME=void 0,e.getNetSession=p;const d=Le();e.NET_SESSION_NAME="electron-updater";function p(){return gt.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}class c extends d.HttpExecutor{constructor(l){super(),this.proxyLoginCallback=l,this.cachedSession=null}async download(l,o,u){return await u.cancellationToken.createPromise((a,s,i)=>{const r={headers:u.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(l,r),(0,d.configureRequestOptions)(r),this.doDownload(r,{destination:o,options:u,onCancel:i,callback:n=>{n==null?a(o):s(n)},responseHandler:null},0)})}createRequest(l,o){l.headers&&l.headers.Host&&(l.host=l.headers.Host,delete l.headers.Host),this.cachedSession==null&&(this.cachedSession=p());const u=gt.net.request({...l,session:this.cachedSession});return u.on("response",o),this.proxyLoginCallback!=null&&u.on("login",this.proxyLoginCallback),u}addRedirectHandlers(l,o,u,a,s){l.on("redirect",(i,r,n)=>{l.abort(),a>this.maxRedirects?u(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(n,o))})}}e.ElectronHttpExecutor=c}(Qi)),Qi}var Jt={},kt={},tl;function Pt(){if(tl)return kt;tl=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.newBaseUrl=d,kt.newUrlFromBase=p,kt.getChannelFilename=c;const e=nt;function d(f){const l=new e.URL(f);return l.pathname.endsWith("/")||(l.pathname+="/"),l}function p(f,l,o=!1){const u=new e.URL(f,l),a=l.search;return a!=null&&a.length!==0?u.search=a:o&&(u.search=`noCache=${Date.now().toString(32)}`),u}function c(f){return`${f}.yml`}return kt}var lt={},Zi,rl;function pu(){if(rl)return Zi;rl=1;var e="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,p=RegExp(d.source),c=typeof Be=="object"&&Be&&Be.Object===Object&&Be,f=typeof self=="object"&&self&&self.Object===Object&&self,l=c||f||Function("return this")(),o=Object.prototype,u=o.toString,a=l.Symbol,s=a?a.prototype:void 0,i=s?s.toString:void 0;function r(m){if(typeof m=="string")return m;if(h(m))return i?i.call(m):"";var w=m+"";return w=="0"&&1/m==-1/0?"-0":w}function n(m){return!!m&&typeof m=="object"}function h(m){return typeof m=="symbol"||n(m)&&u.call(m)==e}function g(m){return m==null?"":r(m)}function y(m){return m=g(m),m&&p.test(m)?m.replace(d,"\\$&"):m}return Zi=y,Zi}var nl;function Xe(){if(nl)return lt;nl=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.Provider=void 0,lt.findFile=o,lt.parseUpdateInfo=u,lt.getFileList=a,lt.resolveFiles=s;const e=Le(),d=co(),p=nt,c=Pt(),f=pu();let l=class{constructor(r){this.runtimeOptions=r,this.requestHeaders=null,this.executor=r.executor}getBlockMapFiles(r,n,h,g=null){const y=(0,c.newUrlFromBase)(`${r.pathname}.blockmap`,r);return[(0,c.newUrlFromBase)(`${r.pathname.replace(new RegExp(f(h),"g"),n)}.blockmap`,g?new p.URL(g):r),y]}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const r=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(r==="x64"?"":`-${r}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(r){return`${r}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(r){this.requestHeaders=r}httpRequest(r,n,h){return this.executor.request(this.createRequestOptions(r,n),h)}createRequestOptions(r,n){const h={};return this.requestHeaders==null?n!=null&&(h.headers=n):h.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,e.configureRequestUrl)(r,h),h}};lt.Provider=l;function o(i,r,n){var h;if(i.length===0)throw(0,e.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const g=i.filter(m=>m.url.pathname.toLowerCase().endsWith(`.${r.toLowerCase()}`)),y=(h=g.find(m=>[m.url.pathname,m.info.url].some(w=>w.includes(process.arch))))!==null&&h!==void 0?h:g.shift();return y||(n==null?i[0]:i.find(m=>!n.some(w=>m.url.pathname.toLowerCase().endsWith(`.${w.toLowerCase()}`))))}function u(i,r,n){if(i==null)throw(0,e.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let h;try{h=(0,d.load)(i)}catch(g){throw(0,e.newError)(`Cannot parse update info from ${r} in the latest release artifacts (${n}): ${g.stack||g.message}, rawData: ${i}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return h}function a(i){const r=i.files;if(r!=null&&r.length>0)return r;if(i.path!=null)return[{url:i.path,sha2:i.sha2,sha512:i.sha512}];throw(0,e.newError)(`No files provided: ${(0,e.safeStringifyJson)(i)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function s(i,r,n=h=>h){const g=a(i).map(w=>{if(w.sha2==null&&w.sha512==null)throw(0,e.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,e.safeStringifyJson)(w)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,c.newUrlFromBase)(n(w.url),r),info:w}}),y=i.packages,m=y==null?null:y[process.arch]||y.ia32;return m!=null&&(g[0].packageInfo={...m,path:(0,c.newUrlFromBase)(n(m.path),r).href}),g}return lt}var il;function mu(){if(il)return Jt;il=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.GenericProvider=void 0;const e=Le(),d=Pt(),p=Xe();let c=class extends p.Provider{constructor(l,o,u){super(u),this.configuration=l,this.updater=o,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const l=this.updater.channel||this.configuration.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=(0,d.getChannelFilename)(this.channel),o=(0,d.newUrlFromBase)(l,this.baseUrl,this.updater.isAddNoCacheQuery);for(let u=0;;u++)try{return(0,p.parseUpdateInfo)(await this.httpRequest(o),l,o)}catch(a){if(a instanceof e.HttpError&&a.statusCode===404)throw(0,e.newError)(`Cannot find channel "${l}" update info: ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(a.code==="ECONNREFUSED"&&u<3){await new Promise((s,i)=>{try{setTimeout(s,1e3*u)}catch(r){i(r)}});continue}throw a}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}};return Jt.GenericProvider=c,Jt}var Kt={},Qt={},ol;function $f(){if(ol)return Qt;ol=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.BitbucketProvider=void 0;const e=Le(),d=Pt(),p=Xe();let c=class extends p.Provider{constructor(l,o,u){super({...u,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=o;const{owner:a,slug:s}=l;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${a}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const l=new e.CancellationToken,o=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),u=(0,d.newUrlFromBase)(o,this.baseUrl,this.updater.isAddNoCacheQuery);try{const a=await this.httpRequest(u,void 0,l);return(0,p.parseUpdateInfo)(a,o,u)}catch(a){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}toString(){const{owner:l,slug:o}=this.configuration;return`Bitbucket (owner: ${l}, slug: ${o}, channel: ${this.channel})`}};return Qt.BitbucketProvider=c,Qt}var mt={},al;function gu(){if(al)return mt;al=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.GitHubProvider=mt.BaseGitHubProvider=void 0,mt.computeReleaseNotes=s;const e=Le(),d=hu(),p=nt,c=Pt(),f=Xe(),l=/\/tag\/([^/]+)$/;class o extends f.Provider{constructor(r,n,h){super({...h,isUseMultipleRangeRequest:!1}),this.options=r,this.baseUrl=(0,c.newBaseUrl)((0,e.githubUrl)(r,n));const g=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,c.newBaseUrl)((0,e.githubUrl)(r,g))}computeGithubBasePath(r){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${r}`:r}}mt.BaseGitHubProvider=o;let u=class extends o{constructor(r,n,h){super(r,"github.com",h),this.options=r,this.updater=n}get channel(){const r=this.updater.channel||this.options.channel;return r==null?this.getDefaultChannelName():this.getCustomChannelName(r)}async getLatestVersion(){var r,n,h,g,y;const m=new e.CancellationToken,w=await this.httpRequest((0,c.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),S=(0,e.parseXml)(w);let O=S.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const k=((r=this.updater)===null||r===void 0?void 0:r.channel)||((n=d.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(k===null)I=l.exec(O.element("link").attribute("href"))[1];else for(const q of S.getElements("entry")){const L=l.exec(q.element("link").attribute("href"));if(L===null)continue;const $=L[1],x=((h=d.prerelease($))===null||h===void 0?void 0:h[0])||null,N=!k||["alpha","beta"].includes(k),j=x!==null&&!["alpha","beta"].includes(String(x));if(N&&!j&&!(k==="beta"&&x==="alpha")){I=$;break}if(x&&x===k){I=$;break}}}else{I=await this.getLatestTagName(m);for(const k of S.getElements("entry"))if(l.exec(k.element("link").attribute("href"))[1]===I){O=k;break}}}catch(k){throw(0,e.newError)(`Cannot parse releases feed: ${k.stack||k.message},
XML:
${w}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,e.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let b,P="",T="";const R=async k=>{P=(0,c.getChannelFilename)(k),T=(0,c.newUrlFromBase)(this.getBaseDownloadPath(String(I),P),this.baseUrl);const q=this.createRequestOptions(T);try{return await this.executor.request(q,m)}catch(L){throw L instanceof e.HttpError&&L.statusCode===404?(0,e.newError)(`Cannot find ${P} in the latest release artifacts (${T}): ${L.stack||L.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):L}};try{let k=this.channel;this.updater.allowPrerelease&&(!((g=d.prerelease(I))===null||g===void 0)&&g[0])&&(k=this.getCustomChannelName(String((y=d.prerelease(I))===null||y===void 0?void 0:y[0]))),b=await R(k)}catch(k){if(this.updater.allowPrerelease)b=await R(this.getDefaultChannelName());else throw k}const v=(0,f.parseUpdateInfo)(b,P,T);return v.releaseName==null&&(v.releaseName=O.elementValueOrEmpty("title")),v.releaseNotes==null&&(v.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,S,O)),{tag:I,...v}}async getLatestTagName(r){const n=this.options,h=n.host==null||n.host==="github.com"?(0,c.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new p.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(h,{Accept:"application/json"},r);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,e.newError)(`Unable to find latest version on GitHub (${h}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(r){return(0,f.resolveFiles)(r,this.baseUrl,n=>this.getBaseDownloadPath(r.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(r,n){return`${this.basePath}/download/${r}/${n}`}};mt.GitHubProvider=u;function a(i){const r=i.elementValueOrEmpty("content");return r==="No content."?"":r}function s(i,r,n,h){if(!r)return a(h);const g=[];for(const y of n.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(i,m)&&g.push({version:m,note:a(y)})}return g.sort((y,m)=>d.rcompare(y.version,m.version))}return mt}var Zt={},sl;function Mf(){if(sl)return Zt;sl=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.GitLabProvider=void 0;const e=Le(),d=nt,p=pu(),c=Pt(),f=Xe();let l=class extends f.Provider{normalizeFilename(u){return u.replace(/ |_/g,"-")}constructor(u,a,s){super({...s,isUseMultipleRangeRequest:!1}),this.options=u,this.updater=a,this.cachedLatestVersion=null;const r=u.host||"gitlab.com";this.baseApiUrl=(0,c.newBaseUrl)(`https://${r}/api/v4`)}get channel(){const u=this.updater.channel||this.options.channel;return u==null?this.getDefaultChannelName():this.getCustomChannelName(u)}async getLatestVersion(){const u=new e.CancellationToken,a=(0,c.newUrlFromBase)(`projects/${this.options.projectId}/releases/permalink/latest`,this.baseApiUrl);let s;try{const S={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},O=await this.httpRequest(a,S,u);if(!O)throw(0,e.newError)("No latest release found","ERR_UPDATER_NO_PUBLISHED_VERSIONS");s=JSON.parse(O)}catch(S){throw(0,e.newError)(`Unable to find latest release on GitLab (${a}): ${S.stack||S.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}const i=s.tag_name;let r=null,n="",h=null;const g=async S=>{n=(0,c.getChannelFilename)(S);const O=s.assets.links.find(b=>b.name===n);if(!O)throw(0,e.newError)(`Cannot find ${n} in the latest release assets`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");h=new d.URL(O.direct_asset_url);const I=this.options.token?{"PRIVATE-TOKEN":this.options.token}:void 0;try{const b=await this.httpRequest(h,I,u);if(!b)throw(0,e.newError)(`Empty response from ${h}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");return b}catch(b){throw b instanceof e.HttpError&&b.statusCode===404?(0,e.newError)(`Cannot find ${n} in the latest release artifacts (${h}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{r=await g(this.channel)}catch(S){if(this.channel!==this.getDefaultChannelName())r=await g(this.getDefaultChannelName());else throw S}if(!r)throw(0,e.newError)(`Unable to parse channel data from ${n}`,"ERR_UPDATER_INVALID_UPDATE_INFO");const y=(0,f.parseUpdateInfo)(r,n,h);y.releaseName==null&&(y.releaseName=s.name),y.releaseNotes==null&&(y.releaseNotes=s.description||null);const m=new Map;for(const S of s.assets.links)m.set(this.normalizeFilename(S.name),S.direct_asset_url);const w={tag:i,assets:m,...y};return this.cachedLatestVersion=w,w}convertAssetsToMap(u){const a=new Map;for(const s of u.links)a.set(this.normalizeFilename(s.name),s.direct_asset_url);return a}findBlockMapInAssets(u,a){const s=[`${a}.blockmap`,`${this.normalizeFilename(a)}.blockmap`];for(const i of s){const r=u.get(i);if(r)return new d.URL(r)}return null}async fetchReleaseInfoByVersion(u){const a=new e.CancellationToken,s=[`v${u}`,u];for(const i of s){const r=(0,c.newUrlFromBase)(`projects/${this.options.projectId}/releases/${encodeURIComponent(i)}`,this.baseApiUrl);try{const n={"Content-Type":"application/json",...this.setAuthHeaderForToken(this.options.token||null)},h=await this.httpRequest(r,n,a);if(h)return JSON.parse(h)}catch(n){if(n instanceof e.HttpError&&n.statusCode===404)continue;throw(0,e.newError)(`Unable to find release ${i} on GitLab (${r}): ${n.stack||n.message}`,"ERR_UPDATER_RELEASE_NOT_FOUND")}}throw(0,e.newError)(`Unable to find release with version ${u} (tried: ${s.join(", ")}) on GitLab`,"ERR_UPDATER_RELEASE_NOT_FOUND")}setAuthHeaderForToken(u){const a={};return u!=null&&(u.startsWith("Bearer")?a.authorization=u:a["PRIVATE-TOKEN"]=u),a}async getVersionInfoForBlockMap(u){if(this.cachedLatestVersion&&this.cachedLatestVersion.version===u)return this.cachedLatestVersion.assets;const a=await this.fetchReleaseInfoByVersion(u);return a&&a.assets?this.convertAssetsToMap(a.assets):null}async findBlockMapUrlsFromAssets(u,a,s){let i=null,r=null;const n=await this.getVersionInfoForBlockMap(a);n&&(i=this.findBlockMapInAssets(n,s));const h=await this.getVersionInfoForBlockMap(u);if(h){const g=s.replace(new RegExp(p(a),"g"),u);r=this.findBlockMapInAssets(h,g)}return[r,i]}async getBlockMapFiles(u,a,s,i=null){if(this.options.uploadTarget==="project_upload"){const r=u.pathname.split("/").pop()||"",[n,h]=await this.findBlockMapUrlsFromAssets(a,s,r);if(!h)throw(0,e.newError)(`Cannot find blockmap file for ${s} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");if(!n)throw(0,e.newError)(`Cannot find blockmap file for ${a} in GitLab assets`,"ERR_UPDATER_BLOCKMAP_FILE_NOT_FOUND");return[n,h]}else return super.getBlockMapFiles(u,a,s,i)}resolveFiles(u){return(0,f.getFileList)(u).map(a=>{const i=[a.url,this.normalizeFilename(a.url)].find(n=>u.assets.has(n)),r=i?u.assets.get(i):void 0;if(!r)throw(0,e.newError)(`Cannot find asset "${a.url}" in GitLab release assets. Available assets: ${Array.from(u.assets.keys()).join(", ")}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new d.URL(r),info:a}})}toString(){return`GitLab (projectId: ${this.options.projectId}, channel: ${this.channel})`}};return Zt.GitLabProvider=l,Zt}var er={},ll;function Bf(){if(ll)return er;ll=1,Object.defineProperty(er,"__esModule",{value:!0}),er.KeygenProvider=void 0;const e=Le(),d=Pt(),p=Xe();let c=class extends p.Provider{constructor(l,o,u){super({...u,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=o,this.defaultHostname="api.keygen.sh";const a=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${a}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const l=new e.CancellationToken,o=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),u=(0,d.newUrlFromBase)(o,this.baseUrl,this.updater.isAddNoCacheQuery);try{const a=await this.httpRequest(u,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},l);return(0,p.parseUpdateInfo)(a,o,u)}catch(a){throw(0,e.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,p.resolveFiles)(l,this.baseUrl)}toString(){const{account:l,product:o,platform:u}=this.configuration;return`Keygen (account: ${l}, product: ${o}, platform: ${u}, channel: ${this.channel})`}};return er.KeygenProvider=c,er}var tr={},ul;function Hf(){if(ul)return tr;ul=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.PrivateGitHubProvider=void 0;const e=Le(),d=co(),p=Ie,c=nt,f=Pt(),l=gu(),o=Xe();let u=class extends l.BaseGitHubProvider{constructor(s,i,r,n){super(s,"api.github.com",n),this.updater=i,this.token=r}createRequestOptions(s,i){const r=super.createRequestOptions(s,i);return r.redirect="manual",r}async getLatestVersion(){const s=new e.CancellationToken,i=(0,f.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(s),n=r.assets.find(y=>y.name===i);if(n==null)throw(0,e.newError)(`Cannot find ${i} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const h=new c.URL(n.url);let g;try{g=(0,d.load)(await this.httpRequest(h,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof e.HttpError&&y.statusCode===404?(0,e.newError)(`Cannot find ${i} in the latest release artifacts (${h}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=r.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const i=this.updater.allowPrerelease;let r=this.basePath;i||(r=`${r}/latest`);const n=(0,f.newUrlFromBase)(r,this.baseUrl);try{const h=JSON.parse(await this.httpRequest(n,this.configureHeaders("application/vnd.github.v3+json"),s));return i?h.find(g=>g.prerelease)||h[0]:h}catch(h){throw(0,e.newError)(`Unable to find latest version on GitHub (${n}), please ensure a production release exists: ${h.stack||h.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,o.getFileList)(s).map(i=>{const r=p.posix.basename(i.url).replace(/ /g,"-"),n=s.assets.find(h=>h!=null&&h.name===r);if(n==null)throw(0,e.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new c.URL(n.url),info:i}})}};return tr.PrivateGitHubProvider=u,tr}var cl;function jf(){if(cl)return Kt;cl=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.isUrlProbablySupportMultiRangeRequests=u,Kt.createClient=a;const e=Le(),d=$f(),p=mu(),c=gu(),f=Mf(),l=Bf(),o=Hf();function u(s){return!s.includes("s3.amazonaws.com")}function a(s,i,r){if(typeof s=="string")throw(0,e.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const n=s.provider;switch(n){case"github":{const h=s,g=(h.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||h.token;return g==null?new c.GitHubProvider(h,i,r):new o.PrivateGitHubProvider(h,i,g,r)}case"bitbucket":return new d.BitbucketProvider(s,i,r);case"gitlab":return new f.GitLabProvider(s,i,r);case"keygen":return new l.KeygenProvider(s,i,r);case"s3":case"spaces":return new p.GenericProvider({provider:"generic",url:(0,e.getS3LikeProviderBaseUrl)(s),channel:s.channel||null},i,{...r,isUseMultipleRangeRequest:!1});case"generic":{const h=s;return new p.GenericProvider(h,i,{...r,isUseMultipleRangeRequest:h.useMultipleRangeRequest!==!1&&u(h.url)})}case"custom":{const h=s,g=h.updateProvider;if(!g)throw(0,e.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new g(h,i,r)}default:throw(0,e.newError)(`Unsupported provider: ${n}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Kt}var rr={},nr={},qt={},$t={},fl;function Eo(){if(fl)return $t;fl=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.OperationKind=void 0,$t.computeOperations=d;var e;(function(o){o[o.COPY=0]="COPY",o[o.DOWNLOAD=1]="DOWNLOAD"})(e||($t.OperationKind=e={}));function d(o,u,a){const s=l(o.files),i=l(u.files);let r=null;const n=u.files[0],h=[],g=n.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const m=i.get(g);let w=0;const{checksumToOffset:S,checksumToOldSize:O}=f(s.get(g),y.offset,a);let I=n.offset;for(let b=0;b<m.checksums.length;I+=m.sizes[b],b++){const P=m.sizes[b],T=m.checksums[b];let R=S.get(T);R!=null&&O.get(T)!==P&&(a.warn(`Checksum ("${T}") matches, but size differs (old: ${O.get(T)}, new: ${P})`),R=void 0),R===void 0?(w++,r!=null&&r.kind===e.DOWNLOAD&&r.end===I?r.end+=P:(r={kind:e.DOWNLOAD,start:I,end:I+P},c(r,h,T,b))):r!=null&&r.kind===e.COPY&&r.end===R?r.end+=P:(r={kind:e.COPY,start:R,end:R+P},c(r,h,T,b))}return w>0&&a.info(`File${n.name==="file"?"":" "+n.name} has ${w} changed blocks`),h}const p=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function c(o,u,a,s){if(p&&u.length!==0){const i=u[u.length-1];if(i.kind===o.kind&&o.start<i.end&&o.start>i.start){const r=[i.start,i.end,o.start,o.end].reduce((n,h)=>n<h?n:h);throw new Error(`operation (block index: ${s}, checksum: ${a}, kind: ${e[o.kind]}) overlaps previous operation (checksum: ${a}):
abs: ${i.start} until ${i.end} and ${o.start} until ${o.end}
rel: ${i.start-r} until ${i.end-r} and ${o.start-r} until ${o.end-r}`)}}u.push(o)}function f(o,u,a){const s=new Map,i=new Map;let r=u;for(let n=0;n<o.checksums.length;n++){const h=o.checksums[n],g=o.sizes[n],y=i.get(h);if(y===void 0)s.set(h,r),i.set(h,g);else if(a.debug!=null){const m=y===g?"(same size)":`(size: ${y}, this size: ${g})`;a.debug(`${h} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}r+=g}return{checksumToOffset:s,checksumToOldSize:i}}function l(o){const u=new Map;for(const a of o)u.set(a.name,a);return u}return $t}var dl;function vu(){if(dl)return qt;dl=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.DataSplitter=void 0,qt.copyData=o;const e=Le(),d=vt,p=vr,c=Eo(),f=Buffer.from(`\r
\r
`);var l;(function(a){a[a.INIT=0]="INIT",a[a.HEADER=1]="HEADER",a[a.BODY=2]="BODY"})(l||(l={}));function o(a,s,i,r,n){const h=(0,d.createReadStream)("",{fd:i,autoClose:!1,start:a.start,end:a.end-1});h.on("error",r),h.once("end",n),h.pipe(s,{end:!1})}let u=class extends p.Writable{constructor(s,i,r,n,h,g){super(),this.out=s,this.options=i,this.partIndexToTaskIndex=r,this.partIndexToLength=h,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=l.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=n.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,i,r){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(r).catch(r)}async handleData(s){let i=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,e.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=r,i=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=r,await this.processPartData(s,0,r),i=r}if(i!==s.length){if(this.readState===l.HEADER){const r=this.searchHeaderListEnd(s,i);if(r===-1)return;i=r,this.readState=l.BODY,this.headerListBuffer=null}for(;;){if(this.readState===l.BODY)this.readState=l.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,e.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,e.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(i=this.searchHeaderListEnd(s,i),i===-1){this.readState=l.HEADER;return}}const r=this.partIndexToLength[this.partIndex],n=i+r,h=Math.min(n,s.length);if(await this.processPartStarted(s,i,h),this.remainingPartDataCount=r-(h-i),this.remainingPartDataCount>0)return;if(i=n+this.boundaryLength,i>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-n);return}}}}copyExistingData(s,i){return new Promise((r,n)=>{const h=()=>{if(s===i){r();return}const g=this.options.tasks[s];if(g.kind!==c.OperationKind.COPY){n(new Error("Task kind must be COPY"));return}o(g,this.out,this.options.oldFileFd,n,()=>{s++,h()})};h()})}searchHeaderListEnd(s,i){const r=s.indexOf(f,i);if(r!==-1)return r+f.length;const n=i===0?s:s.slice(i);return this.headerListBuffer==null?this.headerListBuffer=n:this.headerListBuffer=Buffer.concat([this.headerListBuffer,n]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,e.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,i,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,i,r)}processPartData(s,i,r){this.actualPartLength+=r-i;const n=this.out;return n.write(i===0&&s.length===r?s:s.slice(i,r))?Promise.resolve():new Promise((h,g)=>{n.on("error",g),n.once("drain",()=>{n.removeListener("error",g),h()})})}};return qt.DataSplitter=u,qt}var ir={},hl;function Gf(){if(hl)return ir;hl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.executeTasksUsingMultipleRangeRequests=c,ir.checkIsRangesSupported=l;const e=Le(),d=vu(),p=Eo();function c(o,u,a,s,i){const r=n=>{if(n>=u.length){o.fileMetadataBuffer!=null&&a.write(o.fileMetadataBuffer),a.end();return}const h=n+1e3;f(o,{tasks:u,start:n,end:Math.min(u.length,h),oldFileFd:s},a,()=>r(h),i)};return r}function f(o,u,a,s,i){let r="bytes=",n=0;const h=new Map,g=[];for(let w=u.start;w<u.end;w++){const S=u.tasks[w];S.kind===p.OperationKind.DOWNLOAD&&(r+=`${S.start}-${S.end-1}, `,h.set(n,w),n++,g.push(S.end-S.start))}if(n<=1){const w=S=>{if(S>=u.end){s();return}const O=u.tasks[S++];if(O.kind===p.OperationKind.COPY)(0,d.copyData)(O,a,u.oldFileFd,i,()=>w(S));else{const I=o.createRequestOptions();I.headers.Range=`bytes=${O.start}-${O.end-1}`;const b=o.httpExecutor.createRequest(I,P=>{P.on("error",i),l(P,i)&&(P.pipe(a,{end:!1}),P.once("end",()=>w(S)))});o.httpExecutor.addErrorAndTimeoutHandlers(b,i),b.end()}};w(u.start);return}const y=o.createRequestOptions();y.headers.Range=r.substring(0,r.length-2);const m=o.httpExecutor.createRequest(y,w=>{if(!l(w,i))return;const S=(0,e.safeGetHeader)(w,"content-type"),O=/^multipart\/.+?\s*;\s*boundary=(?:"([^"]+)"|([^\s";]+))\s*$/i.exec(S);if(O==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${S}"`));return}const I=new d.DataSplitter(a,u,h,O[1]||O[2],g,s);I.on("error",i),w.pipe(I),w.on("end",()=>{setTimeout(()=>{m.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});o.httpExecutor.addErrorAndTimeoutHandlers(m,i),m.end()}function l(o,u){if(o.statusCode>=400)return u((0,e.createHttpError)(o)),!1;if(o.statusCode!==206){const a=(0,e.safeGetHeader)(o,"accept-ranges");if(a==null||a==="none")return u(new Error(`Server doesn't support Accept-Ranges (response code ${o.statusCode})`)),!1}return!0}return ir}var or={},pl;function Wf(){if(pl)return or;pl=1,Object.defineProperty(or,"__esModule",{value:!0}),or.ProgressDifferentialDownloadCallbackTransform=void 0;const e=vr;var d;(function(c){c[c.COPY=0]="COPY",c[c.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let p=class extends e.Transform{constructor(f,l,o){super(),this.progressDifferentialDownloadInfo=f,this.cancellationToken=l,this.onProgress=o,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(f,l,o){if(this.cancellationToken.cancelled){o(new Error("cancelled"),null);return}if(this.operationType==d.COPY){o(null,f);return}this.transferred+=f.length,this.delta+=f.length;const u=Date.now();u>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=u+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((u-this.start)/1e3))}),this.delta=0),o(null,f)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,f(null)}};return or.ProgressDifferentialDownloadCallbackTransform=p,or}var ml;function Eu(){if(ml)return nr;ml=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.DifferentialDownloader=void 0;const e=Le(),d=Et(),p=vt,c=vu(),f=nt,l=Eo(),o=Gf(),u=Wf();let a=class{constructor(n,h,g){this.blockAwareFileInfo=n,this.httpExecutor=h,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const n={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,e.configureRequestUrl)(this.options.newUrl,n),(0,e.configureRequestOptions)(n),n}doDownload(n,h){if(n.version!==h.version)throw new Error(`version is different (${n.version} - ${h.version}), full download is required`);const g=this.logger,y=(0,l.computeOperations)(n,h,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let m=0,w=0;for(const O of y){const I=O.end-O.start;O.kind===l.OperationKind.DOWNLOAD?m+=I:w+=I}const S=this.blockAwareFileInfo.size;if(m+w+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==S)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${w}, newSize: ${S}`);return g.info(`Full: ${s(S)}, To download: ${s(m)} (${Math.round(m/(S/100))}%)`),this.downloadFile(y)}downloadFile(n){const h=[],g=()=>Promise.all(h.map(y=>(0,d.close)(y.descriptor).catch(m=>{this.logger.error(`cannot close file "${y.path}": ${m}`)})));return this.doDownloadFile(n,h).then(g).catch(y=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(w){try{console.error(w)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(n,h){const g=await(0,d.open)(this.options.oldFile,"r");h.push({descriptor:g,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");h.push({descriptor:y,path:this.options.newFile});const m=(0,p.createWriteStream)(this.options.newFile,{fd:y});await new Promise((w,S)=>{const O=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const L=[];let $=0;for(const N of n)N.kind===l.OperationKind.DOWNLOAD&&(L.push(N.end-N.start),$+=N.end-N.start);const x={expectedByteCounts:L,grandTotal:$};I=new u.ProgressDifferentialDownloadCallbackTransform(x,this.options.cancellationToken,this.options.onProgress),O.push(I)}const b=new e.DigestTransform(this.blockAwareFileInfo.sha512);b.isValidateOnEnd=!1,O.push(b),m.on("finish",()=>{m.close(()=>{h.splice(1,1);try{b.validate()}catch(L){S(L);return}w(void 0)})}),O.push(m);let P=null;for(const L of O)L.on("error",S),P==null?P=L:P=P.pipe(L);const T=O[0];let R;if(this.options.isUseMultipleRangeRequest){R=(0,o.executeTasksUsingMultipleRangeRequests)(this,n,T,g,S),R(0);return}let v=0,k=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const q=this.createRequestOptions();q.redirect="manual",R=L=>{var $,x;if(L>=n.length){this.fileMetadataBuffer!=null&&T.write(this.fileMetadataBuffer),T.end();return}const N=n[L++];if(N.kind===l.OperationKind.COPY){I&&I.beginFileCopy(),(0,c.copyData)(N,T,g,S,()=>R(L));return}const j=`bytes=${N.start}-${N.end-1}`;q.headers.range=j,(x=($=this.logger)===null||$===void 0?void 0:$.debug)===null||x===void 0||x.call($,`download range: ${j}`),I&&I.beginRangeDownload();const D=this.httpExecutor.createRequest(q,G=>{G.on("error",S),G.on("aborted",()=>{S(new Error("response has been aborted by the server"))}),G.statusCode>=400&&S((0,e.createHttpError)(G)),G.pipe(T,{end:!1}),G.once("end",()=>{I&&I.endRangeDownload(),++v===100?(v=0,setTimeout(()=>R(L),1e3)):R(L)})});D.on("redirect",(G,V,te)=>{this.logger.info(`Redirect to ${i(te)}`),k=te,(0,e.configureRequestUrl)(new f.URL(k),q),D.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(D,S),D.end()},R(0)})}async readRemoteBytes(n,h){const g=Buffer.allocUnsafe(h+1-n),y=this.createRequestOptions();y.headers.range=`bytes=${n}-${h}`;let m=0;if(await this.request(y,w=>{w.copy(g,m),m+=w.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(n,h){return new Promise((g,y)=>{const m=this.httpExecutor.createRequest(n,w=>{(0,o.checkIsRangesSupported)(w,y)&&(w.on("error",y),w.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),w.on("data",h),w.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,y),m.end()})}};nr.DifferentialDownloader=a;function s(r,n=" KB"){return new Intl.NumberFormat("en").format((r/1024).toFixed(2))+n}function i(r){const n=r.indexOf("?");return n<0?r:r.substring(0,n)}return nr}var gl;function Vf(){if(gl)return rr;gl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.GenericDifferentialDownloader=void 0;const e=Eu();let d=class extends e.DifferentialDownloader{download(c,f){return this.doDownload(c,f)}};return rr.GenericDifferentialDownloader=d,rr}var eo={},vl;function It(){return vl||(vl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.CancellationToken=void 0,e.addHandler=c;const d=Le();Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class p{constructor(l){this.emitter=l}login(l){c(this.emitter,"login",l)}progress(l){c(this.emitter,e.DOWNLOAD_PROGRESS,l)}updateDownloaded(l){c(this.emitter,e.UPDATE_DOWNLOADED,l)}updateCancelled(l){c(this.emitter,"update-cancelled",l)}}e.UpdaterSignal=p;function c(f,l,o){f.on(l,o)}}(eo)),eo}var El;function yo(){if(El)return St;El=1,Object.defineProperty(St,"__esModule",{value:!0}),St.NoOpLogger=St.AppUpdater=void 0;const e=Le(),d=Er,p=jr,c=Ml,f=Et(),l=co(),o=uf(),u=Ie,a=hu(),s=Lf(),i=kf(),r=qf(),n=mu(),h=jf(),g=Hl,y=Vf(),m=It();let w=class yu extends c.EventEmitter{get channel(){return this._channel}set channel(b){if(this._channel!=null){if(typeof b!="string")throw(0,e.newError)(`Channel must be a string, but got: ${b}`,"ERR_UPDATER_INVALID_CHANNEL");if(b.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=b,this.allowDowngrade=!0}addAuthHeader(b){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:b})}get netSession(){return(0,r.getNetSession)()}get logger(){return this._logger}set logger(b){this._logger=b??new O}set updateConfigPath(b){this.clientPromise=null,this._appUpdateConfigPath=b,this.configOnDisk=new o.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(b){b&&(this._isUpdateSupported=b)}get isUserWithinRollout(){return this._isUserWithinRollout}set isUserWithinRollout(b){b&&(this._isUserWithinRollout=b)}constructor(b,P){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this.previousBlockmapBaseUrlOverride=null,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new m.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=v=>this.checkIfUpdateSupported(v),this._isUserWithinRollout=v=>this.isStagingMatch(v),this.clientPromise=null,this.stagingUserIdPromise=new o.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new o.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",v=>{this._logger.error(`Error: ${v.stack||v.message}`)}),P==null?(this.app=new i.ElectronAppAdapter,this.httpExecutor=new r.ElectronHttpExecutor((v,k)=>this.emit("login",v,k))):(this.app=P,this.httpExecutor=null);const T=this.app.version,R=(0,a.parse)(T);if(R==null)throw(0,e.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=R,this.allowPrerelease=S(R),b!=null&&(this.setFeedURL(b),typeof b!="string"&&b.requestHeaders&&(this.requestHeaders=b.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(b){const P=this.createProviderRuntimeOptions();let T;typeof b=="string"?T=new n.GenericProvider({provider:"generic",url:b},this,{...P,isUseMultipleRangeRequest:(0,h.isUrlProbablySupportMultiRangeRequests)(b)}):T=(0,h.createClient)(b,this,P),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let b=this.checkForUpdatesPromise;if(b!=null)return this._logger.info("Checking for update (already in progress)"),b;const P=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),b=this.doCheckForUpdates().then(T=>(P(),T)).catch(T=>{throw P(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=b,b}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(b){return this.checkForUpdates().then(P=>P!=null&&P.downloadPromise?(P.downloadPromise.then(()=>{const T=yu.formatDownloadNotification(P.updateInfo.version,this.app.name,b);new gt.Notification(T).show()}),P):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),P))}static formatDownloadNotification(b,P,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",P).replace("{version}",b),body:T.body.replace("{appName}",P).replace("{version}",b)},T}async isStagingMatch(b){const P=b.stagingPercentage;let T=P;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${P}`),!0;T=T/100;const R=await this.stagingUserIdPromise.value,k=e.UUID.parse(R).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${k}, user id: ${R}`),k<T}computeFinalHeaders(b){return this.requestHeaders!=null&&Object.assign(b,this.requestHeaders),b}async isUpdateAvailable(b){const P=(0,a.parse)(b.version);if(P==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${b.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,a.eq)(P,T)||!await Promise.resolve(this.isUpdateSupported(b))||!await Promise.resolve(this.isUserWithinRollout(b)))return!1;const v=(0,a.gt)(P,T),k=(0,a.lt)(P,T);return v?!0:this.allowDowngrade&&k}checkIfUpdateSupported(b){const P=b==null?void 0:b.minimumSystemVersion,T=(0,p.release)();if(P)try{if((0,a.lt)(T,P))return this._logger.info(`Current OS version ${T} is less than the minimum OS version required ${P} for version ${T}`),!1}catch(R){this._logger.warn(`Failed to compare current OS version(${T}) with minimum OS version(${P}): ${(R.message||R).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,h.createClient)(T,this,this.createProviderRuntimeOptions())));const b=await this.clientPromise,P=await this.stagingUserIdPromise.value;return b.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":P})),{info:await b.getLatestVersion(),provider:b}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const b=await this.getUpdateInfoAndProvider(),P=b.info;if(!await this.isUpdateAvailable(P))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${P.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",P),{isUpdateAvailable:!1,versionInfo:P,updateInfo:P};this.updateInfoAndProvider=b,this.onUpdateAvailable(P);const T=new e.CancellationToken;return{isUpdateAvailable:!0,versionInfo:P,updateInfo:P,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(b){this._logger.info(`Found version ${b.version} (url: ${(0,e.asArray)(b.files).map(P=>P.url).join(", ")})`),this.emit("update-available",b)}downloadUpdate(b=new e.CancellationToken){const P=this.updateInfoAndProvider;if(P==null){const R=new Error("Please check update first");return this.dispatchError(R),Promise.reject(R)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,e.asArray)(P.info.files).map(R=>R.url).join(", ")}`);const T=R=>{if(!(R instanceof e.CancellationError))try{this.dispatchError(R)}catch(v){this._logger.warn(`Cannot dispatch error event: ${v.stack||v}`)}return R};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:P,requestHeaders:this.computeRequestHeaders(P.provider),cancellationToken:b,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(R=>{throw T(R)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(b){this.emit("error",b,(b.stack||b).toString())}dispatchUpdateDownloaded(b){this.emit(m.UPDATE_DOWNLOADED,b)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,l.load)(await(0,f.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(b){const P=b.fileExtraDownloadHeaders;if(P!=null){const T=this.requestHeaders;return T==null?P:{...P,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const b=u.join(this.app.userDataPath,".updaterId");try{const T=await(0,f.readFile)(b,"utf-8");if(e.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const P=e.UUID.v5((0,d.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${P}`);try{await(0,f.outputFile)(b,P)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return P}get isAddNoCacheQuery(){const b=this.requestHeaders;if(b==null)return!0;for(const P of Object.keys(b)){const T=P.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let b=this.downloadedUpdateHelper;if(b==null){const P=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;P==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const R=u.join(this.app.baseCachePath,P||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${R}`),b=new s.DownloadedUpdateHelper(R),this.downloadedUpdateHelper=b}return b}async executeDownload(b){const P=b.fileInfo,T={headers:b.downloadUpdateOptions.requestHeaders,cancellationToken:b.downloadUpdateOptions.cancellationToken,sha2:P.info.sha2,sha512:P.info.sha512};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ie=>this.emit(m.DOWNLOAD_PROGRESS,ie));const R=b.downloadUpdateOptions.updateInfoAndProvider.info,v=R.version,k=P.packageInfo;function q(){const ie=decodeURIComponent(b.fileInfo.url.pathname);return ie.toLowerCase().endsWith(`.${b.fileExtension.toLowerCase()}`)?u.basename(ie):b.fileInfo.info.url}const L=await this.getOrCreateDownloadHelper(),$=L.cacheDirForPendingUpdate;await(0,f.mkdir)($,{recursive:!0});const x=q();let N=u.join($,x);const j=k==null?null:u.join($,`package-${v}${u.extname(k.path)||".7z"}`),D=async ie=>{await L.setDownloadedFile(N,j,R,P,x,ie),await b.done({...R,downloadedFile:N});const we=u.join($,"current.blockmap");return await(0,f.pathExists)(we)&&await(0,f.copyFile)(we,u.join(L.cacheDir,"current.blockmap")),j==null?[N]:[N,j]},G=this._logger,V=await L.validateDownloadedPath(N,R,P,G);if(V!=null)return N=V,await D(!1);const te=async()=>(await L.clear().catch(()=>{}),await(0,f.unlink)(N).catch(()=>{})),de=await(0,s.createTempUpdateFile)(`temp-${x}`,$,G);try{await b.task(de,T,j,te),await(0,e.retry)(()=>(0,f.rename)(de,N),{retries:60,interval:500,shouldRetry:ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message)?!0:(G.warn(`Cannot rename temp file to final file: ${ie.message||ie.stack}`),!1)})}catch(ie){throw await te(),ie instanceof e.CancellationError&&(G.info("cancelled"),this.emit("update-cancelled",R)),ie}return G.info(`New version ${v} has been downloaded to ${N}`),await D(!0)}async differentialDownloadInstaller(b,P,T,R,v){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const k=P.updateInfoAndProvider.provider,q=await k.getBlockMapFiles(b.url,this.app.version,P.updateInfoAndProvider.info.version,this.previousBlockmapBaseUrlOverride);this._logger.info(`Download block maps (old: "${q[0]}", new: ${q[1]})`);const L=async G=>{const V=await this.httpExecutor.downloadToBuffer(G,{headers:P.requestHeaders,cancellationToken:P.cancellationToken});if(V==null||V.length===0)throw new Error(`Blockmap "${G.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(V).toString())}catch(te){throw new Error(`Cannot parse blockmap "${G.href}", error: ${te}`)}},$={newUrl:b.url,oldFile:u.join(this.downloadedUpdateHelper.cacheDir,v),logger:this._logger,newFile:T,isUseMultipleRangeRequest:k.isUseMultipleRangeRequest,requestHeaders:P.requestHeaders,cancellationToken:P.cancellationToken};this.listenerCount(m.DOWNLOAD_PROGRESS)>0&&($.onProgress=G=>this.emit(m.DOWNLOAD_PROGRESS,G));const x=async(G,V)=>{const te=u.join(V,"current.blockmap");await(0,f.outputFile)(te,(0,g.gzipSync)(JSON.stringify(G)))},N=async G=>{const V=u.join(G,"current.blockmap");try{if(await(0,f.pathExists)(V))return JSON.parse((0,g.gunzipSync)(await(0,f.readFile)(V)).toString())}catch(te){this._logger.warn(`Cannot parse blockmap "${V}", error: ${te}`)}return null},j=await L(q[1]);await x(j,this.downloadedUpdateHelper.cacheDirForPendingUpdate);let D=await N(this.downloadedUpdateHelper.cacheDir);return D==null&&(D=await L(q[0])),await new y.GenericDifferentialDownloader(b.info,this.httpExecutor,$).download(D,j),!1}catch(k){if(this._logger.error(`Cannot download differentially, fallback to full download: ${k.stack||k}`),this._testOnlyOptions!=null)throw k;return!0}}};St.AppUpdater=w;function S(I){const b=(0,a.prerelease)(I);return b!=null&&b.length>0}class O{info(b){}warn(b){}error(b){}}return St.NoOpLogger=O,St}var yl;function Kr(){if(yl)return Wt;yl=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.BaseUpdater=void 0;const e=Hr,d=yo();let p=class extends d.AppUpdater{constructor(f,l){super(f,l),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(f=!1,l=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(f,f?l:this.autoRunAppAfterInstall)?setImmediate(()=>{gt.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(f){return super.executeDownload({...f,done:l=>(this.dispatchUpdateDownloaded(l),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(f=!1,l=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const o=this.downloadedUpdateHelper,u=this.installerPath,a=o==null?null:o.downloadedFileInfo;if(u==null||a==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${f}, isForceRunAfter: ${l}`),this.doInstall({isSilent:f,isForceRunAfter:l,isAdminRightsRequired:a.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(f=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(f!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${f}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}spawnSyncLog(f,l=[],o={}){this._logger.info(`Executing: ${f} with args: ${l}`);const u=(0,e.spawnSync)(f,l,{env:{...process.env,...o},encoding:"utf-8",shell:!0}),{error:a,status:s,stdout:i,stderr:r}=u;if(a!=null)throw this._logger.error(r),a;if(s!=null&&s!==0)throw this._logger.error(r),new Error(`Command ${f} exited with code ${s}`);return i.trim()}async spawnLog(f,l=[],o=void 0,u="ignore"){return this._logger.info(`Executing: ${f} with args: ${l}`),new Promise((a,s)=>{try{const i={stdio:u,env:o,detached:!0},r=(0,e.spawn)(f,l,i);r.on("error",n=>{s(n)}),r.unref(),r.pid!==void 0&&a(!0)}catch(i){s(i)}})}};return Wt.BaseUpdater=p,Wt}var ar={},sr={},wl;function wu(){if(wl)return sr;wl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const e=Et(),d=Eu(),p=Hl;let c=class extends d.DifferentialDownloader{async download(){const u=this.blockAwareFileInfo,a=u.size,s=a-(u.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,a-1);const i=f(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await l(this.options.oldFile),i)}};sr.FileWithEmbeddedBlockMapDifferentialDownloader=c;function f(o){return JSON.parse((0,p.inflateRawSync)(o).toString())}async function l(o){const u=await(0,e.open)(o,"r");try{const a=(await(0,e.fstat)(u)).size,s=Buffer.allocUnsafe(4);await(0,e.read)(u,s,0,s.length,a-s.length);const i=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,e.read)(u,i,0,i.length,a-s.length-i.length),await(0,e.close)(u),f(i)}catch(a){throw await(0,e.close)(u),a}}return sr}var _l;function Al(){if(_l)return ar;_l=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.AppImageUpdater=void 0;const e=Le(),d=Hr,p=Et(),c=vt,f=Ie,l=Kr(),o=wu(),u=Xe(),a=It();let s=class extends l.BaseUpdater{constructor(r,n){super(r,n)}isUpdaterActive(){return process.env.APPIMAGE==null&&!this.forceDevUpdateConfig?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,h=(0,u.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:h,downloadUpdateOptions:r,task:async(g,y)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(r.disableDifferentialDownload||await this.downloadDifferential(h,m,g,n,r))&&await this.httpExecutor.download(h.url,g,y),await(0,p.chmod)(g,493)}})}async downloadDifferential(r,n,h,g,y){try{const m={newUrl:r.url,oldFile:n,logger:this._logger,newFile:h,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(m.onProgress=w=>this.emit(a.DOWNLOAD_PROGRESS,w)),await new o.FileWithEmbeddedBlockMapDifferentialDownloader(r.info,this.httpExecutor,m).download(),!1}catch(m){return this._logger.error(`Cannot download differentially, fallback to full download: ${m.stack||m}`),process.platform==="linux"}}doInstall(r){const n=process.env.APPIMAGE;if(n==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,c.unlinkSync)(n);let h;const g=f.basename(n),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;f.basename(y)===g||!/\d+\.\d+\.\d+/.test(g)?h=n:h=f.join(f.dirname(n),f.basename(y)),(0,d.execFileSync)("mv",["-f",y,h]),h!==n&&this.emit("appimage-filename-updated",h);const m={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return r.isForceRunAfter?this.spawnLog(h,[],m):(m.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(h,[],{env:m})),!0}};return ar.AppImageUpdater=s,ar}var lr={},ur={},Rl;function wo(){if(Rl)return ur;Rl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.LinuxUpdater=void 0;const e=Kr();let d=class extends e.BaseUpdater{constructor(c,f){super(c,f)}isRunningAsRoot(){var c;return((c=process.getuid)===null||c===void 0?void 0:c.call(process))===0}get installerPath(){var c,f;return(f=(c=super.installerPath)===null||c===void 0?void 0:c.replace(/\\/g,"\\\\").replace(/ /g,"\\ "))!==null&&f!==void 0?f:null}runCommandWithSudoIfNeeded(c){if(this.isRunningAsRoot())return this._logger.info("Running as root, no need to use sudo"),this.spawnSyncLog(c[0],c.slice(1));const{name:f}=this.app,l=`"${f} would like to update"`,o=this.sudoWithArgs(l);this._logger.info(`Running as non-root user, using sudo to install: ${o}`);let u='"';return(/pkexec/i.test(o[0])||o[0]==="sudo")&&(u=""),this.spawnSyncLog(o[0],[...o.length>1?o.slice(1):[],`${u}/bin/bash`,"-c",`'${c.join(" ")}'${u}`])}sudoWithArgs(c){const f=this.determineSudoCommand(),l=[f];return/kdesudo/i.test(f)?(l.push("--comment",c),l.push("-c")):/gksudo/i.test(f)?l.push("--message",c):/pkexec/i.test(f)&&l.push("--disable-internal-agent"),l}hasCommand(c){try{return this.spawnSyncLog("command",["-v",c]),!0}catch{return!1}}determineSudoCommand(){const c=["gksudo","kdesudo","pkexec","beesu"];for(const f of c)if(this.hasCommand(f))return f;return"sudo"}detectPackageManager(c){var f;const l=(f=process.env.ELECTRON_BUILDER_LINUX_PACKAGE_MANAGER)===null||f===void 0?void 0:f.trim();if(l)return l;for(const o of c)if(this.hasCommand(o))return o;return this._logger.warn(`No package manager found in the list: ${c.join(", ")}. Defaulting to the first one: ${c[0]}`),c[0]}};return ur.LinuxUpdater=d,ur}var Sl;function Tl(){if(Sl)return lr;Sl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.DebUpdater=void 0;const e=Xe(),d=It(),p=wo();let c=class _u extends p.LinuxUpdater{constructor(l,o){super(l,o)}doDownloadUpdate(l){const o=l.updateInfoAndProvider.provider,u=(0,e.findFile)(o.resolveFiles(l.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:u,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(d.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(u.url,a,s)}})}doInstall(l){const o=this.installerPath;if(o==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;if(!this.hasCommand("dpkg")&&!this.hasCommand("apt"))return this.dispatchError(new Error("Neither dpkg nor apt command found. Cannot install .deb package.")),!1;const u=["dpkg","apt"],a=this.detectPackageManager(u);try{_u.installWithCommandRunner(a,o,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,o,u,a){var s;if(l==="dpkg")try{u(["dpkg","-i",o])}catch(i){a.warn((s=i.message)!==null&&s!==void 0?s:i),a.warn("dpkg installation failed, trying to fix broken dependencies with apt-get"),u(["apt-get","install","-f","-y"])}else if(l==="apt")a.warn("Using apt to install a local .deb. This may fail for unsigned packages unless properly configured."),u(["apt","install","-y","--allow-unauthenticated","--allow-downgrades","--allow-change-held-packages",o]);else throw new Error(`Package manager ${l} not supported`)}};return lr.DebUpdater=c,lr}var cr={},Cl;function bl(){if(Cl)return cr;Cl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.PacmanUpdater=void 0;const e=It(),d=Xe(),p=wo();let c=class Au extends p.LinuxUpdater{constructor(l,o){super(l,o)}doDownloadUpdate(l){const o=l.updateInfoAndProvider.provider,u=(0,d.findFile)(o.resolveFiles(l.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:u,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(e.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(e.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(u.url,a,s)}})}doInstall(l){const o=this.installerPath;if(o==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;try{Au.installWithCommandRunner(o,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(u){return this.dispatchError(u),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,o,u){var a;try{o(["pacman","-U","--noconfirm",l])}catch(s){u.warn((a=s.message)!==null&&a!==void 0?a:s),u.warn("pacman installation failed, attempting to update package database and retry");try{o(["pacman","-Sy","--noconfirm"]),o(["pacman","-U","--noconfirm",l])}catch(i){throw u.error("Retry after pacman -Sy failed"),i}}}};return cr.PacmanUpdater=c,cr}var fr={},Ol;function Pl(){if(Ol)return fr;Ol=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.RpmUpdater=void 0;const e=It(),d=Xe(),p=wo();let c=class Ru extends p.LinuxUpdater{constructor(l,o){super(l,o)}doDownloadUpdate(l){const o=l.updateInfoAndProvider.provider,u=(0,d.findFile)(o.resolveFiles(l.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:u,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(e.DOWNLOAD_PROGRESS)>0&&(s.onProgress=i=>this.emit(e.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(u.url,a,s)}})}doInstall(l){const o=this.installerPath;if(o==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const u=["zypper","dnf","yum","rpm"],a=this.detectPackageManager(u);try{Ru.installWithCommandRunner(a,o,this.runCommandWithSudoIfNeeded.bind(this),this._logger)}catch(s){return this.dispatchError(s),!1}return l.isForceRunAfter&&this.app.relaunch(),!0}static installWithCommandRunner(l,o,u,a){if(l==="zypper")return u(["zypper","--non-interactive","--no-refresh","install","--allow-unsigned-rpm","-f",o]);if(l==="dnf")return u(["dnf","install","--nogpgcheck","-y",o]);if(l==="yum")return u(["yum","install","--nogpgcheck","-y",o]);if(l==="rpm")return a.warn("Installing with rpm only (no dependency resolution)."),u(["rpm","-Uvh","--replacepkgs","--replacefiles","--nodeps",o]);throw new Error(`Package manager ${l} not supported`)}};return fr.RpmUpdater=c,fr}var dr={},Il;function Dl(){if(Il)return dr;Il=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.MacUpdater=void 0;const e=Le(),d=Et(),p=vt,c=Ie,f=ql,l=yo(),o=Xe(),u=Hr,a=Er;let s=class extends l.AppUpdater{constructor(r,n){super(r,n),this.nativeUpdater=gt.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",h=>{this._logger.warn(h),this.emit("error",h)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(r){this._logger.debug!=null&&this._logger.debug(r)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(r=>{r&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(r){let n=r.updateInfoAndProvider.provider.resolveFiles(r.updateInfoAndProvider.info);const h=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,u.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),h.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(b){h.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${b}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const P=(0,u.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");h.info(`Checked 'uname -a': arm64=${P}`),m=m||P}catch(b){h.warn(`uname shell command to check for arm64 failed: ${b}`)}m=m||process.arch==="arm64"||y;const w=b=>{var P;return b.url.pathname.includes("arm64")||((P=b.info.url)===null||P===void 0?void 0:P.includes("arm64"))};m&&n.some(w)?n=n.filter(b=>m===w(b)):n=n.filter(b=>!w(b));const S=(0,o.findFile)(n,"zip",["pkg","dmg"]);if(S==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(n)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=r.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:S,downloadUpdateOptions:r,task:async(b,P)=>{const T=c.join(this.downloadedUpdateHelper.cacheDir,I),R=()=>(0,d.pathExistsSync)(T)?!r.disableDifferentialDownload:(h.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let v=!0;R()&&(v=await this.differentialDownloadInstaller(S,r,b,O,I)),v&&await this.httpExecutor.download(S.url,b,P)},done:async b=>{if(!r.disableDifferentialDownload)try{const P=c.join(this.downloadedUpdateHelper.cacheDir,I);await(0,d.copyFile)(b.downloadedFile,P)}catch(P){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${P.message}`)}return this.updateDownloaded(S,b)}})}async updateDownloaded(r,n){var h;const g=n.downloadedFile,y=(h=r.info.size)!==null&&h!==void 0?h:(await(0,d.stat)(g)).size,m=this._logger,w=`fileToProxy=${r.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${w})`),this.server=(0,f.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${w})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${w})`)});const S=O=>{const I=O.address();return typeof I=="string"?I:`http://127.0.0.1:${I==null?void 0:I.port}`};return await new Promise((O,I)=>{const b=(0,a.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),P=Buffer.from(`autoupdater:${b}`,"ascii"),T=`/${(0,a.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(R,v)=>{const k=R.url;if(m.info(`${k} requested`),k==="/"){if(!R.headers.authorization||R.headers.authorization.indexOf("Basic ")===-1){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("No authenthication info");return}const $=R.headers.authorization.split(" ")[1],x=Buffer.from($,"base64").toString("ascii"),[N,j]=x.split(":");if(N!=="autoupdater"||j!==b){v.statusCode=401,v.statusMessage="Invalid Authentication Credentials",v.end(),m.warn("Invalid authenthication credentials");return}const D=Buffer.from(`{ "url": "${S(this.server)}${T}" }`);v.writeHead(200,{"Content-Type":"application/json","Content-Length":D.length}),v.end(D);return}if(!k.startsWith(T)){m.warn(`${k} requested, but not supported`),v.writeHead(404),v.end();return}m.info(`${T} requested by Squirrel.Mac, pipe ${g}`);let q=!1;v.on("finish",()=>{q||(this.nativeUpdater.removeListener("error",I),O([]))});const L=(0,p.createReadStream)(g);L.on("error",$=>{try{v.end()}catch(x){m.warn(`cannot end response: ${x}`)}q=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${$}`))}),v.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),L.pipe(v)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${w})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${S(this.server)}, ${w})`),this.nativeUpdater.setFeedURL({url:S(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${P.toString("base64")}`}}),this.dispatchUpdateDownloaded(n),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):O([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return dr.MacUpdater=s,dr}var hr={},Mr={},Nl;function Yf(){if(Nl)return Mr;Nl=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.verifySignature=l;const e=Le(),d=Hr,p=jr,c=Ie;function f(s,i){return['set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",s],{shell:!0,timeout:i}]}function l(s,i,r){return new Promise((n,h)=>{const g=i.replace(/'/g,"''");r.info(`Verifying signature ${g}`),(0,d.execFile)(...f(`"Get-AuthenticodeSignature -LiteralPath '${g}' | ConvertTo-Json -Compress"`,20*1e3),(y,m,w)=>{var S;try{if(y!=null||w){u(r,y,w,h),n(null);return}const O=o(m);if(O.Status===0){try{const T=c.normalize(O.Path),R=c.normalize(i);if(r.info(`LiteralPath: ${T}. Update Path: ${R}`),T!==R){u(r,new Error(`LiteralPath of ${T} is different than ${R}`),w,h),n(null);return}}catch(T){r.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(S=T.message)!==null&&S!==void 0?S:T.stack}`)}const b=(0,e.parseDn)(O.SignerCertificate.Subject);let P=!1;for(const T of s){const R=(0,e.parseDn)(T);if(R.size?P=Array.from(R.keys()).every(k=>R.get(k)===b.get(k)):T===b.get("CN")&&(r.warn(`Signature validated using only CN ${T}. Please add your full Distinguished Name (DN) to publisherNames configuration`),P=!0),P){n(null);return}}}const I=`publisherNames: ${s.join(" | ")}, raw info: `+JSON.stringify(O,(b,P)=>b==="RawData"?void 0:P,2);r.warn(`Sign verification failed, installer signed with incorrect certificate: ${I}`),n(I)}catch(O){u(r,O,null,h),n(null);return}})})}function o(s){const i=JSON.parse(s);delete i.PrivateKey,delete i.IsOSBinary,delete i.SignatureType;const r=i.SignerCertificate;return r!=null&&(delete r.Archived,delete r.Extensions,delete r.Handle,delete r.HasPrivateKey,delete r.SubjectName),i}function u(s,i,r,n){if(a()){s.warn(`Cannot execute Get-AuthenticodeSignature: ${i||r}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)(...f("ConvertTo-Json test",10*1e3))}catch(h){s.warn(`Cannot execute ConvertTo-Json: ${h.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}i!=null&&n(i),r&&n(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${r}. Failing signature validation due to unknown stderr.`))}function a(){const s=p.release();return s.startsWith("6.")&&!s.startsWith("6.3")}return Mr}var Fl;function xl(){if(Fl)return hr;Fl=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.NsisUpdater=void 0;const e=Le(),d=Ie,p=Kr(),c=wu(),f=It(),l=Xe(),o=Et(),u=Yf(),a=nt;let s=class extends p.BaseUpdater{constructor(r,n){super(r,n),this._verifyUpdateCodeSignature=(h,g)=>(0,u.verifySignature)(h,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(r){r&&(this._verifyUpdateCodeSignature=r)}doDownloadUpdate(r){const n=r.updateInfoAndProvider.provider,h=(0,l.findFile)(n.resolveFiles(r.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:r,fileInfo:h,task:async(g,y,m,w)=>{const S=h.packageInfo,O=S!=null&&m!=null;if(O&&r.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${r.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!r.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||r.disableDifferentialDownload||await this.differentialDownloadInstaller(h,r,g,n,e.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(h.url,g,y);const I=await this.verifySignature(g);if(I!=null)throw await w(),(0,e.newError)(`New version ${r.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(r,S,m,n))try{await this.httpExecutor.download(new a.URL(S.path),m,{headers:r.requestHeaders,cancellationToken:r.cancellationToken,sha512:S.sha512})}catch(b){try{await(0,o.unlink)(m)}catch{}throw b}}})}async verifySignature(r){let n;try{if(n=(await this.configOnDisk.value).publisherName,n==null)return null}catch(h){if(h.code==="ENOENT")return null;throw h}return await this._verifyUpdateCodeSignature(Array.isArray(n)?n:[n],r)}doInstall(r){const n=this.installerPath;if(n==null)return this.dispatchError(new Error("No update filepath provided, can't quit and install")),!1;const h=["--updated"];r.isSilent&&h.push("/S"),r.isForceRunAfter&&h.push("--force-run"),this.installDirectory&&h.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&h.push(`--package-file=${g}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[n].concat(h)).catch(m=>this.dispatchError(m))};return r.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(n,h).catch(m=>{const w=m.code;this._logger.info(`Cannot run installer: error code: ${w}, error message: "${m.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),w==="UNKNOWN"||w==="EACCES"?y():w==="ENOENT"?gt.shell.openPath(n).catch(S=>this.dispatchError(S)):this.dispatchError(m)}),!0)}async differentialDownloadWebPackage(r,n,h,g){if(n.blockMapSize==null)return!0;try{const y={newUrl:new a.URL(n.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:h,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:r.cancellationToken};this.listenerCount(f.DOWNLOAD_PROGRESS)>0&&(y.onProgress=m=>this.emit(f.DOWNLOAD_PROGRESS,m)),await new c.FileWithEmbeddedBlockMapDifferentialDownloader(n,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return hr.NsisUpdater=s,hr}var Ll;function zf(){return Ll||(Ll=1,function(e){var d=Be&&Be.__createBinding||(Object.create?function(m,w,S,O){O===void 0&&(O=S);var I=Object.getOwnPropertyDescriptor(w,S);(!I||("get"in I?!w.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(m,O,I)}:function(m,w,S,O){O===void 0&&(O=S),m[O]=w[S]}),p=Be&&Be.__exportStar||function(m,w){for(var S in m)S!=="default"&&!Object.prototype.hasOwnProperty.call(w,S)&&d(w,m,S)};Object.defineProperty(e,"__esModule",{value:!0}),e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.PacmanUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.NoOpLogger=e.AppUpdater=e.BaseUpdater=void 0;const c=Et(),f=Ie;var l=Kr();Object.defineProperty(e,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var o=yo();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return o.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return o.NoOpLogger}});var u=Xe();Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return u.Provider}});var a=Al();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return a.AppImageUpdater}});var s=Tl();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var i=bl();Object.defineProperty(e,"PacmanUpdater",{enumerable:!0,get:function(){return i.PacmanUpdater}});var r=Pl();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return r.RpmUpdater}});var n=Dl();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return n.MacUpdater}});var h=xl();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return h.NsisUpdater}}),p(It(),e);let g;function y(){if(process.platform==="win32")g=new(xl()).NsisUpdater;else if(process.platform==="darwin")g=new(Dl()).MacUpdater;else{g=new(Al()).AppImageUpdater;try{const m=f.join(process.resourcesPath,"package-type");if(!(0,c.existsSync)(m))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const w=(0,c.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",w),w){case"deb":g=new(Tl()).DebUpdater;break;case"rpm":g=new(Pl()).RpmUpdater;break;case"pacman":g=new(bl()).PacmanUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (rpm/deb/pacman support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return g}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>g||y()})}(en)),en}const{app:He,BrowserWindow:ro,Menu:Ul,shell:to,protocol:Xf,ipcMain:Dt}=gt,pr=Ie,{createServer:Jf}=ql,{parse:Kf}=nt;let ut=null;try{ut=zf().autoUpdater}catch(e){console.warn("electron-updater not available:",e.message),ut={checkForUpdatesAndNotify:()=>(console.log("Update check skipped (dev mode or electron-updater not available)"),Promise.resolve(null)),checkForUpdates:()=>(console.log("Update check skipped (dev mode or electron-updater not available)"),Promise.resolve(null)),quitAndInstall:()=>{console.log("Update install skipped (dev mode)")},on:()=>{},updateInfo:null}}const Qf=He.requestSingleInstanceLock();Qf?He.on("second-instance",()=>{Re&&(Re.isMinimized()&&Re.restore(),Re.focus())}):He.quit();const mr=process.env.VITE_DEV_SERVER_URL,Zf=process.env.DIST;let Re,bt=null;const Br=5e3;setTimeout(()=>{ut.checkForUpdatesAndNotify()},5e3);function Su(){bt||(bt=Jf((e,d)=>{const p=Kf(e.url,!0),c=p.pathname,f=p.query;if(c==="/oauth-data"&&e.method==="POST"){let l="";e.on("data",o=>{l+=o.toString()}),e.on("end",()=>{try{const o=JSON.parse(l);console.log("Received OAuth data from callback page:",o),Re&&Re.webContents.send("oauth-callback",o),d.writeHead(200,{"Content-Type":"application/json"}),d.end(JSON.stringify({success:!0}))}catch(o){console.error("Error parsing OAuth data:",o),d.writeHead(400,{"Content-Type":"application/json"}),d.end(JSON.stringify({error:"Invalid JSON"}))}});return}if(c.includes("-callback")){const l=c.replace("/-callback","").replace("/","");if(d.setHeader("Access-Control-Allow-Origin","*"),d.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),d.setHeader("Access-Control-Allow-Headers","Content-Type"),e.method==="OPTIONS"){d.writeHead(200),d.end();return}d.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),d.end(`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>OAuth Success</title>
          <style>
            body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
            .success { color: #4CAF50; }
            .error { color: #f44336; }
          </style>
        </head>
        <body>
          <h2 class="success">&#10003; Authentication Successful!</h2>
          <p>You can close this window and return to SiteWeave.</p>
          <script>
            // Extract hash parameters and send to main window
            if (window.location.hash) {
              const hash = window.location.hash.substring(1);
              console.log('OAuth hash received:', hash);
              
              // Send the hash data back to the server to forward to main window
              fetch('/oauth-data', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  provider: 'supabase',
                  hash: hash,
                  url: window.location.href
                })
              }).then(() => {
                console.log('OAuth data sent to server');
              }).catch((error) => {
                console.error('Failed to send OAuth data:', error);
              });
            } else {
              console.log('No hash found in URL:', window.location.href);
            }
            
            setTimeout(() => {
              window.close();
            }, 2000);
          <\/script>
        </body>
        </html>
      `),Re&&Re.webContents.send("oauth-callback",{provider:l,code:f.code,state:f.state,error:f.error,errorDescription:f.error_description,url:e.url,fullUrl:`http://127.0.0.1:${Br}${e.url}`,hash:null})}else d.writeHead(404,{"Content-Type":"text/plain"}),d.end("Not Found")}),bt.listen(Br,"127.0.0.1",()=>{console.log(`OAuth server listening on http://127.0.0.1:${Br}`)}),bt.on("error",e=>{e.code==="EADDRINUSE"?console.log(`Port ${Br} is already in use`):console.error("OAuth server error:",e)}))}function _o(){bt&&(bt.close(),bt=null,console.log("OAuth server stopped"))}const no="siteweave";function kl(){if(console.log("Creating window..."),Re=new ro({width:1200,height:800,minWidth:800,minHeight:600,webPreferences:{nodeIntegration:!1,contextIsolation:!0,enableRemoteModule:!1,webSecurity:!!mr,preload:pr.join(__dirname,"preload.js")},icon:He.isPackaged?pr.join(process.resourcesPath,"app.asar","build","icon.png"):pr.join(__dirname,"../build/icon.png"),title:"SiteWeave",show:!1,titleBarStyle:"default"}),console.log("Window created, loading app..."),mr)console.log("Loading from Vite dev server:",mr),Re.loadURL(mr),Re.webContents.openDevTools();else{const e=He.isPackaged?pr.join(process.resourcesPath,"app.asar","dist","index.html"):pr.join(Zf||"dist","index.html");console.log("Loading from production build:",e),Re.loadFile(e)}Re.once("ready-to-show",()=>{console.log("Window ready to show"),Re.show(),Re.focus()}),Re.webContents.on("did-fail-load",(e,d,p)=>{console.error("Failed to load:",d,p),Re.show(),Re.focus()}),Re.on("closed",()=>{console.log("Main window was closed"),Re=null}),Re.webContents.setWindowOpenHandler(({url:e})=>(to.openExternal(e),{action:"deny"})),Re.webContents.on("will-navigate",(e,d)=>{const p=new URL(d);mr?p.origin!=="http://localhost:5173"&&p.origin!=="file://"&&(e.preventDefault(),to.openExternal(d)):p.origin!=="file://"&&(e.preventDefault(),to.openExternal(d))})}function ed(){const e=[{label:"File",submenu:[{label:"New Project",accelerator:"CmdOrCtrl+N",click:()=>{Re.webContents.send("menu-new-project")}},{type:"separator"},{label:"Quit",accelerator:process.platform==="darwin"?"Cmd+Q":"Ctrl+Q",click:()=>{He.quit()}}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"}]},{label:"View",submenu:[{role:"reload"},{role:"forceReload"},{role:"toggleDevTools"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn"},{role:"zoomOut"},{type:"separator"},{role:"togglefullscreen"}]},{label:"Window",submenu:[{role:"minimize"},{role:"close"}]},{label:"Help",submenu:[{label:"About SiteWeave",click:()=>{Re.webContents.send("menu-about")}},{label:"Check for Updates",click:()=>{ut.checkForUpdatesAndNotify()}}]}],d=Ul.buildFromTemplate(e);Ul.setApplicationMenu(d)}function td(){Xf.registerSchemesAsPrivileged([{scheme:no,privileges:{standard:!0,secure:!0,allowServiceWorkers:!0,supportFetchAPI:!0,corsEnabled:!0}}])}function Tu(e){if(!Re)return;const d=new URL(e),p=d.pathname;Re.webContents.send("oauth-callback",{provider:p.replace("/",""),code:d.searchParams.get("code"),state:d.searchParams.get("state"),error:d.searchParams.get("error"),errorDescription:d.searchParams.get("error_description")})}td();He.whenReady().then(()=>{console.log("App is ready"),ro.getAllWindows().length===0?(console.log("No windows exist, creating new window..."),kl(),ed(),Su()):console.log("Windows already exist, skipping window creation"),He.on("open-url",(e,d)=>{e.preventDefault(),Tu(d)}),He.on("activate",()=>{console.log("App activated"),ro.getAllWindows().length===0&&(console.log("No windows on activate, creating new window"),kl())})});He.on("window-all-closed",()=>{console.log("All windows closed event triggered"),_o(),process.platform!=="darwin"&&He.quit()});He.on("before-quit",()=>{_o()});ut.on("update-available",()=>{Re==null||Re.webContents.send("update-available")});ut.on("update-downloaded",()=>{Re==null||Re.webContents.send("update-downloaded")});ut.on("error",e=>{if(e.message&&(e.message.includes("latest.yml")||e.message.includes("404"))){console.log("Update check: No release artifacts found (this is normal for new releases)",e.message);return}console.error("Auto-updater error:",e.message||e)});Dt.handle("get-app-version",()=>He.getVersion());Dt.handle("install-update",()=>{ut.quitAndInstall()});Dt.handle("check-for-updates",async()=>{try{const e=await ut.checkForUpdates();return{success:!0,updateInfo:e!=null&&e.updateInfo?{version:e.updateInfo.version,releaseDate:e.updateInfo.releaseDate,path:e.updateInfo.path}:null}}catch(e){return{success:!1,error:e.message||String(e)}}});Dt.handle("start-oauth-server",()=>(Su(),!0));Dt.handle("stop-oauth-server",()=>(_o(),!0));Dt.handle("send-oauth-callback",(e,d)=>(console.log("Received OAuth callback from renderer:",d),Re&&Re.webContents.send("oauth-callback",d),!0));Dt.handle("exchange-oauth-token",async(e,{provider:d,code:p,clientId:c,redirectUri:f,codeVerifier:l})=>{const o=wc,{URL:u,URLSearchParams:a}=nt,i={google:"https://oauth2.googleapis.com/token",microsoft:"https://login.microsoftonline.com/common/oauth2/v2.0/token"}[d];if(!i)throw new Error(`Unknown OAuth provider: ${d}`);return new Promise((r,n)=>{const h=new a({client_id:c,code:p,grant_type:"authorization_code",redirect_uri:f});d==="microsoft"&&l&&h.set("code_verifier",l);const g=new u(i),y={hostname:g.hostname,port:g.port||443,path:g.pathname,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(h.toString())}},m=o.request(y,w=>{let S="";w.on("data",O=>{S+=O}),w.on("end",()=>{if(w.statusCode>=200&&w.statusCode<300)try{const O=JSON.parse(S);r(O)}catch(O){n(new Error(`Failed to parse token response: ${O.message}`))}else n(new Error(`Token exchange failed (${w.statusCode}): ${S}`))})});m.on("error",w=>{n(new Error(`Token exchange request failed: ${w.message}`))}),m.write(h.toString()),m.end()})});process.platform==="win32"&&(He.setAsDefaultProtocolClient(no),He.on("second-instance",(e,d,p)=>{const c=d.find(f=>f.startsWith(`${no}://`));c&&Tu(c),Re&&(Re.isMinimized()&&Re.restore(),Re.focus())}));module.exports=_c;
