"use strict";const{contextBridge:n,ipcRenderer:o}=require("electron");console.log("Preload script loading...");try{n.exposeInMainWorld("electronAPI",{onOAuthCallback:r=>{try{o.on("oauth-callback",(e,t)=>r(t))}catch(e){console.error("Error setting up OAuth callback:",e)}},onUpdateAvailable:r=>{try{o.on("update-available",r)}catch(e){console.error("Error setting up update available callback:",e)}},onUpdateDownloaded:r=>{try{o.on("update-downloaded",r)}catch(e){console.error("Error setting up update downloaded callback:",e)}},onUpdateError:r=>{try{o.on("update-error",(e,t)=>r(t))}catch(e){console.error("Error setting up update error callback:",e)}},onUpdateDownloadProgress:r=>{try{o.on("update-download-progress",(e,t)=>r(t))}catch(e){console.error("Error setting up update download progress callback:",e)}},onMenuAction:r=>{try{o.on("menu-new-project",r),o.on("menu-about",r)}catch(e){console.error("Error setting up menu action callback:",e)}},getAppVersion:()=>{try{return o.invoke("get-app-version")}catch(r){return console.error("Error getting app version:",r),"1.0.0"}},installUpdate:()=>{try{return o.invoke("install-update")}catch(r){return console.error("Error installing update:",r),Promise.resolve()}},checkForUpdates:()=>{try{return o.invoke("check-for-updates")}catch(r){return console.error("Error checking for updates:",r),Promise.resolve()}},startOAuthServer:()=>{try{return o.invoke("start-oauth-server")}catch(r){return console.error("Error starting OAuth server:",r),Promise.resolve()}},stopOAuthServer:()=>{try{return o.invoke("stop-oauth-server")}catch(r){return console.error("Error stopping OAuth server:",r),Promise.resolve()}},openExternal:r=>{try{window.open(r,"_blank")}catch(e){console.error("Error opening external link:",e)}},sendOAuthCallback:r=>{try{return o.invoke("send-oauth-callback",r)}catch(e){return console.error("Error sending OAuth callback:",e),Promise.resolve()}},exchangeOAuthToken:r=>{try{return o.invoke("exchange-oauth-token",r)}catch(e){return console.error("Error exchanging OAuth token:",e),Promise.reject(e)}},platform:process.platform,isElectron:!0}),console.log("Preload script loaded successfully")}catch(r){console.error("Error in preload script:",r),n.exposeInMainWorld("electronAPI",{isElectron:!0,platform:process.platform,onOAuthCallback:()=>{},onUpdateAvailable:()=>{},onUpdateDownloaded:()=>{},onUpdateError:()=>{},onUpdateDownloadProgress:()=>{},onMenuAction:()=>{},getAppVersion:()=>"1.0.0",installUpdate:()=>Promise.resolve(),checkForUpdates:()=>Promise.resolve(),startOAuthServer:()=>Promise.resolve(),stopOAuthServer:()=>Promise.resolve(),openExternal:e=>window.open(e,"_blank"),sendOAuthCallback:()=>Promise.resolve(),exchangeOAuthToken:()=>Promise.reject(new Error("exchangeOAuthToken not available in fallback"))})}
